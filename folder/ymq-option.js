!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,y=n.hasOwnProperty,a=y.toString,l=a.call(Object),v={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=y.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,y,s,c,v,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&v(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!y||!y.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ve(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ye(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ve(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],y=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||y.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||y.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||y.push(".#.+[+~]"),e.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),y=y.length&&new RegExp(y.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),v=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&v(p,e)?-1:t==C||t.ownerDocument==p&&v(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace($," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,y){var v="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===y?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=v!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(v){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=y)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ye(function(){return[0]}),last:ye(function(e,t){return[t-1]}),eq:ye(function(e,t,n){return[n<0?n+t:n]}),even:ye(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ye(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ye(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ye(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,y,v,e){return y&&!y[S]&&(y=Ce(y)),v&&!v[S]&&(v=Ce(v,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?v||(e?d:l||y)?[]:t:f;if(g&&g(f,p,n,r),y){i=Te(p,u),y(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(v||d){if(v){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);v(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=v?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),v?v(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,y,v,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(y=o,m=0<(v=i).length,x=0<y.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=y[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=v[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+v.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ve(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function $(){E.removeEventListener("DOMContentLoaded",$),C.removeEventListener("load",$),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",$),C.addEventListener("load",$));var B=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)B(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):B(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),v.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",v.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,v.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events=Object.create(null)),(a=y.handle)||(a=y.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.hasData(e)&&Y.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||S.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Se(this,t,Ce),!1},trigger:function(){return Se(this,t),!0},_default:function(e){return Y.get(e.target,t)},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!v.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ye(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ye(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ye(r)),r.parentNode&&(n&&ie(r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ye(c),r=0,i=(o=ye(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ye(e),a=a||ye(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ye(c,"script")).length&&ve(a,!f&&ye(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return B(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ye(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=/^--/,Me=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Ie=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},We=new RegExp(ne.join("|"),"i"),Fe="[\\x20\\t\\r\\n\\f]",$e=new RegExp("^"+Fe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Fe+"+$","g");function Be(e,t,n){var r,i,o,a,s=Re.test(t),u=e.style;return(n=n||Me(e))&&(a=n.getPropertyValue(t)||n[t],s&&(a=a.replace($e,"$1")),""!==a||ie(e)||(a=S.style(e,t)),!v.pixelBoxStyles()&&Pe.test(a)&&We.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var ze=["Webkit","Moz","ms"],Ue=E.createElement("div").style,Xe={};function Ve(e){var t=S.cssProps[e]||Xe[e];return t||(e in Ue?e:Xe[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=ze.length;while(n--)if((e=ze[n]+t)in Ue)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Me(e),i=(!v.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Re.test(t),l=e.style;if(u||(t=Ve(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Re.test(t)||(t=Ve(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ge.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):Ie(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Me(e),o=!v.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=_e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-Ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Me(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(y?"hidden"in y&&(g=y.hidden):y=Y.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",v.checkOn=""!==rt.value,v.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",v.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return B(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function yt(e){return(e.match(P)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return B(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).addClass(t.call(this,e,vt(this)))}):(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&" "+yt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=yt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).removeClass(t.call(this,e,vt(this)))}):arguments.length?(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&" "+yt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=yt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return m(t)?this.each(function(e){S(this).toggleClass(t.call(this,e,vt(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=mt(t),this.each(function(){if(s)for(o=S(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=vt(this))&&Y.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":Y.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+yt(vt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:yt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=y.call(e,"type")?e.type:e,h=y.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function jt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):jt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)jt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Dt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function $t(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Bt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,S.ajaxSettings),t):Bt(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,y=S.ajaxSetup({},t),v=y.context||y,m=y.context&&(v.nodeType||v.jquery)?S(v):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=y.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),y.url=((e||y.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=(y.dataType||"*").toLowerCase().match(P)||[""],null==y.crossDomain){r=E.createElement("a");try{r.href=y.url,r.href=r.href,y.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=S.param(y.data,y.traditional)),$t(Rt,y,t,T),h)return T;for(i in(g=S.event&&y.global)&&0==S.active++&&S.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!Ot.test(y.type),f=y.url.replace(qt,""),y.hasContent?y.data&&y.processData&&0===(y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(y.data=y.data.replace(Dt,"+")):(o=y.url.slice(f.length),y.data&&(y.processData||"string"==typeof y.data)&&(f+=(Et.test(f)?"&":"?")+y.data,delete y.data),!1===y.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),y.url=f+o),y.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader("Content-Type",y.contentType),T.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+It+"; q=0.01":""):y.accepts["*"]),y.headers)T.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(v,T,y)||h))return T.abort();if(u="abort",b.add(y.complete),T.done(y.success),T.fail(y.error),c=$t(Mt,y,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,y]),h)return T;y.async&&0<y.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},y.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(y,T,n)),!i&&-1<S.inArray("script",y.dataTypes)&&S.inArray("json",y.dataTypes)<0&&(y.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(y,s,T,i),i?(y.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===y.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(v,[o,l,T]):x.rejectWith(v,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,y,i?o:a]),b.fireWith(v,[T,l]),g&&(m.trigger("ajaxComplete",[T,y]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();v.cors=!!zt&&"withCredentials"in zt,v.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(v.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),v.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=yt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return B(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=_e(v.pixelPosition,function(e,t){if(t)return t=Be(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return B(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
let ymqJq = $.noConflict(true);
function pushLocalStorage(t,e="ymq-checkout"){try{var i=localStorage.getItem(e);null==i&&(i=""),i+=`${t} \r\n`,localStorage.setItem(e,i)}catch(t){}}window.ymq=window.ymq||{},window.ymq_option.baseUrl="https://cdn.shopify.com/s/files/1/0411/8639/4277/t/11/assets/",window.ymq_option.vn="v=3.4.3",window.ymq_option.v=`?${window.ymq_option.vn}`,window.ymq_option.s3_url="https://cdn.ymqapp.com/",ymqJq.ajaxSetup({beforeSend:function(t){t.setRequestHeader("token",window.ymq_option.token),t.setRequestHeader("shop",window.ymq_option.shop),t.setRequestHeader("shopid",window.ymq_option.shop_id),t.setRequestHeader("timestamp",window.ymq_option.timestamp),t.setRequestHeader("app","option")}}),window.ymq_option.buy_now_new=!1,window.ymq_option.cancel_isten=!1,localStorage.removeItem("ymq-code"),pushLocalStorage(`ymq${(new Date).getTime()}`,"ymq-code"),pushLocalStorage("1.0","ymq-code"),pushLocalStorage(`${window.location.href}`,"ymq-code"),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("buy-now-new")&&1==window.ymq_option.ymq_option_branding.extra["buy-now-new"]&&(window.ymq_option.buy_now_new=!0),(window.ymq_option.ymq_option_branding.extra.hasOwnProperty("open-theme-buy-now")||window.ymq_option.ymq_option_branding.extra.hasOwnProperty("open-theme-ajax-cart"))&&(window.ymq_option.buy_now_new=!0),window.ymq_option.transform_function=!1,window.ymq_option.transform_function_image=!1,window.ymq_option.ymq_option_branding.extra.hasOwnProperty("transformer-function")&&1==window.ymq_option.ymq_option_branding.extra["transformer-function"]&&(window.ymq_option.transform_function=!0,window.ymq_option.transform_function_image=!0),window.ymq_option.real_time_upload=!1,(window.ymq_option.ymq_option_branding.extra.plan>2||window.ymq_option.ymq_option_branding.extra.hasOwnProperty("real-time-upload-free")&&1==window.ymq_option.ymq_option_branding.extra["real-time-upload-free"])&&window.ymq_option.ymq_option_branding.extra.hasOwnProperty("real-time-upload")&&1==window.ymq_option.ymq_option_branding.extra["real-time-upload"]&&(window.ymq_option.real_time_upload=!0),window.ymq_option.theme_ajax_cart=!1,ymq_option.ymq_option_branding.extra.options_list_show_old=ymq_option.ymq_option_branding.extra.options_list_show,window.ymq_option.ymq_option_branding.extra.hasOwnProperty("open-theme-ajax-cart")&&1==window.ymq_option.ymq_option_branding.extra["open-theme-ajax-cart"]&&(window.ymq_option.theme_ajax_cart=!0,ymq_option.ymq_option_branding.extra.options_list_show=0),window.ymq_option.theme_buy_now=!1,window.ymq_option.ymq_option_branding.extra.hasOwnProperty("open-theme-buy-now")&&1==window.ymq_option.ymq_option_branding.extra["open-theme-buy-now"]&&(window.ymq_option.theme_buy_now=!0,ymq_option.ymq_option_branding.extra.build_buy_now=""),window.ymq_option.min_max_new=!1,window.ymq_option.ymq_option_branding.extra.hasOwnProperty("min-max-new")&&1==window.ymq_option.ymq_option_branding.extra["min-max-new"]&&(window.ymq_option.min_max_new=!0),window.ymqAdmin&&(window.ymq_option.min_max_new=!1),window.ymq_option.tooltip_type="flipIn",window.ymq_option.ymq_option_branding.extra.hasOwnProperty("tooltip_type")&&(window.ymq_option.tooltip_type=window.ymq_option.ymq_option_branding.extra.tooltip_type),window.ymq_option.product_collections_array=[],window.ymq_option.hasOwnProperty("product_collections")&&(window.ymq_option.product_collections_array=[],Object.keys(window.ymq_option.product_collections).forEach((t=>{window.ymq_option.product_collections_array.push(window.ymq_option.product_collections[t])})));try{"product"==ymq_option.page&&"string"==typeof window.ymq_option.product.tags&&(""==window.ymq_option.product.tags?window.ymq_option.product.tags=[]:window.ymq_option.product.tags=window.ymq_option.product.tags.split(", "))}catch(t){console.log(t)}ymq_option.in_product=function(t){try{if(window.ymq_option.product.hasOwnProperty("id")&&t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=t.split(",")),Array.isArray(t)&&(t=t.map((t=>Number(t))),-1!=ymqJq.inArray(Number(window.ymq_option.product.id),t))))return window.ymq_option.admin_tem_type="0,1",!0}catch(t){console.log(t)}return!1},ymq_option.in_collection=function(t){try{if(window.ymq_option.hasOwnProperty("product_collections")&&t){var e=Object.keys(ymq_option.product_collections).map((t=>Number(t)));if("string"==typeof t&&(t=t.split(",")),Array.isArray(e)&&Array.isArray(t)){t=t.map((t=>Number(t)));if(e.filter((e=>t.indexOf(e)>-1)).length>0)return window.ymq_option.admin_tem_type="0,2",!0}}}catch(t){console.log(t)}return!1},ymq_option.in_tag=function(t){try{if(window.ymq_option.product.hasOwnProperty("tags")&&t){var e=window.ymq_option.product.tags;if("string"==typeof t&&(t=t.split(",")),Array.isArray(t)&&Array.isArray(e)){var i=[];if(t.forEach((t=>{i.push(t),i.push(ymq_remove_special_chafan(t))})),e.filter((t=>i.indexOf(t)>-1)).length>0)return window.ymq_option.admin_tem_type="0,3",!0}}}catch(t){console.log(t)}return!1},ymq_option.tem_condition_type={1:"l == r",2:"l != r",3:"l > r",4:"l < r",5:"l.startsWith(r)",6:"l.endsWith(r)",7:"l.includes(r)",8:"!l.includes(r)",9:"l.includes(r)",10:"!l.includes(r)"},ymq_option.tem_automate=function(tem_condition,tem_condition_type,r){tem_condition=Number(tem_condition),tem_condition_type=Number(tem_condition_type);var coefficient=100;window.ymqAdmin&&(coefficient=1);var left=null,res=!1;try{switch(tem_condition){case 1:left=window.ymq_option.product.title;break;case 2:left=window.ymq_option.product.type;break;case 3:left=window.ymq_option.product.vendor;break;case 4:if(1==tem_condition_type||2==tem_condition_type){var price=window.ymq_option.product.variants.map((t=>t.price/coefficient));left=price}3==tem_condition_type&&(left=window.ymq_option.product.price_max/coefficient),4==tem_condition_type&&(left=window.ymq_option.product.price_min/coefficient);break;case 5:left=window.ymq_option.product.tags;break;case 6:var collection_title=ymq_option.product_collections_array.map((t=>t.title));collection_title.length>0&&(left=collection_title)}if(null!=left)if(Array.isArray(left))if([7,8].includes(tem_condition_type)){var l=left;eval(ymq_option.tem_condition_type[tem_condition_type])&&(res=!0)}else if([10].includes(tem_condition_type)){var all_not_contains=!0;left.some((l=>{if(!eval(ymq_option.tem_condition_type[tem_condition_type]))return all_not_contains=!1,!0})),res=all_not_contains}else left.some((l=>{if(eval(ymq_option.tem_condition_type[tem_condition_type]))return res=!0,!0}));else{var l=left;eval(ymq_option.tem_condition_type[tem_condition_type])&&(res=!0)}}catch(t){res=!1,console.log(t)}return res};var ymqNeedInto=!1,factory;ymq_option.hasOwnProperty("ymq_option_template_assign_c_t")||(ymq_option.ymq_option_template_assign_c_t={});try{if(window.ymq_option.hasOwnProperty("ymq_option_template_c_t")&&window.ymq_option.hasOwnProperty("ymq_option_template_condition_c_t")&&window.ymq_option.hasOwnProperty("ymq_option_template_sort")&&""!=window.ymq_option.ymq_option_template_sort&&(window.ymq_option.admin_tem_list=[],window.ymq_option.ymq_option_template_sort.split(",").forEach((id=>{try{window.ymq_option.admin_tem_type="";var key=`tem${id}`;if(window.ymq_option.ymq_option_data.hasOwnProperty(key)&&(window.ymq_option.ymq_option_template_assign_c_t.hasOwnProperty(key)&&(window.ymq_option.ymq_option_template[key]=window.ymq_option.ymq_option_template_c_t[key],window.ymq_option.ymq_option_template_condition[key]=window.ymq_option.ymq_option_template_condition_c_t[key]),ymq_option.ymq_option_template_assign_c_t.hasOwnProperty(key)&&0!=ymq_option.ymq_option_template_assign_c_t[key].type&&delete window.ymq_option.ymq_option_data[key]),window.ymq_option.ymq_option_template_c_t.hasOwnProperty(key)&&window.ymq_option.ymq_option_template_condition_c_t.hasOwnProperty(key)&&!window.ymq_option.ymq_option_data.hasOwnProperty(key)){var has_tem=!1;if(window.ymq_option.ymq_option_template_assign_c_t.hasOwnProperty(key)){var assign_json=window.ymq_option.ymq_option_template_assign_c_t[key];if(0==assign_json.type){var manual=assign_json.manual;(ymq_option.in_collection(manual.collection)||ymq_option.in_tag(manual.tag)||ymq_option.in_product(manual.product))&&(has_tem=!0)}if(1==assign_json.type){var automate=assign_json.automate,eval_array=[];Object.keys(automate.data).forEach((t=>{var{tem_condition:e,tem_condition_type:i,tem_condition_value:n}=automate.data[t];eval_array.push(`ymq_option.tem_automate('${e}','${i}','${n}')`)})),eval(eval_array.join(1==automate.type?" && ":" || "))&&(window.ymq_option.admin_tem_type="1",has_tem=!0)}2==assign_json.type&&(window.ymq_option.admin_tem_type="2",has_tem=!0)}else if(window.ymqAdmin)try{window.ymq_option.t_ids_buy_c.includes(id.toString())&&(window.ymq_option.admin_tem_type="0,2",has_tem=!0),window.ymq_option.t_ids_buy_t.includes(id.toString())&&(window.ymq_option.admin_tem_type="0,3",has_tem=!0)}catch(t){}else has_tem=!0;has_tem&&(window.ymqAdmin&&window.ymq_option.admin_tem_list.push({assign_type:window.ymq_option.admin_tem_type,id:window.ymq_option.ymq_option_template_info[key].id,name:window.ymq_option.ymq_option_template_info[key].name}),ymqNeedInto=!0,window.ymq_option.ymq_option_template[key]=window.ymq_option.ymq_option_template_c_t[key],window.ymq_option.ymq_option_template_condition[key]=window.ymq_option.ymq_option_template_condition_c_t[key],window.ymq_option.ymq_option_data[key]={a_t1:"",a_t2:"",alert:"",alert_text:"",help:"",id:id,required:"0",tooltip:"",tooltip_position:"1",type:100})}}catch(t){console.log(t)}})),window.ymqAdmin))try{try{Object.keys(window.ymq_option.ymq_option_data).forEach((t=>{t.startsWith("tem")&&(original_tem.push(t),original_tem_change.push(t))}))}catch(t){}window.adminIntervalResult(1e6,100,(function(){return"function"==typeof window.ymq_option.build_left_tem_list&&(window.ymq_option.build_left_tem_list(),!0)}))}catch(t){}}catch(t){console.log(t)}function ymqAutoLoad(){window.ymq_option.hideByNow=window.ymq_option.hideByNow||!1,window.ymq_option.cancelAjaxCart=window.ymq_option.cancelAjaxCart||!1,window.ymq_option.plugs=[],window.ymq_option.variant_product_handles=[],window.ymq_option.variant_product_ids_obj={},window.ymq_option.variant_product_ids=[],window.ymq_option.variant_json={},window.ymq_option.variant_json_success=!1,window.ymq_option.product_qty_in_cart=0,"product"==ymq_option.page&&window.ymq_option.min_max_new&&ymq_option.cart.items.forEach((t=>{t.product_id==ymq_option.product.id&&(window.ymq_option.product_qty_in_cart=window.ymq_option.product_qty_in_cart+t.quantity)})),window.ymq_option.buy_now_new?(window.ymq_option.ymq_option_branding.extra.bunow=1,ymq_option.special_theme={887:{"add-cart-form-number":".product__info-wrapper","theme-variant-class":"variant-radios,variant-selects","theme-variant-class-no":'[class^="product-form__noscript-wrapper-template--"],[id^="product-form-installment-template--"]',"trigger-option-dom":".product-form__input:eq(ymq1) input:eq(ymq2),.product-form__input:eq(ymq1) option:eq(ymq2)","add-to-cart-form":'[id^="product-form-template"]',"variant-condition-label-class":".form__label","variant-condition-value-parent-class":".product-form__input"}}):ymq_option.special_theme={887:{"add-cart-form-number":".product__info-wrapper","theme-variant-class":"variant-radios,variant-selects","theme-variant-class-no":'[class^="product-form__noscript-wrapper-template--"],[id^="product-form-installment-template--"]',"variant-condition-label-class":".form__label","variant-condition-value-parent-class":".product-form__input",hideByNow:!0,cancelAjaxCart:!0}},ymq_option.theme_store_id=Shopify.theme.theme_store_id,ymqJq(".product__info-wrapper").length>0&&ymqJq('[class^="product-form__noscript-wrapper-template--"],[id^="product-form-installment-template--"]').length>0&&ymqJq('[id^="product-form-template"]').length>0&&(ymq_option.theme_store_id=887);try{ymq_option.theme_store_id&&ymq_option.special_theme.hasOwnProperty(ymq_option.theme_store_id)&&Object.keys(ymq_option.special_theme[ymq_option.theme_store_id]).forEach((t=>{"hideByNow"==t||"cancelAjaxCart"==t?window.ymq_option[t]=ymq_option.special_theme[ymq_option.theme_store_id][t]:window.ymq_option.ymq_option_branding.extra.hasOwnProperty(t)&&""!=window.ymq_option.ymq_option_branding.extra[t]&&ymqJq(window.ymq_option.ymq_option_branding.extra[t]).length>0||(window.ymq_option.ymq_option_branding.extra[t]=ymq_option.special_theme[ymq_option.theme_store_id][t])}))}catch(t){window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0}function t(t){Object.keys(t).forEach((function(e){var i=t[e];if([9,10].includes(Number(i.type))&&-1==Number(ymqJq.inArray("jedate",window.ymq_option.plugs))&&window.ymq_option.plugs.push("jedate"),[14].includes(Number(i.type))&&-1==Number(ymqJq.inArray("colpick",window.ymq_option.plugs))&&window.ymq_option.plugs.push("colpick"),[12].includes(Number(i.type))&&(0==window.ymq_option.real_time_upload&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0,window.ymq_option.transform_function_image=!1),i.hasOwnProperty("cropped_type")&&Number(i.cropped_type)>0&&-1==Number(ymqJq.inArray("cropper",window.ymq_option.plugs))&&(window.ymq_option.plugs.push("ymqmodal"),window.ymq_option.plugs.push("cropper"))),[3,4,5,6,7,8,15,16,20,21].includes(Number(i.type)))Object.keys(i.options).forEach((function(t){var e=i.options[t];try{e.hasOwnProperty("add_price_type")&&2==e.add_price_type&&(""==e.handle||window.ymq_option.variant_product_handles.includes(e.handle)||(window.ymq_option.variant_product_ids_obj[e.handle]=e.product_id,window.ymq_option.variant_product_handles.push(e.handle)))}catch(t){}}));else try{i.hasOwnProperty("add_price_type")&&2==i.add_price_type&&(""==i.handle||window.ymq_option.variant_product_handles.includes(i.handle)||(window.ymq_option.variant_product_ids_obj[i.handle]=i.product_id,window.ymq_option.variant_product_handles.push(i.handle)))}catch(t){}0!=window.ymq_option.hideByNow&&0!=window.ymq_option.cancelAjaxCart||window.ymq_option.buy_now_new||([12,6,7,8,16,21].includes(Number(i.type))&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0),i.hasOwnProperty("qty_input")&&1==Number(i.qty_input)||i.hasOwnProperty("is_get_to_cart")&&Number(0==i.is_get_to_cart)||[18,19].includes(Number(i.type))&&window.ymq_option.ymq_option_branding.extra.plan>2?(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0):[3,4,5,6,7,8,15,16,20,21].includes(Number(i.type))?Object.keys(i.options).forEach((function(t){var e=i.options[t];e.hasOwnProperty("price")&&(Number(e.price)>0||Number(e.price)<0)&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0),window.ymq_option.ymq_option_branding.extra.plan>1&&(e.hasOwnProperty("weight")&&Number(e.weight)>0&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0),e.hasOwnProperty("sku")&&null!=e.sku&&""!=e.sku&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0))})):(i.hasOwnProperty("price")&&(Number(i.price)>0||Number(i.price)<0)&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0),window.ymq_option.ymq_option_branding.extra.plan>1&&(i.hasOwnProperty("weight")&&Number(i.weight)>0&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0),i.hasOwnProperty("sku")&&null!=i.sku&&""!=i.sku&&(window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0))))}))}function e(t,e=""){0==window.ymq_option.hideByNow&&Object.keys(t).forEach((function(t){if(""!=e)var i=window.ymq_option.ymq_option_template[e]["ymq"+t.split("_")[0]].type;else i=window.ymq_option.ymq_option_data["ymq"+t.split("_")[0]].type;[11,17].includes(Number(i))||(window.ymq_option.hideByNow=!0)}))}if("product"==window.ymq_option.page)try{t(window.ymq_option.ymq_option_data),Object.keys(window.ymq_option.ymq_option_template).forEach((function(e){t(window.ymq_option.ymq_option_template[e])})),window.ymq_option.buy_now_new||(e(window.ymq_option.ymq_option_condition),Object.keys(window.ymq_option.ymq_option_template_condition).forEach((function(t){e(window.ymq_option.ymq_option_template_condition[t],t)})))}catch(t){window.ymq_option.plugs=["jedate","colpick","cropper","ymqmodal"]}window.ymqAdmin&&(window.ymq_option.plugs=["jedate","colpick","cropper","ymqmodal"]),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("ajaxcart-modal")||(window.ymq_option.ymq_option_branding.extra["ajaxcart-modal"]=0),window.ymq_option.ymq_option_branding.extra["ajaxcart-modal"]>0&&(window.ymq_option.cancelAjaxCart=!0,ymq_option.ymq_option_branding.extra.options_list_show=ymq_option.ymq_option_branding.extra.options_list_show_old,window.ymq_option.plugs.push("ymqmodal"),window.ymq_option.plugs.push("Ajaxcart")),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("options_list_show")||(window.ymq_option.ymq_option_branding.extra.options_list_show=0),1==window.ymq_option.ymq_option_branding.extra.options_list_show&&window.ymq_option.plugs.push("ymqmodal"),window.ymq_option.plugs.forEach((t=>{switch(t){case"colpick":ymqJq("<link>").attr({rel:"stylesheet",type:"text/css",href:`${window.ymq_option.baseUrl}shopify-colpick.css${window.ymq_option.v}`}).appendTo("head");break;case"jedate":ymqJq("<link>").attr({rel:"stylesheet",type:"text/css",href:`${window.ymq_option.baseUrl}shopify-jedate.css${window.ymq_option.v}`}).appendTo("head");break;case"cropper":ymqJq("<link>").attr({rel:"stylesheet",type:"text/css",href:`${window.ymq_option.baseUrl}shopify-cropper.css${window.ymq_option.v}`}).appendTo("head");break;case"Ajaxcart":ymqJq("<link>").attr({rel:"stylesheet",type:"text/css",href:`${window.ymq_option.baseUrl}shopify-ajaxcart.css${window.ymq_option.v}`}).appendTo("head")}}));try{window.ymq_option.ymq_option_branding.extra.hasOwnProperty("automic-swatch-ajax")&&1==Number(window.ymq_option.ymq_option_branding.extra["automic-swatch-ajax"])&&(""==window.ymq_option.ymq_option_data||ymqJq.isEmptyObject(window.ymq_option.ymq_option_data))&&(window.ymq_option.hideByNow=!1,window.ymq_option.cancelAjaxCart=!1)}catch(t){}function i(t,e=!1){try{window.ymq_option.variant_ajax_array=[],t.length>0?(t.forEach((t=>{var i=new Promise((function(i,n){fetch(`${window.Shopify.routes.root}products/${t}.js`,{method:"GET"}).then((i=>200==i.status?i.json():(1==e&&404==i.status&&window.ymq_option.variant_product_ids_obj.hasOwnProperty(t)&&window.ymq_option.variant_product_ids.push(window.ymq_option.variant_product_ids_obj[t]),""))).then((t=>{i(t)})).catch((t=>{n(t)}))}));window.ymq_option.variant_ajax_array.push(i)})),Promise.all(window.ymq_option.variant_ajax_array).then((t=>{t.forEach((t=>{""!=t&&t.variants.forEach((e=>{e.product_id=t.id,window.ymq_option.variant_json[Number(e.id)]=e}))})),window.ymq_option.variant_product_ids.length>0&&1==e?(!function(t){try{window.ymq_option.variant_ajax_array2=[],t.length>0?(t.forEach((t=>{var e=new Promise((function(e,i){fetch(`/search/suggest.json?&q=id:${t}&resources[type]=product&resources[options]&resources[options][fields]=title,product_type,variants.title`,{method:"GET"}).then((t=>200==t.status?t.json():"")).then((t=>{e(t)})).catch((t=>{i(t)}))}));window.ymq_option.variant_ajax_array2.push(e)})),Promise.all(window.ymq_option.variant_ajax_array2).then((t=>{var e=[];t.forEach((t=>{""!=t&&(t=t.resources.results.products[0],e.push(t.handle))})),i(e)})).catch((t=>{window.ymq_option.variant_json_success=!0}))):window.ymq_option.variant_json_success=!0}catch(t){window.ymq_option.variant_json_success=!0}}(window.ymq_option.variant_product_ids),window.ymq_option.variant_product_ids=[]):window.ymq_option.variant_json_success=!0})).catch((t=>{window.ymq_option.variant_json_success=!0}))):window.ymq_option.variant_json_success=!0}catch(t){window.ymq_option.variant_json_success=!0}}i(window.ymq_option.variant_product_handles,!0)}function ymqGetJsonByKey(t,e){return null==t?e:t}function ymqGetUrlParam(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function ymqOptionIntervalResult(t,e,i,n){"function"==typeof t?(n=e,i=t,e=1e3,t=20):"function"==typeof e&&(n=i,i=e,e=1e3),"function"!=typeof i&&(i=function(){return!1});var a=0,o=setInterval((function(){++a>t||i(a)?clearInterval(o):"function"==typeof n&&n()}),e)}function ymq_do_condition(t,e){window.ymq_option.flexible_condition=!1,window.ymq_option.ymq_option_branding.extra.hasOwnProperty("flexible-condition")&&1==window.ymq_option.ymq_option_branding.extra["flexible-condition"]&&(window.ymq_option.flexible_condition=!0);var i="ymq",n="#option-box-",a="",o="";window.ymqAdmin?(a=`.admin-form-box-${ymq_preview_index} ${n}`,o=`.admin-form-box-${ymq_preview_index} `):a=n;var r="#ymq-attrib-",c="option-box-ymq-variant-",s=".ymq-attrib-item-",m="",l="",d="";for(var p in e)if(t.hasOwnProperty(i+p.split("_")[0])){var u=e[p],y=e[p].options,_=[],h="";for(var q in e)p!=q&&q.substr(0,p.length+1)==p+"_"&&(h+=`changeOption${q}();`);if(2==u.type)if([3,7,20,21].includes(Number(t[i+p.split("_")[0]].type))){var f=ymqJq(`${n+p.split("_")[0]} select option`).index(ymqJq(r+p));ymqJq(`${n+p.split("_")[0]} .ymq-multiple-ul .ymq-multiple-li`).eq(f).data("title",u.disabled_text)}else ymqJq(r+p).next("label").data("title",u.disabled_text);for(var g in y){var v=[],b=[],w=!1,x=y[g],k=y[g].value.split(","),J="";if(k.forEach((function(t){J+=`"${t}",`})),J=J.slice(0,J.length-1),[13,14,15,16].includes(Number(y[g].type))){var $=1e25,O=-1e25;y[g].value.indexOf(",")>-1&&(O=y[g].value.split(",")[0],""!=y[g].value.split(",")[1]&&($=y[g].value.split(",")[1]))}if(y[g].hasOwnProperty("option_type")&&[500,600].includes(Number(y[g].option_type))){var C=".ymq_ymq_ymq_ymq_ymq_ymq_ymq";if(window.ymq_option.ymq_option_branding.extra.hasOwnProperty("variant-original")&&1==Number(window.ymq_option.ymq_option_branding.extra["variant-original"])&&(window.ymq_option.ymq_option_branding.extra.hasOwnProperty("variant-condition-value-class")&&""!=window.ymq_option.ymq_option_branding.extra["variant-condition-value-class"]&&(C=window.ymq_option.ymq_option_branding.extra["variant-condition-value-class"]),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("variant-condition-click-class")&&""!=window.ymq_option.ymq_option_branding.extra["variant-condition-click-class"]&&(w=!0)),w&&b.push(`[name="${c+ymq_remove_special_cha(x.id)}"] ${window.ymq_option.ymq_option_branding.extra["variant-condition-click-class"]}`),window.ymq_option.flexible_condition&&600==Number(y[g].option_type)&&x.id.includes(" || ")){var D=x.id.split(" || "),j=[];D.forEach((function(t){j.push(`${o}[name="${c+ymq_remove_special_cha(t)}"] select,${o}[name="${c+ymq_remove_special_cha(t)}"] input,${o}[name="${c+ymq_remove_special_cha(t)}"] textarea`)})),j=j.join(","),v.push(j)}else v.push(`${o}[name="${c+ymq_remove_special_cha(x.id)}"] select,${o}[name="${c+ymq_remove_special_cha(x.id)}"] input,${o}[name="${c+ymq_remove_special_cha(x.id)}"] textarea`);if(1==y[g].type)if([500].includes(Number(y[g].option_type)))_.push(`([${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" option:not(:disabled):selected").attr('value'))) || [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").attr('value'))) || [${J}].includes(ymq_remove_special_cha(ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).eq(0).text())))`);else if(window.ymq_option.flexible_condition&&x.id.includes(" || ")){D=x.id.split(" || "),j=[];D.forEach((function(t){j.push(`((ymqJq("[name='${c+ymq_remove_special_cha(t)}']").find('textarea').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(t)}']"+" textarea").val()))) || (ymqJq("[name='${c+ymq_remove_special_cha(t)}']").find('input:text').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(t)}']"+" input:text").val()))) || (ymqJq("[name='${c+ymq_remove_special_cha(t)}']").find('select').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(t)}']"+" option:not(:disabled):selected").attr('value')))) || (ymqJq("[name='${c+ymq_remove_special_cha(t)}']").find('input:radio,input:checkbox').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(t)}']"+" input:not(:disabled):checked").attr('value'))))  || [${J}].includes(ymq_remove_special_cha(ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).eq(0).text())))`)})),j="("+(j=j.join(" || "))+")",_.push(j)}else _.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('textarea').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val()))) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:text').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:text").val()))) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" option:not(:disabled):selected").attr('value')))) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && [${J}].includes(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").attr('value'))))  || [${J}].includes(ymq_remove_special_cha(ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).eq(0).text())))`);else 2==y[g].type?[500].includes(Number(y[g].option_type))?_.push(`(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && ([${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" option:not(:disabled):selected").attr('value'))) < 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio').length > 0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").attr('value'))) < 0) || (ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).length >0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).eq(0).text())) < 0))`):_.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('textarea').length > 0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val())) < 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:text').length > 0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:text").val())) < 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" option:not(:disabled):selected").attr('value'))) < 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").attr('value'))) < 0)  || (ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).length >0 && [${J}].indexOf(ymq_remove_special_cha(ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}']  ${C}\`).eq(0).text())) < 0))`):11==y[g].type||18==y[g].type?[500].includes(Number(y[g].option_type))?_.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select").val() == '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").length == 0) || ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}'] ${C}\`).length == 0)`):_.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select").val() == '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").length == 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('textarea').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val() == '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:text').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:text").val() == '')  || ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}'] ${C}\`).length == 0)`):12==y[g].type||17==y[g].type?[500].includes(Number(y[g].option_type))?_.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select").val() != '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").length > 0) || ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}'] ${C}\`).length > 0)`):_.push(`((ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('select').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select").val() != '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:radio,input:checkbox').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checked").length > 0) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('textarea').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val() != '') || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']").find('input:text').length > 0 && ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:text").val() != '')  || ymqJq(\`[name='${c+ymq_remove_special_cha(x.id)}'] ${C}\`).length > 0)`):3==y[g].type?_.push(`(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input,[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val()) ==  '${y[g].value}')`):4==y[g].type?_.push(`(ymq_remove_special_cha(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input,[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea").val()) !=  '${y[g].value}')`):5==y[g].type?_.push(`(ymq_isContained(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected")),[${J}]) || ymq_isContained(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checkbox:checked")),[${J}]))`):6==y[g].type?_.push(`(!ymq_isContained(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected")),[${J}]) && !ymq_isContained(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checkbox:checked")),[${J}]))`):19==y[g].type?_.push(`(ymq_isbelongsTo(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected")),[${J}]) || ymq_isbelongsTo(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checkbox:checked")),[${J}]))`):20==y[g].type?_.push(`(ymq_isbelongsTo(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected")),[${J}],false) || ymq_isbelongsTo(ymq_getCheckboxValue4Value(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input:not(:disabled):checkbox:checked")),[${J}],false))`):21==y[g].type?_.push(`(ymq_getCheckboxitemtextcontain(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected"),${J}) || ymq_getCheckboxitemtextcontain(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='checkbox']:not(:disabled):checked").val(),${J}) || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='radio']:not(:disabled):checked").val()+'').indexOf(${J}) != -1   || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='text']:not(:disabled)").val()+'').indexOf(${J}) != -1  || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='number']:not(:disabled)").val()+'').indexOf(${J}) != -1   || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea:not(:disabled)").val()+'').indexOf(${J}) != -1)`):22==y[g].type&&_.push(`!(ymq_getCheckboxitemtextcontain(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" select option:not(:disabled):selected"),${J}) || ymq_getCheckboxitemtextcontain(ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='checkbox']:not(:disabled):checked").val(),${J})  || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='radio']:not(:disabled):checked").val()+'').indexOf(${J}) != -1   || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='text']:not(:disabled)").val()+'').indexOf(${J}) != -1  || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" input[type='number']:not(:disabled)").val()+'').indexOf(${J}) != -1   || (ymqJq("[name='${c+ymq_remove_special_cha(x.id)}']"+" textarea:not(:disabled)").val()+'').indexOf(${J}) != -1)`)}else i+x.id!="ymq0"&&(1==y[g].type?[3,7,20,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`[${J}].includes(ymqJq("${n+x.id}"+" option:not(:disabled):selected").data('id'))`):[1,2].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`[${J}].includes(ymqJq("${n+x.id}"+" input,${n+x.id}"+" textarea").val())`):_.push(`[${J}].includes(ymqJq("${n+x.id}"+" input:not(:disabled):checked").data('id'))`):2==y[g].type?[3,7,20,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`[${J}].indexOf(ymqJq("${n+x.id}"+" option:not(:disabled):selected").data('id')) < 0`):[1,2].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`[${J}].indexOf(ymqJq("${n+x.id}"+" input,${n+x.id}"+" textarea").val()) < 0`):_.push(`[${J}].indexOf(ymqJq("${n+x.id}"+" input:not(:disabled):checked").data('id')) < 0`):3==y[g].type?_.push(`ymq_remove_special_cha(ymqJq("${n+x.id} input, ${n+x.id} textarea").val()) == '${y[g].value}'`):4==y[g].type?_.push(`ymq_remove_special_cha(ymqJq("${n+x.id} input, ${n+x.id} textarea").val()) != '${y[g].value}'`):5==y[g].type?[7,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymq_isContained(ymq_getCheckboxValue(ymqJq('${n+x.id} select option:not(:disabled):selected')),[${J}])`):_.push(`ymq_isContained(ymq_getCheckboxValue(ymqJq('${n+x.id} input:not(:disabled):checkbox:checked')),[${J}])`):6==y[g].type?[7,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`!ymq_isContained(ymq_getCheckboxValue(ymqJq('${n+x.id} select option:not(:disabled):selected')),[${J}])`):_.push(`!ymq_isContained(ymq_getCheckboxValue(ymqJq('${n+x.id} input:not(:disabled):checkbox:checked')),[${J}])`):7==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) >= ${y[g].value}`):8==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) <= ${y[g].value}`):9==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) > ${y[g].value}`):10==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) < ${y[g].value}`):11==y[g].type||18==y[g].type?[1,9,10,12,14].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" input").val() == ''`):[2].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" textarea").val() == ''`):[3,7,20,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" select").val() == ''`):[4,5,6,8,13,15,16].includes(Number(t[i+x.id.split("_")[0]].type))&&_.push(`ymqJq("${n+x.id}"+" input:not(:disabled):checked").length == 0`):12==y[g].type||17==y[g].type?[1,9,10,12,14].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" input:not(:disabled)").length > 0 && ymqJq("${n+x.id}"+" input").val() != ''`):[2].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" textarea:not(:disabled)").length > 0 && ymqJq("${n+x.id}"+" textarea").val() != ''`):[3,7,20,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymqJq("${n+x.id}"+" select:not(:disabled)").length > 0 && ymqJq("${n+x.id}"+" select").val() != ''`):[4,5,6,8,13,15,16].includes(Number(t[i+x.id.split("_")[0]].type))&&_.push(`ymqJq("${n+x.id}"+" input:not(:disabled):checked").length > 0`):13==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) <= ${$} && Number(ymqJq("${n+x.id}"+" input").val()) >= ${O}`):14==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) < ${$} && Number(ymqJq("${n+x.id}"+" input").val()) > ${O}`):15==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) <= ${$} && Number(ymqJq("${n+x.id}"+" input").val()) > ${O}`):16==y[g].type?_.push(`ymqJq("${n+x.id}"+" input").val() != "" && Number(ymqJq("${n+x.id}"+" input").val()) < ${$} && Number(ymqJq("${n+x.id}"+" input").val()) >= ${O}`):19==y[g].type?[7,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymq_isbelongsTo(ymq_getCheckboxValue(ymqJq('${n+x.id} select option:not(:disabled):selected')),[${J}])`):_.push(`ymq_isbelongsTo(ymq_getCheckboxValue(ymqJq('${n+x.id} input:not(:disabled):checkbox:checked')),[${J}])`):20==y[g].type&&([7,21].includes(Number(t[i+x.id.split("_")[0]].type))?_.push(`ymq_isbelongsTo(ymq_getCheckboxValue(ymqJq('${n+x.id} select option:not(:disabled):selected')),[${J}],false)`):_.push(`ymq_isbelongsTo(ymq_getCheckboxValue(ymqJq('${n+x.id} input:not(:disabled):checkbox:checked')),[${J}],false)`)),v.push(`${a+x.id} select,${a+x.id} input,${a+x.id} textarea`));w&&b.length>0&&(0==Number(ymqGetJsonByKey(window.ymq_option.ymq_option_branding.extra.condition_time,0))?d+=`\n                            ymqJq(document).on('click', '${b.join(",")}', function () {\n                                changeOption${p}();\n                            });\n                        `:d+=`\n                            ymqJq(document).on('click', '${b.join(",")}', function () {\n                                setTimeout(()=>{\n                                    changeOption${p}();\n                                },ymqGetJsonByKey(window.ymq_option.ymq_option_branding.extra.condition_time,0))\n                                \n                            });\n                        `),0==Number(ymqGetJsonByKey(window.ymq_option.ymq_option_branding.extra.condition_time,0))?d+=`\n                        ymqJq(document).on('change', '${v.join(",")}', function () {\n                            changeOption${p}();\n                        });\n                    `:d+=`\n                        ymqJq(document).on('change', '${v.join(",")}', function () {\n                            setTimeout(()=>{\n                                changeOption${p}();\n                            },ymqGetJsonByKey(window.ymq_option.ymq_option_branding.extra.condition_time,0))\n                        });\n                    `}var N="",P="";if(""!=u.children)u.children.split(",").forEach((function(t){N+=`changeOption${t}();`}));if(2==u.type){var S=p.split("_")[0];if([3,7,20,21].includes(Number(t[i+S].type))){var A="";[3,20].includes(Number(t[i+S].type))&&(A=`\n                ymqJq('${n}${p.split("_")[0]} select').val('');\n                `),P+=`\n                if (ymqJq("#ymq-attrib-${S}"+" option:not(:disabled):selected").data('id') == '${p}') {\n                    ymqJq('${r}${p}').prop("selected",false);\n                    ${A}\n                }\n            `}}if(m="",Q(u),1==ymqGetJsonByKey(window.ymq_option.ymq_option_branding.extra.simple_condition,0)&&(N="",m=""),1==u.show)var E="show",V="false",I="hide",Y="true",T=m,M="",B="",H=P,L=`ymqJq('${n}${p} .ymq_disabled_class').prop('disabled',true);`+h,F="";else I="show",Y="false",E="hide",V="true",T="",M=m,B=P,H="",L="",F=`ymqJq('${n}${p} .ymq_disabled_class').prop('disabled',true);`+h;var R="",W="";window.ymq_option.ymq_option_branding.extra.hasOwnProperty("condition-is-hide")&&1==Number(window.ymq_option.ymq_option_branding.extra["condition-is-hide"])&&(R=`ymqJq('${s}${p}').${E}();`,W=`ymqJq('${s}${p}').${I}();`),"1"==u.type?l+=`\n            function changeOption${p}(){\n                if(${_.join(` ${u.andor} `)}){\n                    ymqJq('${n}${p}').${E}();\n                    ymqJq('${n}${p} input,${n}${p} select,${n}${p} option,${n}${p} textarea').prop('disabled',${V});\n                    ${B}\n                    ${L}\n                }else{\n                    ymqJq('${n}${p}').${I}();\n                    ymqJq('${n}${p} input,${n}${p} select,${n}${p} option,${n}${p} textarea').prop('disabled',${Y}); \n                    ${H}\n                    ${F}\n                }\n                //,qty_input\n                ymq_trigger_option_value_qty(ymqJq('${n}${p}'));\n                \n                ymqJq('${n}${p} select').dropdown();\n                ${N}\n            }\n            changeOption${p}();\n        `:"2"==u.type&&(l+=`\n            function changeOption${p}(){\n                if(!ymqJq("${n+p.split("_")[0]}").is(":hidden")){\n                    if(${_.join(` ${u.andor} `)}){\n                        ${R}\n                        ymqJq('${r}${p}')${"andrew-361.myshopify.com"==window.ymq_option.shop?"":".not('.ymq_sold_out')"}.prop('disabled',${V}).attr('condition-disabled',${V});\n                        ${M}\n                        ${B}\n                    }else{\n                        ${W}\n                        ymqJq('${r}${p}')${"andrew-361.myshopify.com"==window.ymq_option.shop?"":".not('.ymq_sold_out')"}.prop('disabled',${Y}).attr('condition-disabled',${Y});\n                        ${T}\n                        ${H}\n                    }\n                    //selectdisableoptionbug\n                    if(ymqJq('${r}${p}').prop('disabled') && ymqJq('${r}${p}').get(0).tagName == 'OPTION'){\n                        ymqJq('${r}${p}').prop('selected',false);\n                    }\n                    //,qty_input\n                    var dom = ymqJq('${r}${p}').parents('.ymq-options-box');\n                    if(dom.hasClass('ymq-options-qty-box')){\n                        if(ymqJq('${r}${p}').get(0).tagName == 'OPTION'){\n                            dom.find('.ymq-qty-input').attr('disabled',true);\n                            ymqJq('${r}${p}').parent().find('option:selected:not(:disabled)').each(function(){\n                                var id = ymqJq(this).data('id');\n                                if(id){\n                                    ymqJq('.ymq-qty-input-'+id).attr('disabled',false);\n                                }\n                            })\n                        }else{\n                            if(ymqJq('${r}${p}').attr('type') == 'radio'){\n                                dom.find('.ymq-qty-input').attr("disabled",true);\n                            }\n                            var id = ymqJq('${r}${p}').data('id');\n                            if(ymqJq('${r}${p}').prop('checked') && !ymqJq('${r}${p}').prop("disabled")){\n                                ymqJq('.ymq-qty-input-'+id).attr("disabled",false);\n                            }else{\n                                ymqJq('.ymq-qty-input-'+id).attr("disabled",true);\n                            }\n                        }\n                    }\n                    ${N}\n                    ymqJq('${n}${p.split("_")[0]} select').dropdown();\n                }\n            }\n            changeOption${p}();\n        `)}return{function_text:l,conditionsScript:d};function Q(t){t&&""!=t.children&&t.children.split(",").forEach((function(i){1==t.type?m+=`\n                    ymqJq('${n}${i}').hide();\n                    ymqJq('${n}${i} input,${n}${i} select,${n}${i} textarea').prop('disabled',true);  \n                `:t.type,e.hasOwnProperty(i)&&Q(e[i])}))}}function ymq_isbelongsTo(t,e,i=!0){if(t.length<1)return!1;var n=!0;try{t.forEach((function(t){if(!e.includes(t))throw n=!1,new Error("LoopTerminates")}))}catch(t){if("LoopTerminates"!==t.message)throw t}return i?n:!n}function ymq_isContained(t,e){return e.every((e=>t.includes(e)))}function ymq_getCheckboxValue(t){var e=[];return t.each((function(){e.push(ymqJq(this).data("id"))})),e}function ymq_getCheckboxitemtextcontain(t,e){var i=!1;return null!=t&&t.each((function(){(ymqJq(this).attr("value")+"").includes(e)&&(i=!0)})),i}function ymq_getCheckboxValue4Value(t){var e=[];return t.each((function(){e.push(ymqJq(this).attr("value"))})),e}function ymq_undefined_2_kong(t){return null==t?"":t}function ymq_remove_special_cha(t){return"string"==typeof(t=ymq_remove_special_chafan(t))&&(t=(t=(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")).trim()),t}function ymq_remove_special_chafan(t){return"string"==typeof t&&(t=(t=(t=(t=(t=t.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")),t}function ymq_trigger_option_value_qty(t){try{if(t.hasClass("ymq-options-qty-box")){var e=Number(t.data("type"));t.find(".ymq-qty-input").attr("disabled",!0),[3,7,20,21].includes(e)?t.find("option:selected:not(:disabled)").each((function(){var t=ymqJq(this).data("id");t&&ymqJq(".ymq-qty-input-"+t).attr("disabled",!1)})):t.find('input[type="radio"],input[type="checkbox"]').each((function(){var t=ymqJq(this).data("id");ymqJq(this).prop("checked")&&!ymqJq(this).prop("disabled")?ymqJq(".ymq-qty-input-"+t).attr("disabled",!1):ymqJq(".ymq-qty-input-"+t).attr("disabled",!0)}))}}catch(t){}}window.ymqAdmin=window.ymqAdmin||!1,window.ymqOptionsAppStatus=!0,window.ymq_option.option_function=function(){function justTools(t,e){this.elem=t,this.set=e}ymqJq.fn.dropdown=function(t){t=ymqJq.extend({variantChange:function(t){}},t);this.each((function(){var e=ymqJq(this);if(e.hasClass("ymq-no-strong-drop-down"))return!1;var i={},n={},a={},o=e.hasClass("ymq-shopify-option");if(e.hasClass("ymq-inited")){var r=e.hasClass("ymq-multiple"),c=e.parents(".selectDropdown"),s=e.next().next();d(e.parent().attr("class"))}else{r=e.hasClass("ymq-multiple");var m=ymqJq("<div />").addClass("ymq-dropdown selectDropdown "+(r?"multiple":""));e.wrap(m);s=ymqJq("<span />").text(ymqJq(this).attr("placeholder")).insertAfter(ymqJq(this));var l=ymqJq('<ul class="ymq-multiple-ul"></ul>');e.find("option").each((function(t){var e="";"undefined"!=ymqJq(this).data("ymq_dropdown_img")&&(e=ymqJq(this).data("ymq_dropdown_img")),l.append(ymqJq(`<li data-index="${t}" data-title="${ymqJq(this).data("title")}" class="ymq-multiple-li ${ymqJq(this).prop("disabled")?"disabled":""} ${ymqJq(this).prop("selected")?"active":""}">${e}</li>`).append(ymqJq("<a />").html(ymqJq(this).html())))})),l.insertAfter(ymqJq(this));c=e.parents(".selectDropdown");d(),e.addClass("ymq-inited"),e.next().next().on("click touch",(function(t){var i=!1;return e.parent().hasClass("open")&&(i=!0),ymqJq(".ymq-dropdown").removeClass("open"),i||e.parent().addClass("open"),t.preventDefault(),!1})),c.find("ul li a").on("click touch",(function(i){var n=ymqJq(this);if(n.parent("li").hasClass("disabled"))return i.preventDefault(),!1;var a=ymqJq(this).parents(".selectDropdown"),r=a.find(".ymq-dropdown"),c=e.hasClass("ymq-multiple"),s=ymqJq(this).parent().hasClass("active"),m=ymqJq(this).parent().data("index");return c?(n.parents(".ymq-multiple-li").toggleClass("active"),e.find("option").eq(n.parents(".ymq-multiple-li").data("index")).prop("selected",n.parents(".ymq-multiple-li").hasClass("active")),d()):(s&&!o?a.find("option").prop("selected",!1):(a.find("option").prop("selected",!1),a.find("option").eq(m).prop("selected",!0)),d()),r.trigger("change"),t.variantChange(e),c?(i.preventDefault(),!1):void 0}))}function d(t=""){!function(){i={},n={},a={};try{var t=e.find("option:selected").length;0==r&&t>1&&e.find("option:selected").each((function(e){e+1!=t&&ymqJq(this).prop("selected",!1)}))}catch(t){}e.find("option").each((function(t){ymqJq(this).prop("selected")&&!ymqJq(this).prop("disabled")&&(i[t]={value:ymqJq(this).val(),text:ymqJq(this).html()}),ymqJq(this).prop("disabled")&&(n[t]={value:ymqJq(this).val(),text:ymqJq(this).html()}),"none"==ymqJq(this).css("display")&&(a[t]={value:ymqJq(this).val(),text:ymqJq(this).html()})}))}();var o="";c.find(".ymq-multiple-li").removeClass("active").removeClass("disabled").show(),Object.keys(i).forEach((function(t){var e=i[t];r?o+=`<span class="ymq-multiple-item-box"><span class="ymq-multiple-item"><span class="ymq-multiple-text">${e.text}</span> <span data-index="${t}" class="ymq-multiple-remove"></span></span></span></span>`:o=e.text,c.find(".ymq-multiple-li").eq(t).addClass("active")})),Object.keys(n).forEach((function(t){n[t];c.find(".ymq-multiple-li").eq(t).addClass("disabled")})),Object.keys(a).forEach((function(t){a[t];c.find(".ymq-multiple-li").eq(t).hide()})),""==o&&(o=e.attr("placeholder")),s.html(o),c.find(".ymq-multiple-remove").on("click touch",(function(t){return e.find("option").eq(ymqJq(this).data("index")).prop("selected",!1),e.trigger("change"),d(),t.preventDefault(),!1}))}}))},window.ymq_option.ymq_option_branding.extra.hasOwnProperty("close-dropdown")&&0==window.ymq_option.ymq_option_branding.extra["close-dropdown"]?ymqJq(document).on("click touch",".ymq-multiple-li",(function(t){ymqJq(".ymq-dropdown").removeClass("open")})):ymqJq(document).on("click touch",(function(t){ymqJq(".ymq-dropdown").removeClass("open")})),justTools.prototype={addAnimation:function(){switch(this.set.animation){case"none":break;case"fadeIn":this.obj.addClass("animated fadeIn");break;case"flipIn":switch(this.set.gravity){case"top":this.obj.addClass("animated flipInTop");break;case"bottom":this.obj.addClass("animated flipInBottom");break;case"left":this.obj.addClass("animated flipInLeft");break;case"right":this.obj.addClass("animated flipInRight")}break;case"moveInLeft":this.obj.addClass("animated moveLeft");break;case"moveInTop":this.obj.addClass("animated moveTop");break;case"moveInBottom":this.obj.addClass("animated moveBottom");break;case"moveInRight":this.obj.addClass("animated moveRight")}},close:function(){this.obj.remove(),this.elem.removeAttr("just-open")},setPosition:function(){if(""!=this.set.contents){var t={},e={x:this.elem.offset().left,y:this.elem.offset().top},i={w:this.elem.outerWidth(),h:this.elem.outerHeight()},n=e.x+i.w/2+this.obj.outerWidth()/2,a=e.x+i.w/2-this.obj.outerWidth()/2;switch(this.set.gravity){case"top":n>ymqJq(window).width()?(t={x:e.x+i.w-this.obj.outerWidth(),y:e.y-this.obj.outerHeight()-this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",this.obj.outerWidth()-i.w/2+"px")):a<0?(t={x:e.x,y:e.y-this.obj.outerHeight()-this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",i.w/2+"px")):t={x:e.x-(this.obj.outerWidth()-i.w)/2,y:e.y-this.obj.outerHeight()-this.set.distance};break;case"bottom":n>ymqJq(window).width()?(t={x:e.x+i.w-this.obj.outerWidth(),y:e.y+i.h+this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",this.obj.outerWidth()-i.w/2+"px")):a<0?(t={x:e.x,y:e.y+i.h+this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",i.w/2+"px")):t={x:e.x-(this.obj.outerWidth()-i.w)/2,y:e.y+i.h+this.set.distance};break;case"left":t={x:e.x-this.obj.outerWidth()-this.set.distance,y:e.y-(this.obj.outerHeight()-i.h)/2};break;case"right":t={x:e.x+i.w+this.set.distance,y:e.y-(this.obj.outerHeight()-i.h)/2}}this.obj.css({left:t.x+"px",top:t.y+"px"})}},setEvent:function(){var t=this;"click"!=t.set.events&&"onclick"!=t.set.events||t.obj.one("click",(function(t){})),"mouseover"!=t.set.events&&"onmouseover"!=t.set.events&&"mouseenter"!=t.set.events||this.elem.one("mouseout, mouseleave",(function(){t.close()})).one("click",(function(t){}))},setConfirmEvents:function(){var t=this,e=this.obj.find(".just-yes"),i=this.obj.find(".just-no");e.click((function(){1==t.set.onYes(t)&&t.close()})),i.click((function(){t.close(),t.set.onNo(t)}))},addConfirm:function(){this.obj.append("<div class='just-confirm'><button type='button' class='just-yes'>"+this.set.yes+"</button><button type='button' class='just-no'>"+this.set.no+"</button></div>"),this.setConfirmEvents()},setContent:function(){""!=this.set.contents&&(this.obj=ymqJq("<div class='just-tooltip "+this.set.theme+"'style='width:"+this.set.width+"'><div class='just-con'>"+this.set.contents+"</div><span class='just-"+this.set.gravity+"'></span></div>"),1==this.set.confirm&&this.addConfirm(),ymqJq("body").append(this.obj),this.setEvent(),this.addAnimation())},getEvent:function(){var t=this.getEvent.caller;if("input"==window.event)return this.set.new_events;if(window.event)return window.event;for(;null!=t;){var e=t.arguments[0];if(e&&(e.constructor==Event||e.constructor==MouseEvent||"object"==typeof e&&e.preventDefault&&e.stopPropagation))return e;t=t.caller}return null},destroy:function(){ymqJq("div[just-open]").removeAttr("just-open"),ymqJq(".just-tooltip").remove()},init:function(){var t=this,e=t.getEvent();t.set.events=e.type,e.preventDefault(),e.stopPropagation(),$document=ymqJq(document),"click"!=t.set.events&&"onclick"!=t.set.events||(t.destroy(),$document.one("click",(function(e){t.destroy()}))),t.setContent(),ymqJq(".just-tooltip").hide(),setTimeout((()=>{ymqJq(".just-tooltip").show(),t.setPosition()}),20),$document.one("resize",(function(){t.setPosition()}));try{ymqOptionIntervalResult(1e6,20,(function(){return!(ymqJq(".just-tooltip").length>0)||(t.setPosition(),!1)}))}catch(e){console.log(e)}}},ymqJq.fn.justToolsTip=function(t){if(!this.attr("just-open")){this.attr("just-open","show");var e={id:(new Date).getTime(),height:"auto",width:"auto",contents:"",gravity:"top",theme:"",distance:10,animation:"none",confirm:!1,yes:"",no:"",onYes:function(){},onNo:function(){}};this.each((function(i){t=ymqJq.extend(e,t),new justTools(ymqJq(this),t).init()}))}},ymqJq(document).on("click","[data-ymq-id]",(function(t){t.preventDefault();var e=ymqJq(this).attr("data-ymq-id");ymqJq("#"+e).ymq(ymqJq(this).data())})),ymqJq.fn.ymq=function(t){t=ymqJq.extend({},{animation:"fade",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-ymq-modal"},t);return this.each((function(){var e=ymqJq(this),i=parseInt(e.css("top")),n=e.height()+i,a=!1,o=ymqJq(".ymq-modal-bg");0==o.length&&(o=ymqJq('<div class="ymq-modal-bg" />').insertAfter(e)),e.bind("ymq:open",(function(){if(o.unbind("click.modalEvent"),ymqJq("."+t.dismissmodalclass).unbind("click.modalEvent"),!a){if(c(),"fadeAndPop"==t.animation&&(e.css({top:ymqJq(document).scrollTop()-n,opacity:0,visibility:"visible"}),o.fadeIn(t.animationspeed/2),e.delay(t.animationspeed/2).animate({top:ymqJq(document).scrollTop()+i+"px",opacity:1},t.animationspeed,r())),"fade"==t.animation){if(e.height()+100>ymqJq(window).height())var s=50;else if(e.height()>300)s=(ymqJq(window).height()-e.height())/2;else s=150;e.css({opacity:0,visibility:"visible",top:s,width:e.data("width"),"margin-left":-Number(e.data("width"))/2}),o.fadeIn(t.animationspeed/2),e.delay(t.animationspeed/2).animate({opacity:1},t.animationspeed,r())}"none"==t.animation&&(e.css({visibility:"visible",top:ymqJq(document).scrollTop()+i}),o.css({display:"block"}),r())}e.unbind("ymq:open")})),e.bind("ymq:close",(function(){a||(c(),"fadeAndPop"==t.animation&&(o.delay(t.animationspeed).fadeOut(t.animationspeed),e.animate({top:ymqJq(document).scrollTop()-n+"px",opacity:0},t.animationspeed/2,(function(){e.css({top:i,opacity:1,visibility:"hidden"}),r()}))),"fade"==t.animation&&(o.delay(t.animationspeed).fadeOut(t.animationspeed),e.animate({opacity:0},t.animationspeed,(function(){e.css({opacity:1,visibility:"hidden",top:i}),r()}))),"none"==t.animation&&(e.css({visibility:"hidden",top:i}),o.css({display:"none"}))),e.unbind("ymq:close")})),e.trigger("ymq:open");ymqJq("."+t.dismissmodalclass).bind("click.modalEvent",(function(){e.trigger("ymq:close")}));function r(){a=!1}function c(){a=!0}t.closeonbackgroundclick&&(o.css({cursor:"pointer"}),o.bind("click.modalEvent",(function(){e.trigger("ymq:close")}))),ymqJq("body").keyup((function(t){27===t.which&&e.trigger("ymq:close")}))}))};let Cart=class t{constructor(){var t=this;this.instance=null,t.initConfig(),pushLocalStorage("cart","ymq-code"),1==t.config.util.getValue(t.config.ymq_option_branding.extra,"cart-page-show",1)&&(pushLocalStorage("init","ymq-code"),this.init())}initConfig(){var t=this;t.config=Config.getInstance("cartInstance",t),t.config.money_format=window.ymq_option.ymq_option_branding.lan.currency,t.config.shop=window.ymq_option.shop,t.config.token=window.ymq_option.token,t.config.timestamp=window.ymq_option.timestamp,t.config.customer_id=window.ymq_option.customer_id,t.config.ymq_option_settings=window.ymq_option.ymq_option_settings,t.config.ymq_option_branding=window.ymq_option.ymq_option_branding,t.config.addedCartEvent=!0,t.config.show_discount=!1,t.config.start_checkout=!1,t.config.add_variant_json={},t.config.ymq_checkout=!1,t.config.children_items=[],t.checkout_element=null,t.release_checkout=!1,t.config.bind_variant_need_checkout=!0,0==this.config.util.getValue(this.config.ymq_option_branding.extra,"bind_variant_need_checkout",1)&&(t.config.bind_variant_need_checkout=!1);try{ZapietEvent.listen("selected_method",(function(t){window.ZapietSelectedMethod=t}))}catch(t){}if(ymqJq('form[action="/cart"]').length>=1)t.config.cart_form_class='form[action="/cart"]';else if(ymqJq('form[action$="/cart"]').length>=1){var e=ymqJq('form[action$="/cart"]').attr("action");t.config.cart_form_class=`form[action="${e}"]`}else t.config.cart_form_class='form[action="/checkout"]'}listenCustomer(t){var e=this;try{ymqJq("#ymq-log").length>0&&(ymqJq('[name="attributes[ymq log]"]').each((function(){var e=ymqJq(this).val();e+=`--${t}`,ymqJq(this).val(e)})),e.getAttributes(),e.config.checkoutAjaxData.note_attributes=e.config.note_attributes)}catch(t){}}initMemberVariables(){this.cartJson=window.ymq_option.cart,this.moneyDom=".ymq-money",this.automaticDiscount={},this.hasAutomaticDiscount=!1,this.cartPriceClass=["ymq_cart_items_subtotal_price","ymq_cart_original_total_price","ymq_cart_total_price"],this.cartDiscountPriceClass=["ymq_cart_total_discount"],this.config.addPrice={},this.config.onetimetag=` ( ${this.config.util.getValue(this.config.ymq_option_branding.lan,"one-time-tag","one time")} )`,this.penny_variant=this.config.util.getValue(this.config.ymq_option_branding.extra,"penny-variant",""),this.ajaxDdata={variant_id:{},customer_id:"",total_price:"",item_count:this.cartJson.item_count},this.total_add_price=0,this.cartPriceClassShopifyCartJsonData={},this.itemPriceClass=["ymq_item_price","ymq_item_final_price","ymq_item_original_price"],this.otherItemPriceClass=["ymq_item_other_price"],this.itemPriceClassShopifyCartJsonData={},this.itemLinePriceClass=["ymq_item_line_price","ymq_item_final_line_price","ymq_item_original_line_price"],this.otherItemLinePriceClass=["ymq_item_line_other_price"],this.itemLinePriceClassShopifyCartJsonData={},this.discountCode="",this.itemAddPrice={},this.itemAddLinePrice={},this.itemAddOriginalPrice={},this.itemAddOriginalLinePrice={},this.itemDiscountLinePrice={},this.needUpdateQty=[],this.prefix_url="https://option.ymq.cool/api/",this.suffix_url="qty",this.replace_attr="ymq-option-replace",this.event_add_attr="ymq-option-event-add",this.time1="",this.time2="",this.time3=""}getDiscounts(){var t=this;try{fetch("/cart.js",{method:"GET"}).then((t=>t.json())).then((e=>{t.replaceDomPrice(e)}))}catch(t){}}getAutomaticDiscount(t=null){var e=this;if(e.hasAutomaticDiscount=!1,e.discounts={},t&&(e.cartJson=t),e.automaticDiscount={},!ymqJq.isEmptyObject(e.cartJson.cart_level_discount_applications)&&Array.isArray(e.cartJson.cart_level_discount_applications)&&e.cartJson.cart_level_discount_applications.length>0){e.automaticDiscount={type:1,percentage:[],fixed_amount:[]};var i=[];e.cartJson.cart_level_discount_applications.forEach((t=>{t.hasOwnProperty("discount_application")&&(t=t.discount_application);var n={title:t.title,value:t.value,value_type:t.value_type},a=JSON.stringify(n);i.includes(a)||(i.push(a),e.automaticDiscount[t.value_type].push(n),e.hasAutomaticDiscount=!0)}))}e.cartJson.items.forEach((function(t){try{if(!ymqJq.isEmptyObject(t.line_level_discount_allocations)&&Array.isArray(t.line_level_discount_allocations)&&t.line_level_discount_allocations.length>0){var i=t.line_level_discount_allocations[0];i.hasOwnProperty("discount_application")&&(i=i.discount_application),e.hasAutomaticDiscount=!0}}catch(t){}try{t.line_level_discount_allocations.forEach((t=>{t.hasOwnProperty("discount_application")&&(t=t.discount_application),"discount_code"==t.type&&(e.discounts[t.title]={target_type:"product",type:t.type,title:t.title,value:t.value,value_type:t.value_type})}))}catch(t){}}));try{e.cartJson.cart_level_discount_applications.forEach((t=>{t.hasOwnProperty("discount_application")&&(t=t.discount_application),"discount_code"==t.type&&(e.discounts[t.title]={target_type:"order",type:t.type,title:t.title,value:t.value,value_type:t.value_type})}))}catch(t){}var n=Object.keys(e.discounts);return n.length>0?ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").show();var t="";e.cartTotalDiscount>0&&(t=`-${e.config.formatMoney(e.cartTotalDiscount/100)}`),ymqJq(this).find(".ymq-discount-success-code").html(`${n[0]} ${t}`)})):ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").hide(),ymqJq(this).find(".ymq-discount-success-code").html("")})),1==e.config.util.getValue(e.config.ymq_option_branding.extra,"discount",0)&&(e.config.show_discount=!0),e}init(){var t=this;t.initMemberVariables(),t.listenCustomer("Cart init");try{t.removeHideVariant().validateExtarVariant(),t.doHook("before_init_cart").doHook("replaceDomPrice_b").replaceDomPrice().doHook("replaceDomPrice_a"),t.getDiscounts(),t.hideActionDom(this.cartJson).cancelBestAppCheckout().ininAjaxcart().buildStyle().hidePaymentButton().buildDiscountDom().registerDiscountCodeEvent().doCheckout().registerQuantityChangeEvent()}catch(t){}pushLocalStorage("new_checkout","ymq-code"),t.new_checkout(!0)}hideActionDom(t){var e=this;e.config.children_items=[];try{var i=e.config.util.getValue(e.config.ymq_option_branding.extra,"child-item-action","");""!=i&&(ymqJq(".ymq-item-action-hide").removeClass("ymq-item-action-hide"),t.items.forEach((function(t,i){t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&t.properties.hasOwnProperty("_YmqChidrenId")&&e.config.children_items.push(i)})),e.config.children_items.forEach((t=>{try{var e=i.replace(/ymq1/g,t);setTimeout((()=>{ymqJq(e).addClass("ymq-item-action-hide")}),500),ymqJq(e).addClass("ymq-item-action-hide")}catch(t){}})))}catch(t){}return e}cancelBestAppCheckout(){return!this.config.addedCartEvent&&window.bcpo&&ymqOptionIntervalResult(1e6,100,(function(){return"function"==typeof window.bcpo.addCartEvent&&(window.bcpo.cart=null,!0)})),this}getValidateExtarVariantData(t,e=null){var i=this,n={},a=[];if(i.config.update_input={},!t.hasOwnProperty("items"))return[n,a];if(t.items.length>0){var o={},r={};t.items.forEach(((t,i)=>{if(t.properties.hasOwnProperty("_YmqParentId")){var n=t.properties._YmqParentId;o.hasOwnProperty(n)||(o[n]={data:[],uuid:n,id:t.id,qty:0,variant_ids:"",variant_ids_one_time:""}),t.properties.hasOwnProperty("_YmqEVariantIds")&&(o[n].variant_ids=t.properties._YmqEVariantIds),t.properties.hasOwnProperty("_YmqEVariantIdsOneTime")&&(o[n].variant_ids_one_time=t.properties._YmqEVariantIdsOneTime),null!=e&&e.hasOwnProperty(i)?(o[n].data.push({key:t.key,qty:e[i]}),o[n].qty+=Number(e[i])):(o[n].data.push({key:t.key,qty:t.quantity}),o[n].qty+=Number(t.quantity))}if(t.properties.hasOwnProperty("_YmqChidrenId")){n=t.properties._YmqChidrenId;var a="variants";r.hasOwnProperty(n)||(r[n]={variants:{},variants_one_time:{}}),t.properties.hasOwnProperty("_YmqOneTime")&&(a="variants_one_time"),r[n][a].hasOwnProperty(t.id)||(r[n][a][t.id]={data:[],qty:0}),r[n][a][t.id].data.push({key:t.key,qty:t.quantity,index:i}),r[n][a][t.id].qty+=Number(t.quantity)}})),Object.keys(o).forEach((t=>{o[t].variants={},o[t].variants_one_time={},""!=o[t].variant_ids&&o[t].variant_ids.split(",").forEach((e=>{var[n,a]=i.config.util.getVariantIdAndQty(e,o[t].qty);o[t].variants.hasOwnProperty(n)?o[t].variants[n]+=a:o[t].variants[n]=a})),""!=o[t].variant_ids_one_time&&o[t].variant_ids_one_time.split(",").forEach((e=>{var[n,a]=i.config.util.getVariantIdAndQty(e);o[t].variants_one_time.hasOwnProperty(n)?o[t].variants_one_time[n]+=a:o[t].variants_one_time[n]=a}))})),Object.keys(r).forEach((t=>{o.hasOwnProperty(t)?(Object.keys(r[t].variants).forEach((e=>{if(o[t].variants.hasOwnProperty(e)){var a=Number(o[t].variants[e]);if(r[t].variants.hasOwnProperty(e)){var c=r[t].variants[e];if(a>(m=Number(c.qty))&&(n[c.data[0].key]=a,i.config.update_input[c.data[0].index]=a),a<m){var s=m-a;c.data.some((t=>{s>=t.qty?(n[t.key]=0,i.config.update_input[t.index]=0,s-=t.qty):(n[t.key]=t.qty-s,i.config.update_input[t.index]=t.qty-s)}))}}}else r[t].variants.hasOwnProperty(e)&&r[t].variants[e].data.forEach((t=>{n[t.key]=0,i.config.update_input[t.index]=0}));if(o[t].variants_one_time.hasOwnProperty(e)){a=Number(o[t].variants_one_time[e]);if(r[t].variants_one_time.hasOwnProperty(e)){var m;c=r[t].variants_one_time[e];if(a>(m=Number(c.qty))&&(n[c.data[0].key]=a,i.config.update_input[c.data[0].index]=a),a<m){s=m-a;c.data.some((t=>{s>=t.qty?(n[t.key]=0,i.config.update_input[t.index]=0,s-=t.qty):(n[t.key]=t.qty-s,i.config.update_input[t.index]=t.qty-s)}))}}}else r[t].variants_one_time.hasOwnProperty(e)&&r[t].variants_one_time[e].data.forEach((t=>{n[t.key]=0,i.config.update_input[t.index]=0}))})),Object.keys(o[t].variants).forEach((e=>{r[t].variants.hasOwnProperty(e)||a.push({quantity:o[t].variants[e],id:e,properties:{_YmqChidrenId:t}})})),Object.keys(o[t].variants_one_time).forEach((e=>{r[t].variants_one_time.hasOwnProperty(e)||a.push({quantity:o[t].variants_one_time[e],id:e,properties:{_YmqChidrenId:t,_YmqOneTime:1}})}))):(Object.keys(r[t].variants).forEach((e=>{r[t].variants[e].data.forEach((t=>{n[t.key]=0,i.config.update_input[t.index]=0}))})),Object.keys(r[t].variants_one_time).forEach((e=>{r[t].variants_one_time[e].data.forEach((t=>{n[t.key]=0,i.config.update_input[t.index]=0}))})))})),Object.keys(o).forEach((t=>{r.hasOwnProperty(t)||(Object.keys(o[t].variants).forEach((e=>{a.push({quantity:o[t].variants[e],id:e,properties:{_YmqChidrenId:t}})})),Object.keys(o[t].variants_one_time).forEach((e=>{a.push({quantity:o[t].variants_one_time[e],id:e,properties:{_YmqChidrenId:t,_YmqOneTime:1}})})))}))}return[n,a]}doValidateExtarVariant(t){var e=!0,[i,n]=this.getValidateExtarVariantData(t);try{e=null==ymqCart.slid.activeId}catch(t){}function a(t=!1){ymqJq.isEmptyObject(i)?t&&e&&location.reload():setTimeout((()=>{ymqJq.post({url:"/cart/update.js",dataType:"json"},{updates:i}).done((function(t){e&&location.reload()})).fail((function(){t&&e&&location.reload()}))}),100)}n.length>0?ymqJq.post({url:"/cart/add.js?_easygift_form_payload=true",dataType:"json"},{items:n}).done((function(t){a(!0)})).fail((function(){a()})):a()}validateExtarVariant(){var t,e=this;try{fetch("/cart.js",{method:"GET"}).then((t=>t.json())).then((t=>{e.doValidateExtarVariant(t)}))}catch(t){}return t=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){try{this.addEventListener("load",(function(){if(!ymq_option.cancel_isten&&-1==this.responseURL.search("ymq-no-listen")&&(-1!=this.responseURL.search("cart/update")||-1!=this.responseURL.search("cart/change")||-1!=this.responseURL.search("cart.js")))try{e.config.into_ajax_validate&&("json"==this.responseType?(e.hideActionDom(this.response),e.doValidateExtarVariant(this.response)):(e.hideActionDom(JSON.parse(this.responseText)),e.doValidateExtarVariant(JSON.parse(this.responseText))))}catch(t){}if(-1!=this.responseURL.search("cart/add")){ymq_option.cancel_isten&&(ymq_option.cancel_isten=!1);try{if("json"==this.responseType)var t=this.response;else t=JSON.parse(this.responseText);if(window.ymq_option.theme_ajax_cart&&"product"==window.ymq_option.page){try{e.ajaxCartNeedDoCheckout(t).hidePaymentButton().doCheckout()}catch(t){}try{e.new_checkout()}catch(t){}}"product"==window.ymq_option.page&&e.ajaxCartNeedResetQty(t,window.ymq_option.product.id)}catch(t){}}})),t.apply(this,arguments)}catch(t){console.error(t)}},function(t,i){"function"==typeof i&&(t.fetch=function(){const t=i.apply(this,arguments);return t.then((t=>{if(!ymq_option.cancel_isten)try{-1!=t.url.search("ymq-no-listen")||-1==t.url.search("cart/update")&&-1==t.url.search("cart/change")&&-1==t.url.search("cart.js")||e.config.into_ajax_validate&&t.clone().json().then((t=>{e.hideActionDom(t),e.doValidateExtarVariant(t)}))}catch(t){}try{-1!=t.url.search("cart/add")&&(ymq_option.cancel_isten&&(ymq_option.cancel_isten=!1),window.ymq_option.theme_ajax_cart&&"product"==window.ymq_option.page&&t.clone().json().then((t=>{try{e.ajaxCartNeedDoCheckout(t).hidePaymentButton().doCheckout()}catch(t){}try{e.new_checkout()}catch(t){}})),"product"==window.ymq_option.page&&t.clone().json().then((t=>{e.ajaxCartNeedResetQty(t,window.ymq_option.product.id)})))}catch(t){console.log(t)}})),t})}(window,window.fetch),e}doRemoveHideVariant(){var t=this;ymqJq.get({url:`/cart.js?timestamp=${Date.now()}`,dataType:"json",async:!1}).done((function(e){var i=t.config.util.getUpdateArray(e),n=i.updates;if(0==i.need_update)return t.config.util.changeUri("ycoback"),!1;ymqJq.post({url:"/cart/update.js",dataType:"json"},{updates:n}).done((function(e){t.config.util.changeUri("ycoback")})).fail((function(){t.config.util.changeUri("ycoback")}))})).fail((function(){}))}removeHideVariant(){var t=this;return t.config.util.getUrlParam("ycoback")&&t.doRemoveHideVariant(),t}ininAjaxcart(){var t=this;if(t.config.util.getValue(t.config.ymq_option_branding.extra,"ajaxcart-modal","0")>0)try{t.ajaxcart=window.ymq_option.Ajaxcart.getInstance("cart",t).init()}catch(t){}return t}doHook(t){return this.config.ymqHook(t),this}ajaxCartNeedResetQty(t,e){var i=this;setTimeout((()=>{if(window.ymq_option.min_max_new){t=t.hasOwnProperty("items")?t.items:[t];var n=i.config.productInstance.getQuantity();t.forEach((t=>{t.product_id==e&&(window.ymq_option.product_qty_in_cart=window.ymq_option.product_qty_in_cart+n)})),i.config.setMinMax({min:i.config.min_quantity,max:i.config.max_quantity},!1,!0),!isNaN(i.config.min_quantity)&&n<i.config.min_quantity&&(n=i.config.min_quantity),!isNaN(i.config.max_quantity)&&n>i.config.max_quantity&&(n=i.config.max_quantity),i.config.productInstance.setQuantity(n)}}),1e3)}ajaxCartNeedDoCheckout(t){var e=this;e.doHook("ajaxCartNeedDoCheckout_b"),t=t.hasOwnProperty("items")?t.items:[t];var i=!1;return t.forEach((function(t){t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&(e.transformFunction(t.properties)||Object.keys(t.properties).forEach((function(n){var a=t.properties[n];switch(n){case"_YmqItemPrice":case"_YmqItemPriceOneTime":a<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(a=0),0!=a&&(e.config.addedCartEvent=!1,""==e.penny_variant?e.config.ymq_checkout=!0:(i=!0,e.total_add_price+=Number(a)));break;case"_YmqItemSku":window.ymq_option.ymq_option_branding.extra.plan>1&&""!=a&&(e.config.addedCartEvent=!1,e.config.ymq_checkout=!0);break;case"_YmqItemWeight":window.ymq_option.ymq_option_branding.extra.plan>1&&a>0&&(e.config.addedCartEvent=!1,e.config.ymq_checkout=!0);break;case"_YmqItemVPrice":case"_YmqItemVPriceOneTime":a<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(a=0),0!=a&&(e.config.addedCartEvent=!1);break;case"_YmqVariantIds":case"_YmqVariantIdsOneTime":""!=a&&(e.config.addedCartEvent=!1);break;case"_YmqParentId":case"_YmqChidrenId":e.config.bind_variant_need_checkout&&void 0===window.ymq_bundle_variant_addedCartEvent&&(e.config.addedCartEvent=!1);break;case"_YmqItemDiscount":case"_YmqWholesalePricing":e.config.addedCartEvent=!1,e.config.ymq_checkout=!0}})))})),i&&e.total_add_price<0&&(e.config.ymq_checkout=!0),e.doHook("ajaxCartNeedDoCheckout_a"),e}forEachProperties(t){var e=this;ymq_option.transform_function&&(e.config.ymq_checkout=!1,e.config.addedCartEvent=!0),e.config.wholesale_pricing_cart={},e.config.wholesale_pricing_ajax={},e.total_add_price=0;var i=!1;t.items.forEach((function(t,n){t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&(e.transformFunction(t.properties)||Object.keys(t.properties).forEach((function(a){var o=t.properties[a];switch(a){case"_YmqItemPrice":case"_YmqItemPriceOneTime":o<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(o=0),0!=o&&(e.config.addedCartEvent=!1,""==e.penny_variant?e.config.ymq_checkout=!0:(i=!0,e.total_add_price+=Number(o)));break;case"_YmqItemSku":window.ymq_option.ymq_option_branding.extra.plan>1&&""!=o&&(e.config.addedCartEvent=!1,e.config.ymq_checkout=!0);break;case"_YmqItemWeight":window.ymq_option.ymq_option_branding.extra.plan>1&&o>0&&(e.config.addedCartEvent=!1,e.config.ymq_checkout=!0);break;case"_YmqItemVPrice":case"_YmqItemVPriceOneTime":o<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(o=0),0!=o&&(e.config.addedCartEvent=!1);break;case"_YmqVariantIds":case"_YmqVariantIdsOneTime":""!=o&&(e.config.addedCartEvent=!1);break;case"_YmqParentId":case"_YmqChidrenId":e.config.bind_variant_need_checkout&&void 0===window.ymq_bundle_variant_addedCartEvent&&(e.config.addedCartEvent=!1);break;case"_YmqItemDiscount":e.config.addedCartEvent=!1,e.config.ymq_checkout=!0;break;case"_YmqWholesalePricing":if(1==e.config.wholesale_is_variant)var r=t.variant_id;else if(2==e.config.wholesale_is_variant)r=n;else r=t.product_id;try{if(e.config.wholesale_pricing_cart.hasOwnProperty(r))e.config.wholesale_pricing_cart[r].quantity+=Number(t.quantity),e.config.wholesale_pricing_cart[r].keys.push(t.key),e.config.wholesale_pricing_cart[r].item_quantitys.push(Number(t.quantity));else{var c=[];t.properties._YmqWholesalePricing.split(",").forEach((t=>{var e=t.split("-");c.push({min:e[0],max:e[1],discount_type:e[2],discount:e[3]})})),e.config.wholesale_pricing_cart[r]={quantity:Number(t.quantity),keys:[t.key],item_quantitys:[Number(t.quantity)],items:c}}e.config.addedCartEvent=!1,e.config.ymq_checkout=!0}catch(t){}}})))})),i&&e.total_add_price<0&&(e.config.ymq_checkout=!0),Object.keys(e.config.wholesale_pricing_cart).forEach((t=>{var{items:i,quantity:n,keys:a,item_quantitys:o}=e.config.wholesale_pricing_cart[t],r=[];try{i.forEach((t=>{r.push(Number(t.min))})),(r=r.sort(((t,e)=>t-e)))[0]>1&&i.unshift({min:0,max:r[0]-1,discount:0,discount_type:1})}catch(t){}try{i.forEach((t=>{if(n>=t.min&&(n<=t.max||0==t.max))throw a.forEach(((i,a)=>{0!=a&&2==t.discount_type?e.config.wholesale_pricing_ajax[i]=`discount:0,discount_type:${t.discount_type}`:e.config.wholesale_pricing_ajax[i]=`discount:${t.discount},discount_type:${t.discount_type}`,e.config.qtyInfo[i]=t,e.config.qtyInfo[i]=Object.assign([],t),e.config.qtyInfo[i].quantity=n,e.config.qtyInfo[i].item_quantity=o[a]})),new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}}))}getAppAllDiscountPrice(t){var e=this;t&&(e.cartJson=t),e.config.app_price_discount_price=0,e.cartJson.items.forEach((t=>{try{if(!ymqJq.isEmptyObject(t.line_level_discount_allocations)&&Array.isArray(t.line_level_discount_allocations)&&t.line_level_discount_allocations.length>0&&"automatic"==t.line_level_discount_allocations[0].discount_application.type&&0!=t.line_level_discount_allocations[0].amount){var i=t.line_level_discount_allocations[0];"percentage"==i.discount_application.value_type&&(e.config.app_price_discount_price+=e.itemAddLinePrice[t.key]*(i.discount_application.value/100))}}catch(t){console.log(t)}}))}addOnPrice(t){t&&(this.cartJson=t),this.cartJson.items.forEach((function(t,e){}))}transformFunction(t){return!(!ymq_option.transform_function||!t.hasOwnProperty("__ymq_option_info"))}replaceDomPrice(t=null,e=!1){var i=this;i.onetime_key={},i.listenCustomer("start replaceDomPrice");var n=1;try{t&&(i.cartJson=t),i.doHook("replaceDomPrice_b_all_time");try{i.ajaxcart&&ymqJq(".ymq-ajax-cart-total-box").html(i.ajaxcart.getCartPriceDom(i.cartJson));var a=i.config.util.getValue(i.config.ymq_option_branding.extra,"cart-count-dom","");a=""==a?".ymq-cart-item-count":`${a},.ymq-cart-item-count`,ymqJq(a).html(i.cartJson.item_count),i.cartJson.item_count<=1?ymqJq(".ymq-cart-item-count-html").html(i.config.util.getValue(i.config.ymq_option_branding.lan,"item","ITEM")):ymqJq(".ymq-cart-item-count-html").html(i.config.util.getValue(i.config.ymq_option_branding.lan,"items","ITEMS"))}catch(t){}n=2,i.getAutomaticDiscount(),n=2.5,i.config.KDSdkPrice=[],i.config.addPrice={},i.config.qtyInfo={},i.needUpdateQtyNew={},i.cartAddPrice=0,i.cartAddPriceDis=0,i.cartOriginalTotal=0,i.cartTotal=0,i.cartTotalDiscount=0,i.addDiscountPrice=0,i.addLineDiscountPrice=0,i.onetime_index_key=[],i.cartPriceClassShopifyCartJsonData.ymq_cart_items_subtotal_price=this.cartJson.items_subtotal_price,i.cartPriceClassShopifyCartJsonData.ymq_cart_original_total_price=this.cartJson.original_total_price,i.cartPriceClassShopifyCartJsonData.ymq_cart_total_price=this.cartJson.total_price;var o=ymqJq("[data-ymq-item-key]").closest("form");i.updateNewTag=!1,o.find('[name="updates[]"]').length==i.cartJson.items.length&&(i.updateNewTag=!0,0==o.find('[name="update"]').length&&o.append('<button style="display:none!important;" name="update"></button>')),n=3,i.forEachProperties(i.cartJson),n=4,i.cartJson.items.forEach((function(t,e){var n=t.quantity,a=!1,o=t.key;i.config.addPrice[o]=[],i.itemPriceClassShopifyCartJsonData[o]={},i.itemPriceClassShopifyCartJsonData[o].ymq_item_price=t.price,i.itemPriceClassShopifyCartJsonData[o].ymq_item_final_price=t.final_price,i.itemPriceClassShopifyCartJsonData[o].ymq_item_original_price=t.original_price,i.itemPriceClassShopifyCartJsonData[o].quantity=t.quantity,i.itemLinePriceClassShopifyCartJsonData[o]={},i.itemLinePriceClassShopifyCartJsonData[o].ymq_item_line_price=t.line_price,i.itemLinePriceClassShopifyCartJsonData[o].ymq_item_final_line_price=t.final_line_price,i.itemLinePriceClassShopifyCartJsonData[o].ymq_item_original_line_price=t.original_line_price,t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&Object.keys(t.properties).forEach((function(r){var c=t.properties[r];if(Array.isArray(c)&&(c=c.join(i.config.option_value_split)),c){var s=i.getQtyInfo(c);s&&(i.config.qtyInfo[o]=s,i.config.getMinMaxFunctionForCart(s,n,o,e),a=!0);var m=i.getMinMax(c);if(m&&(i.config.getMinMaxFunctionForCart(m,n,o,e),a=!0),"_YmqItemMinMax"==r)try{var l=c.split(",");i.config.getMinMaxFunctionForCart({min:l[0].split(":")[1],max:l[1].split(":")[1]},n,o,e),a=!0}catch(t){}}})),0==a&&i.config.getMinMaxByProduct(t.product_id,t.quantity,o,e);var r,c,s=0,m=0,l=1;try{if(!ymqJq.isEmptyObject(t.line_level_discount_allocations)&&Array.isArray(t.line_level_discount_allocations)&&t.line_level_discount_allocations.length>0&&0!=t.line_level_discount_allocations[0].amount){var d=t.line_level_discount_allocations[0].discount_application;"percentage"==d.value_type&&(l=(100-d.value)/100)}}catch(t){console.log(t)}t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&(i.transformFunction(t.properties)||(t.properties.hasOwnProperty("_YmqItemPrice")&&(s+=Number(t.properties._YmqItemPrice)),t.properties.hasOwnProperty("_YmqItemPriceOneTime")&&(m+=Number(t.properties._YmqItemPriceOneTime)),t.properties.hasOwnProperty("_YmqItemVPrice")&&(s+=Number(t.properties._YmqItemVPrice)),t.properties.hasOwnProperty("_YmqItemVPriceOneTime")&&(m+=Number(t.properties._YmqItemVPriceOneTime))));var p=`${t.id}-${JSON.stringify(t.properties)}`;i.onetime_key.hasOwnProperty(p)?(m=0,i.onetime_index_key.push(`${e}-${o}`)):i.onetime_key[p]=m,r=((s+Number(m/n))*Shopify.currency.rate).toFixed(2),c=((Number(s*n)+m)*Shopify.currency.rate).toFixed(2),i.itemAddPrice[o]=100*r*l,i.itemAddLinePrice[o]=100*c*l,i.addLineDiscountPrice+=Number(100*c*(100-100*l)/100),i.itemAddOriginalPrice[o]=100*r,i.itemAddOriginalLinePrice[o]=100*c;try{i.cartAddPriceDis+=Number(100*c*(100-100*l)/100)}catch(t){}var u=i.itemLinePriceClassShopifyCartJsonData[o].ymq_item_final_line_price,y=i.itemAddLinePrice[o],_=parseFloat((Number(u)+Number(y))/100).toFixed(2);i.itemDiscountLinePrice[o]=i.setQtyInfoDomAndPrice(o,_,null,1,e),i.cartOriginalTotal+=100*(Number(_)-i.itemDiscountLinePrice[o]),i.cartAddPrice=i.cartAddPrice-100*-c-100*i.itemDiscountLinePrice[o],i.ajaxDdata.variant_id[e]={product_id:t.product_id,variant_id:t.variant_id,line_price:t.line_price/Shopify.currency.rate,quantity:n,add_line_price:y/Shopify.currency.rate,qty_discount_line_price:100*i.itemDiscountLinePrice[o]/Shopify.currency.rate,total_line_price:(y+Number(t.line_price)-100*i.itemDiscountLinePrice[o])/Shopify.currency.rate}})),n=5;var r=i.config.util.getValue(i.config.ymq_option_branding.extra,"checkout_qty_alert","");if(1==i.updateNewTag)ymqJq.isEmptyObject(i.needUpdateQtyNew)||(Object.keys(i.needUpdateQtyNew).forEach((t=>{o.find(`[name="updates[]"]:eq(${t})`).val(i.needUpdateQtyNew[t])})),1==e&&""!=r&&alert(r),o.find('[name="update"]').click());else if(i.needUpdateQty.length>0){i.needUpdateQty.forEach((function(t){ymqJq.ajax({type:"POST",url:"/cart/change.js",dataType:"json",data:t,async:!1,success:function(t){try{"object"==typeof ymqCart?i.needUpdateQty=[]:location.reload()}catch(t){location.reload()}}})})),1==e&&""!=r&&alert(r);try{0}catch(t){location.reload()}}var c=i.cartOriginalTotal;i.cart_discounts={},i.hasAutomaticDiscount&&1==Number(i.automaticDiscount.type)&&(i.automaticDiscount.percentage.forEach((t=>{var e=Number(c*(t.value/100));c-=e,i.cart_discounts[t.title]=e,i.cartTotalDiscount+=e})),i.automaticDiscount.fixed_amount.forEach((t=>{var e=t.value*Shopify.currency.rate*100;c-=e,i.cart_discounts[t.title]=e,i.cartTotalDiscount+=e}))),i.cartTotal=i.cartOriginalTotal-i.cartTotalDiscount,n=6,i.itemPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){var e=ymqJq(this).data("ymq-item-key"),n=ymqJq(this).data("price");if(e||null!=n){if(null!=n)var a=Number(n);else a=i.itemPriceClassShopifyCartJsonData[e][t]*i.config.cart_price_factor;if("ymq_item_original_price"==t)var o=i.itemAddOriginalPrice[e];else o=i.itemAddPrice[e];var r=parseFloat((a- -o)/100).toFixed(2);try{i.hasB2b()||(ymqJq(this).html(i.config.doFormatWithoutRate(r,!0,!0)),i.setQtyInfoDomAndPrice(e,r,ymqJq(this),i.itemPriceClassShopifyCartJsonData[e].quantity))}catch(t){console.log(t)}}}))})),n=7,i.itemLinePriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){var e=ymqJq(this).data("ymq-item-key"),n=ymqJq(this).data("price");if(e||null!=n){if(null!=n)var a=Number(n);else a=i.itemLinePriceClassShopifyCartJsonData[e][t]*i.config.cart_price_factor;if("ymq_item_original_line_price"==t)var o=i.itemAddOriginalLinePrice[e];else o=i.itemAddLinePrice[e];var r=parseFloat((a- -o)/100).toFixed(2);i.hasB2b()||(ymqJq(this).html(i.config.doFormatWithoutRate(r,!0,!0)),i.setQtyInfoDomAndPrice(e,r,ymqJq(this)))}}))})),n=8,i.otherItemPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){var t=ymqJq(this).data("ymq-item-key"),e=i.getPrice(ymqJq(this).html()),n=i.itemAddPrice[t],a=parseFloat((e- -n)/100).toFixed(2);i.hasB2b()||(ymqJq(this).html(i.config.doFormatWithoutRate(a)),i.setQtyInfoDomAndPrice(t,a,ymqJq(this)))}))})),n=9,i.otherItemLinePriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){var t=ymqJq(this).data("ymq-item-key"),e=i.getPrice(ymqJq(this).html()),n=i.itemAddLinePrice[t],a=parseFloat((e- -n)/100).toFixed(2);i.hasB2b()||(ymqJq(this).html(i.config.doFormatWithoutRate(a)),i.setQtyInfoDomAndPrice(t,a,ymqJq(this)))}))})),n=10,i.getAppAllDiscountPrice(),n=11,i.cartPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){if(null!=ymqJq(this).data("price"))var e=Number(ymqJq(this).data("price"));else e=i.cartPriceClassShopifyCartJsonData[t]*i.config.cart_price_factor;var n=i.cartAddPrice-i.config.app_price_discount_price-i.cartAddPriceDis;"ymq_cart_original_total_price"==t&&(n=i.cartAddPrice);var a=parseFloat((e- -n)/100).toFixed(2);"ymq_cart_total_price"==t&&(a=i.cartTotal/100),"ymq_cart_original_total_price"==t&&(a=i.cartOriginalTotal/100),i.hasB2b()||ymqJq(this).html(i.config.doFormatWithoutRate(a))}))})),n=12,i.cartDiscountPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){var t=i.cartTotalDiscount/100;if(ymqJq(this).attr("data-dis-title")){var e=ymqJq(this).attr("data-dis-title");i.cart_discounts.hasOwnProperty(e)&&(t=i.cart_discounts[e]/100)}i.hasB2b()||ymqJq(this).html(i.config.doFormatWithoutRate(t))}))})),n=13,n=14,i.ajaxDdata.total_price=(Number(this.cartJson.total_price)+Number(this.cartAddPrice))/Shopify.currency.rate,i.ajaxDdata.item_count=i.cartJson.item_count,"ymq"==i.config.util.getUrlParam("test")&&(i.config.addedCartEvent=!1,i.config.ymq_checkout=!0),n=15;try{ymqOptionIntervalResult(1e4,100,(function(){if("undefined"!=typeof KDSdk&&"function"==typeof KDSdk.redirectToDraftOrder){i.config.KDSdkCartJson=JSON.parse(JSON.stringify(i.cartJson));var t=0;return i.config.KDSdkPrice.forEach(((e,n)=>{var{key:a,index:n,price:o}=e,r=i.config.KDSdkCartJson.items[n].quantity;i.config.KDSdkCartJson.items[n].key==a&&(t+=o-i.config.KDSdkCartJson.items[n].final_line_price,i.config.KDSdkCartJson.items[n].final_line_price=o,i.config.KDSdkCartJson.items[n].final_price=parseInt(o/r),i.config.KDSdkCartJson.items[n].price=parseInt(o/r))})),i.config.KDSdkCartJson.total_price+=t,window.Cz02qpNJQSsbMuU85Yar=i.config.KDSdkCartJson,!0}return"complete"==document.readyState}))}catch(t){}try{var s=Object.keys(i.discounts);s.length>0?ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").show();var t="";i.cartTotalDiscount>0&&(t=`-${i.config.formatMoney(i.cartTotalDiscount/100)}`),ymqJq(this).find(".ymq-discount-success-code").html(`${s[0]} ${t}`)})):ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").hide(),ymqJq(this).find(".ymq-discount-success-code").html("")}))}catch(t){}}catch(t){try{i.config.addedCartEvent=!1,i.config.ymq_checkout=!0;var m=`${Shopify.shop}-${n}-item count${ymq_option.cart.item_count}-msg${t.message}-name${t.name}`;i.listenCustomer(m)}catch(t){i.config.addedCartEvent=!1,i.config.ymq_checkout=!0,i.listenCustomer(t.message)}}return i.listenCustomer("end replaceDomPrice"),i.config.addedCartEvent||i.listenCustomer(""),i.config.ymq_checkout&&i.listenCustomer("ymq_checkout"),i.doHook("replaceDomPrice_a_all_time"),i}setQtyInfoDomAndPrice(t,e,i=null,n=1,a=null){var o=this,r=e;if(o.config.qtyInfo.hasOwnProperty(t)){var c=o.config.qtyInfo[t];if(1==Number(c.discount_type))r=e*(1-c.discount/100);else if(c.hasOwnProperty("quantity")){if(n>1)return 0;r=e-c.discount*c.item_quantity/c.quantity}else r=e-c.discount/n;null!=i&&Number(c.discount)>0&&(o.suffix_url="qty",o.config.addedCartEvent=!1,i.removeClass("ymq-qty-discount-compare-price").next(".ymq-qty-discount-price").remove(),i.addClass("ymq-qty-discount-compare-price").css("cssText","text-decoration:line-through!important;").after(`<span class="ymq-qty-discount-price"><br/><span>${o.config.doFormatWithoutRate(r)}</span></span>`))}try{null!=a&&o.config.KDSdkPrice.push({key:t,index:a,price:Number(100*r)})}catch(t){}return parseFloat(e-r).toFixed(2)}hidePaymentButton(){var t=this,e="";if(!t.config.addedCartEvent)if(t.listenCustomer("hidePaymentButton init"),window.ymq_option.buy_now_new){var i='.dynamic-checkout__content,#dynamic-checkout-cart,[data-shopify="dynamic-checkout-cart"],.sezzle-checkout-button';""!=(n=t.config.util.getValue(t.config.ymq_option_branding.extra,"payment-button-hide",""))&&(i=`${i},${n}`),e+=`\n                        ${i}{\n                            display: none!important;\n                        }\n                    `,ymqJq(i).hide().remove(),ymqJq("body").append(`<style type="text/css">${e}</style>`),ymqJq(t.config.styleDomId).append(e)}else{var n;""!=(n=t.config.util.getValue(t.config.ymq_option_branding.extra,"payment-button-hide",""))&&(e+=`\n                            ${n}{\n                                display: none!important;\n                            }\n                        `,ymqJq(n).hide()),e+=`\n                        ${t.config.cart_form_class} #dynamic-checkout-cart,${t.config.cart_form_class}  .shopify-cleanslate,${t.config.cart_form_class} .additional-checkout-buttons,${t.config.cart_form_class}  [data-shopify="payment-button"]{\n                            display: none!important;\n                        }\n                    `,ymqJq(t.config.styleDomId).append(e),ymqJq(`${t.config.cart_form_class} #dynamic-checkout-cart,${t.config.cart_form_class} .shopify-cleanslate,${t.config.cart_form_class} .additional-checkout-buttons`).hide(),ymqJq(`${t.config.cart_form_class} [data-shopify="payment-button"]`).hide().remove();i='#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons,[data-shopify="payment-button"],.sezzle-checkout-button';""!=n&&(i=`${i},${n}`),ymqJq("body").append(`<style class="hidePaymentButtonStyle" type="text/css">${i}{display: none!important;}</style>`)}return t}f(t){var e=ymq_option.cartInstance;if("cart"==window.ymq_option.page||1==e.config.util.getValue(e.config.ymq_option_branding.extra,"cart-qty-update","0")){var i=ymqJq(this);setTimeout((function(){var t=i.closest("form").find('[name="update"]');t.length>0?t.trigger("click"):window.location.reload()}),1e3)}}registerQuantityChangeEvent(){var t=this;return setTimeout((function(){var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"cart-quantity-click-change","");""!=e?ymqJq(document).on("click",e,t.f):0==ymqJq('.btn-link[name="update"]').length&&ymqJq('[href^="/cart/change"], [data-action="decrease-quantity"], [data-action="increase-quantity"], .js-qty__adjust, .js-counter .inputCounter-down, .js-counter .inputCounter-up, a.remove_item_button, .cart-remove-btn, [data-cart-action="increment"], .cart-table .qtyminus_multi, .cart-table .qtyplus_multi, .mini_cart_actions .plus, .mini_cart_actions .minus, .cart_tbl .minus_btn, .cart_tbl .plus_btn, .btn-increment, .quantity .quantity-up, .quantity .quantity-down, .quantity input[type="button"], [data-ajax-cart-quantity-modifier], .gt_quantity_plus, .gt_quantity_minus, .quantity-plus, .quantity-minus, .gt_cart-quantity--minus, .gt_cart-quantity--plus, a.cart-item__remove, .quantity [class="update btn item"], [data-cart-item-remove]').click(t.f);var i=t.config.util.getValue(t.config.ymq_option_branding.extra,"cart-quantity-change","");""!=i?ymqJq(document).on("change",i,t.f):0==ymqJq('.btn-link[name="update"]').length&&ymqJq('[data-quantity-input]:not(.cart__qty-input), input.cart-item__qty-input, input.cart__quantity, input.cart__product-qty, [data-cart-product-quantity], .cart-table .item-qty, .cart_tbl .number_val_input, .cart-product-quantity .input-qty, .cart-quantity > input[type="number"], .quantity .cart-item__quantity-input, .quantity input[type="number"], .cart__qty-input, [data-ajax-cart-quantity-value], .number_quantity, [name="quantity"], input.quantity-selector, .update-cart--template, .gt_cart-quantity--number, input[name="updates[]"]').change(t.f)}),5),t}doFreshAddVariantJson(t,e){var i=this;t.forEach((t=>{var[n,a]=i.config.util.getVariantIdAndQty(t,e);i.config.add_variant_json.hasOwnProperty(n)?i.config.add_variant_json[n]+=a:i.config.add_variant_json[n]=a}))}freshAddVariantJson(t){var e=this;e.config.add_variant_json={},t.items.forEach((t=>{var i=[];t.properties.hasOwnProperty("_YmqVariantIds")&&""!=t.properties._YmqVariantIds&&(i=t.properties._YmqVariantIds.split(","),e.doFreshAddVariantJson(i,t.quantity)),t.properties.hasOwnProperty("_YmqVariantIdsOneTime")&&""!=t.properties._YmqVariantIdsOneTime&&(i=t.properties._YmqVariantIdsOneTime.split(","),e.doFreshAddVariantJson(i,1))}))}getCheckoutButton(){var t=this.config.util.getValue(this.config.ymq_option_branding.extra,"check-out-button","");if(""!=t)var e=`${t},.ymq-cart-app-checkout-fack-button,.btn.btn-checkout,[name="checkout"], .ymq-fake-checkout-btn, a[href^="/checkout"], a[href="/account/login"].cart__submit, button[type="submit"].btn-order, a.btn.cart__checkout, a.cart__submit, .wc-proceed-to-checkout button, #cart_form .buttons .btn-primary`;else e='.btn.btn-checkout,.ymq-cart-app-checkout-fack-button,[name="checkout"], .ymq-fake-checkout-btn, a[href^="/checkout"], a[href="/account/login"].cart__submit, button[type="submit"].btn-order, a.btn.cart__checkout, a.cart__submit, .wc-proceed-to-checkout button, #cart_form .buttons .btn-primary';return e}de(t,e,i,n,a){if(t){var o={};if((o=ymqJq._data(t))&&o.events&&o.events[e])for(var r=0;r<o.events[e].length;r+=1)o.events[e][r].namespace!=n&&""!=n||(o.events[e][r].handler=function(){});try{if("function"==typeof ymqBq){var c={};if((c=ymqBq._data(t))&&c.events&&c.events[e])for(r=0;r<c.events[e].length;r+=1)c.events[e][r].namespace!=n&&""!=n||(c.events[e][r].handler=function(){})}}catch(t){}}}getB2b(t=null){try{var e=this;if(null!=t)e.config.b2bAddedCartEvent=t;else{e.config.b2bAddedCartEvent=!1;try{e.hasB2b()&&"object"==typeof window.ymqB2b&&window.ymqB2b.hasOwnProperty("addedCartEvent")&&(e.config.b2bAddedCartEvent=window.ymqB2b.addedCartEvent)}catch(t){console.log(t)}}}catch(t){}}hasB2b(){var t=!1;try{"object"==typeof window.ymq_b2b&&window.ymq_b2b.config.plan>0&&(t=!0)}catch(t){}return t}replaceWithClonedElement(t){var e=this;if(0==(1==e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout_replace","1")))return t;var i=t.cloneNode(!0);return i.setAttribute(e.replace_attr,!0),i.removeAttribute(e.event_add_attr),i.removeAttribute("onclick"),i.onclick=function(){return!1},"object"==typeof window.TPOConfigs&&(i.id="qtl-quote"),t.replaceWith(i),i}addCheckoutListenerToElements(t){var e=this,i=1==e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout_always","0");pushLocalStorage(`elements length${t.length}`,"ymq-code"),t.forEach((t=>{(i||!e.config.addedCartEvent||e.config.b2bAddedCartEvent)&&(t=e.replaceWithClonedElement(t)),pushLocalStorage(`elements class${t.getAttribute("class")}`,"ymq-code"),pushLocalStorage(`elements hasAttribute${t.hasAttribute(e.event_add_attr)}`,"ymq-code"),t.hasAttribute(e.event_add_attr)||(t.setAttribute(e.event_add_attr,!0),t.addEventListener("click",(n=>{if(e.checkout_element=t,e.checkOutDom=ymqJq(n.currentTarget),pushLocalStorage("","ymq-code"),pushLocalStorage(`${i||!e.config.addedCartEvent||e.config.b2bAddedCartEvent}`,"ymq-code"),pushLocalStorage(`new_checkout_always${i}addedCartEvent${!e.config.addedCartEvent}b2bAddedCartEvent${e.config.b2bAddedCartEvent}`,"ymq-code"),e.release_checkout)e.release_checkout=!1;else{if(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.checkOutDom.hasClass("ymq-btn-progress"))return;e.startLoading(e.checkOutDom),fetch(`/cart/update.js?timestamp=${Date.now()}`,{method:"POST"}).then((t=>t.json())).then((t=>{try{pushLocalStorage(`cart json${JSON.stringify(t)}`,"ymq-code"),e.time1=Date.now(),pushLocalStorage(`cart${e.time1}`,"ymq-code"),e.forEachProperties(t),pushLocalStorage(`new_checkout_always${i}addedCartEvent${!e.config.addedCartEvent}b2bAddedCartEvent${e.config.b2bAddedCartEvent}`,"ymq-code"),i||!e.config.addedCartEvent||e.config.b2bAddedCartEvent?(localStorage.removeItem("ymq-checkout"),pushLocalStorage(`${(new Date).getTime()}`),e.do_new_checkout(t)):(e.endLoading(e.checkOutDom),e.releaseCheckout())}catch(t){}})).catch((t=>{pushLocalStorage(""),fetch(`/cart.js?timestamp=${Date.now()}`,{method:"GET"}).then((t=>t.json())).then((t=>{try{pushLocalStorage(`cart json${JSON.stringify(t)}`,"ymq-code"),e.forEachProperties(t),pushLocalStorage(`new_checkout_always${i}addedCartEvent${!e.config.addedCartEvent}b2bAddedCartEvent${e.config.b2bAddedCartEvent}`,"ymq-code"),i||!e.config.addedCartEvent||e.config.b2bAddedCartEvent?(localStorage.removeItem("ymq-checkout"),pushLocalStorage(`${(new Date).getTime()}`),e.do_new_checkout(t)):(e.endLoading(e.checkOutDom),e.releaseCheckout())}catch(t){}})).catch((t=>{pushLocalStorage(""),e.endLoading(e.checkOutDom),window.location.href="/checkout"}))}))}}),!0))}))}releaseCheckout(){this.release_checkout=!0,this.checkout_element.click()}new_checkout(t=!1){var e=this;t&&new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){if(t&&t.querySelectorAll){var n=t.querySelectorAll(i);0==n.length&&t.parentElement&&t.parentElement.querySelectorAll&&t.parentElement.querySelectorAll(i).forEach((i=>{i.hasAttribute(e.replace_attr)||i===t&&(n=[i])})),n.length>0&&e.addCheckoutListenerToElements(n)}}))}))})).observe(document,{childList:!0,subtree:!0});if(pushLocalStorage("new_checkout","ymq-code"),0==e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout","0"))return e;pushLocalStorage(`new_checkout${e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout","0")}`,"ymq-code"),pushLocalStorage(`new_checkout${0==e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout","0")}`,"ymq-code");var i=e.getCheckoutButton();pushLocalStorage("getCheckoutButton","ymq-code");try{e.config.obj_attributes=e.config.obj_attributes||{},e.config.tags=e.config.tags||[]}catch(t){e.config.obj_attributes={},e.config.tags=[],pushLocalStorage("new_checkout","ymq-code")}pushLocalStorage("","ymq-code"),e.addCheckoutListenerToElements(document.querySelectorAll(i)),e.addCheckoutListenerToElements(document.querySelectorAll(".dynamic-checkout__content"));var n=1==e.config.util.getValue(e.config.ymq_option_branding.extra,"new_checkout_always","0");if(t&&n)try{var a=e.config.util.getValue(e.config.ymq_option_branding.extra,"payment-button-hide",""),o='.dynamic-checkout__content,#dynamic-checkout-cart,[data-shopify="dynamic-checkout-cart"],.sezzle-checkout-button';""!=a&&(o=`${o},${a}`);var r=`\n                        ${o}{\n                            display: none!important;\n                        }\n                    `;ymqJq(o).hide().remove(),ymqJq("body").append(`<style type="text/css">${r}</style>`),ymqJq(e.config.styleDomId).append(r)}catch(t){console.log(t)}return t&&ymqJq("body").append('<style type="text/css">.ymq-btn-progress{pointer-events: none!important;}</style>'),e}do_new_checkout(t,e=null){var i=this;pushLocalStorage("do_new_checkout"),pushLocalStorage(`${window.location.href}`),pushLocalStorage(`class${i.checkOutDom.attr("class")}`),i.getB2b(e);try{if("function"==typeof validateInStorePickupLocalDelivery&&!validateInStorePickupLocalDelivery())return i.endLoading(i.checkOutDom),!1}catch(t){}try{if(void 0!==window.ZapietCachedSettings&&!1===ZapietCheckoutEnabled)return ZapietEvent.fire("checkout_error",ZapietCachedSettings.cached_config.translations[ZapietSelectedMethod].checkout_error),i.endLoading(i.checkOutDom),!1}catch(t){}try{if("function"==typeof ymqBeforeCheckoutValidate&&!ymqBeforeCheckoutValidate())return i.endLoading(i.checkOutDom),!1}catch(t){}pushLocalStorage("");try{i.hasB2b()&&"object"==typeof window.ymqB2b&&window.ymqB2b.buildCartData(t)}catch(t){}if(i.config.b2bAddedCartEvent)i.endLoading(i.checkOutDom),window.ymqB2b.doCheckout(i.checkOutDom,i.config.cart_form);else{pushLocalStorage("option"),i.getAutomaticDiscountInCheckout(t);try{i.config.checkout_url_suffix=`?locale=${Shopify.locale}`}catch(t){}var n="";try{ymqJq('[name="note"]').each((function(t,e){n+=e.value}))}catch(t){}i.getAttributes();var a=t;try{""!=i.getDiscount()&&(i.show_discount_in_checkout=!1)}catch(t){}var o={data:a,allowDiscountCodesInCheckout:i.show_discount_in_checkout?1:0,discountCode:i.getDiscount(),has_automatic_discount:i.hasAutomaticDiscount,automaticDiscount:i.config.checkoutAutomaticDiscount,shop:i.config.shop,token:i.config.token,timestamp:i.config.timestamp,customer_id:i.config.customer_id,note:n,version:2,currency:Shopify.currency&&Shopify.currency.rate&&Shopify.currency.active,country:ymq_option.country,rate:Shopify.currency&&Shopify.currency.active&&Shopify.currency.rate,note_attributes:i.config.note_attributes,tags:i.config.tags.join(", "),wholesale_pricing:i.config.wholesale_pricing_ajax,onetime_index_key:i.onetime_index_key};i.config.util.getValue(i.config.ymq_option_branding.extra,"automatic-allow-discount",1)&&o.has_automatic_discount&&(o.allowDiscountCodesInCheckout=0),pushLocalStorage("ajax"),ymqJq.post(`${i.prefix_url}checkoutnew`,o).done((function(t){try{i.config.ymqHook("doCheckout_success"),pushLocalStorage(""),setTimeout((function(){i.endLoading(i.checkOutDom);var e=t.data;"function"==typeof window.ymq_checkout_url&&(e=window.ymq_checkout_url(e)),pushLocalStorage(`${e+i.config.checkout_url_suffix}`),window.location.href=e+i.config.checkout_url_suffix}),i.config.checkout_timeout)}catch(t){pushLocalStorage(` ${t.message}`)}})).fail((function(t){pushLocalStorage(`${t.status}`);try{pushLocalStorage(`json${JSON.stringify(t)}`),i.time2=Date.now(),pushLocalStorage(`${i.time2}`,"ymq-code"),pushLocalStorage(`${Math.abs((i.time2-i.time1)/1e3)}`,"ymq-code")}catch(t){pushLocalStorage("}")}0==Number(t.status)&&pushLocalStorage("0"),500==Number(t.status)||0==Number(t.status)?ymqJq.post(`${i.prefix_url}checkout${i.suffix_url}`,o).done((function(t){i.config.ymqHook("doCheckout_success"),pushLocalStorage(""),setTimeout((function(){i.endLoading(i.checkOutDom),pushLocalStorage(`${t.data+i.config.checkout_url_suffix}`),window.location.href=t.data+i.config.checkout_url_suffix}),i.config.checkout_timeout)})).fail((function(t){i.config.ymqHook("doCheckout_error"),pushLocalStorage("");try{i.time3=Date.now(),pushLocalStorage(`${i.time3}`,"ymq-code"),pushLocalStorage(`${Math.abs((i.time3-i.time2)/1e3)}`,"ymq-code")}catch(t){}setTimeout((function(){i.endLoading(i.checkOutDom),window.location.href="/checkout"+i.config.checkout_url_suffix}),i.config.checkout_timeout)})):(i.listenCustomer("ajax"),i.config.ymqHook("doCheckout_success"),setTimeout((function(){i.endLoading(i.checkOutDom),window.location.href="/checkout"+i.config.checkout_url_suffix}),i.config.checkout_timeout))}))}}doCheckout(t=null){var e=this,i=e.getCheckoutButton();function n(){e.listenCustomer("refreshCart");try{if("function"==typeof validateInStorePickupLocalDelivery&&!validateInStorePickupLocalDelivery())return!1}catch(t){}try{if(void 0!==window.ZapietCachedSettings&&!1===ZapietCheckoutEnabled)return ZapietEvent.fire("checkout_error",ZapietCachedSettings.cached_config.translations[ZapietSelectedMethod].checkout_error),!1}catch(t){}try{if("function"==typeof ymqBeforeCheckoutValidate&&!ymqBeforeCheckoutValidate())return!1}catch(t){}if(e.checkOutDom.hasClass("ymq-update-cart"))return!0;e.startLoading(e.checkOutDom),e.checkOutDom.addClass("ymq-update-cart"),fetch(`/cart/update.js?timestamp=${Date.now()}`,{method:"POST"}).then((t=>t.json())).then((t=>{1==e.config.util.getValue(e.config.ymq_option_branding.extra,"checkout_validate_qty",0)&&e.replaceDomPrice(t,!0);try{e.hasB2b()&&"object"==typeof window.ymqB2b&&window.ymqB2b.buildCartData(t)}catch(t){}try{var i=e.config.util.getUpdateArray(t);if(i.need_update){var n=i.updates;ymqJq.post({url:"/cart/update.js",dataType:"json"},{updates:n}).done((function(t){a(t)})).fail((function(){a(t)}))}else a(t)}catch(i){e.config.ymq_checkout=!0,c(t)}})).catch((t=>{n()}))}function a(t){e.listenCustomer("addOptionVariants"),e.freshAddVariantJson(t),e.getAutomaticDiscount(t),e.forEachProperties(t);var i=[];ymqJq.isEmptyObject(e.config.add_variant_json)||Object.keys(e.config.add_variant_json).forEach((t=>{i.push({quantity:e.config.add_variant_json[t],id:t,properties:{_YmqOptionVariant:"yes"}})})),e.total_add_price>0&&""!=e.penny_variant&&0==e.config.ymq_checkout&&i.push({quantity:parseInt(e.total_add_price/.01),id:e.penny_variant,properties:{_YmqOptionVariant:"yes"}}),i.length>0?ymqJq.post({url:"/cart/add.js?_easygift_form_payload=true",dataType:"json"},{items:i}).done((function(e){t.items=e.items.concat(t.items),o(t)})).fail((function(){o(t)})):o(t)}function o(t){e.listenCustomer("validateVariantAdd");var[i,n]=e.getValidateExtarVariantData(t);n.length>0?ymqJq.post({url:"/cart/add.js?_easygift_form_payload=true",dataType:"json"},{items:n}).done((function(e){t.items=e.items.concat(t.items),r(t,i)})).fail((function(){r(t,i)})):r(t,i)}function r(t,i){if(e.listenCustomer("validateVariantUpdate"),ymqJq.isEmptyObject(i))c(t);else{try{t.items.length==e.checkOutDom.closest("form").find('input[name="updates[]"]').length&&Object.keys(e.config.update_input).forEach((t=>{var i=e.config.update_input[t];t=Number(t),e.checkOutDom.closest("form").find('input[name="updates[]"]').eq(t).val(i)}))}catch(t){}ymqJq.post({url:"/cart/update.js",dataType:"json"},{updates:i}).done((function(t){c(t)})).fail((function(){c(t)}))}}function c(t){e.listenCustomer("checkoutqty"),e.config.ymqHook("doCheckout_before_checkoutqty"),e.checkOutDom.removeClass("ymq-update-cart"),e.config.b2bAddedCartEvent?(e.endLoading(e.checkOutDom),window.ymqB2b.doCheckout(e.checkOutDom,e.config.cart_form)):e.config.ymq_checkout?(e.cartJson=t,e.config.cart2=t,function(){if(e.listenCustomer("checkoutqty"),e.getAutomaticDiscountInCheckout(),1==e.config.util.getValue(e.config.ymq_option_branding.extra,"checkout_url_suffix",0)||"function"==typeof validateInStorePickupLocalDelivery)try{e.config.checkout_url_suffix="";var t=e.checkOutDom.closest("form").attr("action").split("?");2==t.length&&(e.config.checkout_url_suffix=`?${decodeURI(t[1])}`)}catch(t){e.config.checkout_url_suffix=""}else{var i=null;e.config.checkout_url_suffix="";try{e.config.cart_form.length&&(i=e.config.cart_form.attr("action").match(/\/checkout(\?locale=\w{2})/)),!i&&e.config.checkouts.attr("href")&&(i=e.config.checkouts.attr("href").match(/\/checkout(\?locale=\w{2})/)),e.config.checkout_url_suffix=i?i[1]:""}catch(t){e.config.checkout_url_suffix=""}}1!=Number(e.config.util.getValue(e.config.ymq_option_branding.extra,"locale",0))&&"queensberg.myshopify.com"!=Shopify.shop||(e.config.checkout_url_suffix=`?locale=${Shopify.locale}`);e.config.checkouts.css("pointerEvents","none");var n="";ymqJq('[name="note"]').each((function(t,e){n+=e.value}));e.startLoading(e.checkOutDom),e.getAttributes();var a=e._cloneObj(e.cartJson);try{var o=[];a.items.forEach((t=>{t.final_line_price=t.final_line_price*e.config.cart_price_factor,t.final_price=t.final_price*e.config.cart_price_factor,t.line_price=t.line_price*e.config.cart_price_factor,t.price=t.price*e.config.cart_price_factor,t.original_line_price=t.original_line_price*e.config.cart_price_factor,t.original_price=t.original_price*e.config.cart_price_factor,o.push(t)})),a.items=o,a.total_price=a.total_price*e.config.cart_price_factor,a.original_total_price=a.original_total_price*e.config.cart_price_factor,a.items_subtotal_price=a.items_subtotal_price*e.config.cart_price_factor}catch(t){}e.config.ymqHook("doCheckout_before_getAjaxData");try{""!=e.getDiscount()&&(e.show_discount_in_checkout=!1)}catch(t){}e.config.checkoutAjaxData={data:a,discountCode:e.getDiscount(),allowDiscountCodesInCheckout:e.show_discount_in_checkout?1:0,has_automatic_discount:e.hasAutomaticDiscount,automaticDiscount:e.config.checkoutAutomaticDiscount,shop:e.config.shop,token:e.config.token,timestamp:e.config.timestamp,customer_id:e.config.customer_id,note:n,version:2,currency:Shopify.currency&&Shopify.currency.rate&&Shopify.currency.active,country:ymq_option.country,rate:Shopify.currency&&Shopify.currency.active&&Shopify.currency.rate,note_attributes:e.config.note_attributes,tags:e.config.tags.join(", "),wholesale_pricing:e.config.wholesale_pricing_ajax,onetime_index_key:e.onetime_index_key},1==e.config.util.getValue(e.config.ymq_option_branding.extra,"automatic-allow-discount",1)&&e.config.checkoutAjaxData.has_automatic_discount&&(e.config.checkoutAjaxData.allowDiscountCodesInCheckout=0);e.config.ymqHook("doCheckout_after_getAjaxData"),e.listenCustomer("ajax"),ymqJq.post(`${e.prefix_url}checkoutnew`,e.config.checkoutAjaxData).done((function(t){e.config.ymqHook("doCheckout_success"),setTimeout((function(){e.config.checkouts.css("pointerEvents","auto"),e.endLoading(e.checkOutDom),e.listenCustomer(`ajax${t.data+e.config.checkout_url_suffix}`);var i=t.data;"function"==typeof window.ymq_checkout_url&&(i=window.ymq_checkout_url(i)),window.location.href=i+e.config.checkout_url_suffix}),e.config.checkout_timeout)})).fail((function(t){e.listenCustomer(`ajaxstatus${t.status}`),500==Number(t.status)?(e.listenCustomer("ajaxajax"),ymqJq.post(`${e.prefix_url}checkout${e.suffix_url}`,e.config.checkoutAjaxData).done((function(t){e.config.ymqHook("doCheckout_success"),setTimeout((function(){e.config.checkouts.css("pointerEvents","auto"),e.endLoading(e.checkOutDom),e.listenCustomer(`ajax${t.data+e.config.checkout_url_suffix}`),window.location.href=t.data+e.config.checkout_url_suffix}),e.config.checkout_timeout)})).fail((function(t){e.config.ymqHook("doCheckout_error"),setTimeout((function(){e.config.checkouts.css("pointerEvents","auto"),e.endLoading(e.checkOutDom),e.listenCustomer("ajax"),window.location.href="/checkout"+e.config.checkout_url_suffix}),e.config.checkout_timeout)}))):(e.listenCustomer("ajax"),e.config.ymqHook("doCheckout_success"),setTimeout((function(){e.config.checkouts.css("pointerEvents","auto"),e.endLoading(e.checkOutDom),window.location.href="/checkout"+e.config.checkout_url_suffix}),e.config.checkout_timeout))}))}(e.config.cart2)):(e.endLoading(e.checkOutDom),"submit"==e.checkOutDom.attr("type")?e.checkOutDom.removeClass("btn--loading").removeAttr("disabled").css("pointerEvents","auto").attr("ymq_normal_checkout",!0).click():e.checkOutDom.attr("href")&&-1!=e.checkOutDom.attr("href").search("checkout")?window.location.href=e.checkOutDom.attr("href"):(ymqJq(".ymq-hide-normal-checkout-button").remove(),e.checkOutDom.before('<button ymq_normal_checkout="true" style="display: none !important;" type="submit" class="ymq-hide-normal-checkout-button" name="checkout"></button>'),ymqJq(".ymq-hide-normal-checkout-button").attr("ymq_normal_checkout",!0).click())),e.config.ymqHook("doCheckout_after_checkoutqty")}return e.listenCustomer("start doCheckout"),ymqJq(i).css("pointerEvents","auto"),window.addEventListener("beforeunload",(function(t){e.config.start_checkout&&e.config.util.changeUri("ycoback",1)})),e.getB2b(t),e.config.addedCartEvent&&!e.config.b2bAddedCartEvent||(e.listenCustomer(" doCheckout"),e.config.checkouts=ymqJq(i),e.config.cart_form=ymqJq(i).closest("form"),e.config.obj_attributes=e.config.obj_attributes||{},e.config.note_attributes=e.config.note_attributes||[],e.config.tags=e.config.tags||[],ymqJq("#nudge-offer").hide(),ymqJq("#cart_agree").show(),ymqJq("head").append("<style>.js_agree_ck+label::before, .pr .scl_selected { display: none !important; }</style>"),ymqJq(i).attr("onclick",""),ymqJq(document).each((function(t,i){e.de(i,"click","namespace","ymq_checkout","disable")})),ymqJq(document).on("click.ymq_checkout",i,(function(t){if(e.checkOutDom=ymqJq(this),e.config.addedCartEvent)window.ymqB2b.doCheckout(e.checkOutDom,e.config.cart_form);else if(e.listenCustomer(""),!e.checkOutDom.hasClass("ymq-hide-normal-checkout-button")){if(window.ymq_option&&window.ymq_option.cart&&!e.checkOutDom.attr("ymq_normal_checkout")){t.preventDefault(),t.stopImmediatePropagation(),e.config.start_checkout=!0;var i=ymqJq(t.target);ymqJq("#torden-terms-checkbox, #cart_agree").attr("required",!0),window.localDeliveryVersion&&e.config.cart_form.find('[name="attributes[local_delivery_request]"]').length&&e.config.note_attributes.push({name:"Delivery date/time",value:e.config.cart_form.find('[name="attributes[local_delivery_request]"]').val()});for(var a=0;a<e.cartJson.items.length;a+=1){var o=e.cartJson.items[a],r=document.querySelectorAll("[id='updates_"+o.key+"']");1!=r.length&&(r=document.querySelectorAll("[id='updates_"+o.variant_id+"']")),1==r.length&&(e.cartJson.items[a].quantity=r[0].value)}var c=!1;window.navigator&&navigator.platform&&(c=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform));var s=ymqJq("#CartPageAgree"),m=ymqJq(t.target).closest("form");return s.length&&!s.is(":checked")&&window.theme&&window.theme.strings&&window.theme.strings.cartTermsConfirmation?alert(theme.strings.cartTermsConfirmation):"A"!==i.prop("tagName")&&m.length&&m.get(0).checkValidity&&m.get(0).checkValidity(),s.length&&!s.is(":checked")&&window.theme&&window.theme.strings&&window.theme.strings.cartTermsConfirmation?(alert(theme.strings.cartTermsConfirmation),!1):"A"!==i.prop("tagName")&&m.length&&m.get(0).checkValidity&&!m.get(0).checkValidity()?void(m.get(0).reportValidity&&(c?(setTimeout((function(){document.activeElement.scrollIntoView&&document.activeElement.scrollIntoView({block:"center",behavior:"smooth"})})),setTimeout((function(){document.activeElement.type&&"file"===document.activeElement.type&&document.activeElement.blur()}),900)):m.get(0).reportValidity())):(n(),!1)}e.checkOutDom.removeAttr("ymq_normal_checkout")}}))),e}_cloneObj(t){return JSON.parse(JSON.stringify(t))}getAutomaticDiscountInCheckout(t=null){var e=this;e.show_discount_in_checkout=!0;var i=e.config.util.getValue(e.config.ymq_option_branding.extra,"checkout-discount",1),n=[],a=[];try{n=e.config.util.getValue(e.config.ymq_option_branding.extra,"checkout-discount-allow","").split(",").map((t=>t.toLowerCase())),a=e.config.util.getValue(e.config.ymq_option_branding.extra,"checkout-discount-not-allow","").split(",").map((t=>t.toLowerCase()))}catch(t){n=[],a=[]}try{if(e.config.checkoutAutomaticDiscount={},1==e.config.util.getValue(e.config.ymq_option_branding.extra,"automatic-discount-new",1)){if(t&&(e.cartJson=t),!ymqJq.isEmptyObject(e.cartJson.cart_level_discount_applications)&&Array.isArray(e.cartJson.cart_level_discount_applications)&&e.cartJson.cart_level_discount_applications.length>0){e.config.checkoutAutomaticDiscount.data={percentage:[],fixed_amount:[]};var o=[];e.cartJson.cart_level_discount_applications.forEach((t=>{t.hasOwnProperty("discount_application")&&(t=t.discount_application);try{1==i?("discount_code"==t.type||a.includes(t.title))&&(e.show_discount_in_checkout=!1):n.includes(t.title)||(e.show_discount_in_checkout=!1)}catch(t){}var r={type:1,title:t.title,value:t.value,value_type:t.value_type},c=JSON.stringify(r);o.includes(c)||(o.push(c),e.config.checkoutAutomaticDiscount.data[t.value_type].push(r))}))}e.config.checkoutAutomaticDiscount.active={},e.config.checkoutAutomaticDiscount.keys=[],e.cartJson.items.forEach((function(t,o){try{if(!ymqJq.isEmptyObject(t.line_level_discount_allocations)&&Array.isArray(t.line_level_discount_allocations)&&t.line_level_discount_allocations.length>0&&0!=t.line_level_discount_allocations[0].amount){try{1==i?("discount_code"==t.line_level_discount_allocations[0].discount_application.type||a.includes(t.line_level_discount_allocations[0].discount_application.title))&&(e.show_discount_in_checkout=!1):n.includes(t.line_level_discount_allocations[0].discount_application.title)||(e.show_discount_in_checkout=!1)}catch(t){}e.config.checkoutAutomaticDiscount.type=0,e.config.checkoutAutomaticDiscount.active[`${o}-${t.key}`]={type:0,key:`${o}-${t.key}`,allocation_method:t.line_level_discount_allocations[0].discount_application.allocation_method,title:t.line_level_discount_allocations[0].discount_application.title,value:t.line_level_discount_allocations[0].discount_application.value,value_type:t.line_level_discount_allocations[0].discount_application.value_type},"fixed_amount"==t.line_level_discount_allocations[0].discount_application.value_type&&"across"==t.line_level_discount_allocations[0].discount_application.allocation_method&&(e.config.checkoutAutomaticDiscount.active[`${o}-${t.key}`].value=t.line_level_discount_allocations[0].amount/100)}}catch(t){console.log(t)}}))}}catch(t){return e}return e}getDiscount(){var t=this;try{return t.discountCode?t.discountCode:""}catch(e){return t.discountCode}}getAttributes(){var t=this;try{t.config.note_attributes=[],ymqJq('[name^="attributes["]').each((function(){var e=ymqJq(this).attr("name"),i=ymqJq(this).val();if(e&&i){var n=e.match(/attributes\[([^\]]*)\]/);t.config.obj_attributes[n[1]]=i}})),Object.keys(t.config.obj_attributes).forEach((e=>{t.config.note_attributes.push({name:e,value:t.config.obj_attributes[e]})}))}catch(t){}}startLoading(t){t.addClass("ymq-btn-progress")}endLoading(t){t.removeClass("ymq-btn-progress")}disabledSubmit(){return this.config.addedCartEvent||ymqJq(this.config.cart_form_class).submit((function(t){return t.preventDefault(),!1})),this}getPrice(t){var e=this.config.doFormatWithoutRate(1,!1).replace(/[0-9.]+/g,"");return-1!=t.indexOf(e)?Number(t.replace(/[^0-9.-]+/g,"")):0}getMinMax(t){if(/^.*: \( \d+ - \d+ \) $/.test(t)){var e=0,i=999999999999999;return"null"!=t.match(/.*: \( (\d+) - \d+ \) /)&&(e=t.match(/.*: \( (\d+) - \d+ \) /)[1]),"null"!=t.match(/.*: \( \d+ - (\d+) \) /)&&(i=t.match(/.*: \( \d+ - (\d+) \) /)[1]),{min:e,max:i}}return!1}getQtyInfo(t){var e=this,i=e.config.util.getValue(e.config.ymq_option_branding.lan,"qty-discount-type-fixed","fixed"),n=e.config.util.getValue(e.config.ymq_option_branding.lan,"max-quantity","999999");if(/^.*: \d+ - .* \| .*: \d+ \| .*: .*$/.test(t)){var a=0,o=999999999999999,r=0,c=2;return"null"!=t.match(/.*: (\d+) - .* \| .*: \d+ \| .*: .*/)&&(a=t.match(/.*: (\d+) - .* \| .*: \d+ \| .*: .*/)[1]),"null"!=t.match(/.*: \d+ - (.*) \| .*: \d+ \| .*: .*/)&&(o=t.match(/.*: \d+ - (.*) \| .*: \d+ \| .*: .*/)[1])==n&&(o=999999999999999),"null"!=t.match(/.*: \d+ - .* \| .*: (\d+) \| .*: .*/)&&(r=t.match(/.*: \d+ - .* \| .*: (\d+) \| .*: .*/)[1]),"null"!=t.match(/.*: \d+ - .* \| .*: \d+ \| .*: (.*)/)&&(c=t.match(/.*: \d+ - .* \| .*: \d+ \| .*: (.*)/)[1]),{min:a,max:o,discount:r,discount_type:c==i?0:1}}return!1}buildStyle(){var t=this,e=":root{";t.config.ymq_option_branding.hasOwnProperty("original-select")||(e+="\n                    --no-strong-padding-t: 6;\n                    --no-strong-padding-r: 22;\n                    --no-strong-padding-b: 6;\n                    --no-strong-padding-l: 8;\n                    --no-strong-border: 1;\n                    --no-strong-border-color: #a0a0a0;\n                    --no-strong-border-radius: 4;\n                    --no-strong-min-height: 36;\n                    --no-strong-color: #000;\n                    --no-strong-background: #fff;\n                    --no-strong-line-height: 1.2;\n                    --no-strong-max-width: 400;\n                    --no-strong-border-color-focus: #a0a0a0;\n                    --no-strong-color-focus: #000;\n                    --no-strong-background-focus: #fff;\n                "),t.config.ymq_option_branding.hasOwnProperty("qty")||(e+="\n                    --qty-border-color: #000000;\n                    --qty-border-radius: 0;\n                    --qty-disabled-background-color: #CCCCCC;\n                    --qty-font-color: #000000;\n                    --qty-font-size: 14;\n                    --qty-height: 22;\n                    --qty-width: 44;\n                    --qty-margin-l-r: 2;\n                    --qty-margin-t-b: 2;\n                    --qty-max-width: 400;\n                "),t.config.ymq_option_branding.hasOwnProperty("ajax-modal")||(e+="\n                    --ajax-cart-modal-button-font-size: 15;\n                    --ajax-cart-modal-button-background-color: #000;\n                    --ajax-cart-modal-button-color: #fff;\n                    --ajax-cart-modal-button-min-width: 150;\n                    --ajax-cart-modal-button-padding-t-b: 10;\n                    --ajax-cart-modal-button-padding-l-r: 15;\n                    --ajax-cart-modal-alert-font-size: 16;\n                    --ajax-cart-modal-alert-radius: 5;\n                    --ajax-cart-modal-alert-padding: 5;\n                    --ajax-cart-modal-alert-background-color: #f0f9eb;\n                    --ajax-cart-modal-alert-color: #67c23a;\n                "),Object.keys(t.config.ymq_option_branding).forEach((function(i){"lan"!=i&&"extra"!=i&&Object.keys(t.config.ymq_option_branding[i]).forEach((function(n){e+=`\n                    ${n}: ${t.config.ymq_option_branding[i][n]};\n                `}))})),e+="}";var i=t.config.util.getValue(t.config.ymq_option_branding.extra,"title-value","1,2,9,10");(i=i.split(",")).push(18,19);var n=[];i.forEach((function(t){n.push(`.ymq-options-box-${t} .ymq_option_text_span`)})),e+=`\n            ${n.join(",")}{\n                display: none;\n            }\n        `,e+=t.config.util.getValue(t.config.ymq_option_branding.extra,"extra-style-code",""),ymqJq(t.config.styleDomId).html(e);var a=`<style type="text/css">${t.config.util.getValue(t.config.ymq_option_branding.extra,"customecss","")}</style>`;return ymqJq("body").append(a),t}registerDiscountCodeEvent(){var t=this;return t.config.show_discount&&(ymqJq(document).on("keyup",".ymq-discount-input",(function(t){var e=ymqJq(this);ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-error-info").html(""),ymqJq(this).find(".ymq-discount-input").val(e.val()),ymqJq(this).find(".ymq-discount-input").removeClass("ymq-discount-input-error"),e.val()?ymqJq(this).find(".ymq-discount-apply").removeClass("ymq-discount-apply-disable"):ymqJq(this).find(".ymq-discount-apply").addClass("ymq-discount-apply-disable")}))})),ymqJq(document).on("keydown",".ymq-discount-input",(function(t){var e=ymqJq(this).parents(".ymq-discount");if(13==t.keyCode)return e.find(".ymq-discount-apply").trigger("click"),t.preventDefault(),!1})),ymqJq(document).on("click",".ymq-discount-apply",(function(){t.config.ymqHook("ymqDiscountClick_b"),t.discountCode="";var e=ymqJq(this),i=e.parents(".ymq-discount");if(e.hasClass("ymq-btn-progress")||""==i.find(".ymq-discount-input").val())return!1;e.addClass("ymq-btn-progress"),t.ajaxDdata.code=i.find(".ymq-discount-input").val(),ymqJq.ajax({type:"GET",url:`https://${window.location.host}/discount/${encodeURIComponent(t.ajaxDdata.code)}`}).done((function(i){fetch("/cart.js",{method:"GET"}).then((t=>t.json())).then((i=>{t.replaceDomPrice(i);var n=Object.keys(t.discounts);n.length>0?(ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").show();var e="";t.cartTotalDiscount>0&&(e=`-${t.config.formatMoney(t.cartTotalDiscount/100)}`),ymqJq(this).find(".ymq-discount-success-code").html(`${n[0]} ${e}`)})),e.removeClass("ymq-btn-progress")):ymqJq.post(`${t.prefix_url}discount${t.suffix_url}`,{data:t.ajaxDdata,currency:Shopify.currency,shop:t.config.shop,token:t.config.token,timestamp:t.config.timestamp,customer_id:t.config.customer_id}).done((function(i){ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-success-info").show();var e="";i.data>0&&(e=`-${t.config.formatMoney(i.data*Shopify.currency.rate/100)}`),ymqJq(this).find(".ymq-discount-success-code").html(`${t.ajaxDdata.code} ${e}`)})),t.discountCode=t.ajaxDdata.code,e.removeClass("ymq-btn-progress"),t.discount_price=i.data*Shopify.currency.rate,t.config.ymqHook("ymqDiscountClick_a")})).fail((function(i){ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-input").addClass("ymq-discount-input-error"),ymqJq(this).find(".ymq-discount-error-info").html(t.config.util.getValue(t.config.ymq_option_branding.lan,"discount_error1","Enter a valid discount code")),ymqJq(this).find(".ymq-discount-success-info").hide()})),e.removeClass("ymq-btn-progress"),t.cartPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){ymqJq(this).removeClass("ymq-text-decoration").next(".ymq_cart_discount_price").remove()}))}))}))}))})).fail((function(t){}))})),ymqJq(document).on("click",".ymq-svg-close",(function(){ymqJq(".ymq-discount").each((function(){ymqJq(this).find(".ymq-discount-input").val("").trigger("keyup"),ymqJq(this).find(".ymq-discount-success-info").hide()})),t.ajaxDdata.code="",t.discountCode="",ymqJq.ajax({type:"GET",url:`https://${window.location.host}/discount/SLIDECART_REMOVE_DISCOUNT`}).done((function(e){fetch("/cart.js",{method:"GET"}).then((t=>t.json())).then((e=>{t.replaceDomPrice(e)}))})).fail((function(t){})),t.cartPriceClass.forEach((function(t){ymqJq(`.${t}`).each((function(){ymqJq(this).removeClass("ymq-text-decoration").next(".ymq_cart_discount_price").remove()}))}))}))),t}buildDiscountDom(){var t=this;if(t.config.show_discount&&ymqJq(".ymq-discount").length<=0){var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"discount-before","");if(""!=e&&ymqJq(e).length>0)ymqJq(e).length>1?ymqJq(e).first().before(t.config.discount_html):ymqJq(e).before(t.config.discount_html);else{var i=null;ymqJq(t.config.cart_form_class).children().each((function(){ymqJq(this).find(".ymq_cart_total_price").length>=1&&(i=ymqJq(this))})),null==i&&(i=ymqJq(t.config.cart_form_class).children().last()),i&&i.before(t.config.discount_html)}}return t}static getInstance(){return this.instance||(this.instance=new t),this.instance}},YmqCurrency=class t{constructor(){var t=this;t.instance=null,t.util=Util.getInstance(),t.init()}static getInstance(){return this.instance||(this.instance=new t),this.instance}initMemberVariables(){var t=this;t.moneyFormats={USD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} USD"},EUR:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} EUR"},GBP:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} GBP"},CAD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} CAD"},ALL:{money_format:"Lek {{amount}}",money_with_currency_format:"Lek {{amount}} ALL"},DZD:{money_format:"DA {{amount}}",money_with_currency_format:"DA {{amount}} DZD"},AOA:{money_format:"Kz{{amount}}",money_with_currency_format:"Kz{{amount}} AOA"},ARS:{money_format:"${{amount_with_comma_separator}}",money_with_currency_format:"${{amount_with_comma_separator}} ARS"},AMD:{money_format:"{{amount}} AMD",money_with_currency_format:"{{amount}} AMD"},AWG:{money_format:"Afl{{amount}}",money_with_currency_format:"Afl{{amount}} AWG"},AUD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} AUD"},BBD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} Bds"},AZN:{money_format:"m.{{amount}}",money_with_currency_format:"m.{{amount}} AZN"},BDT:{money_format:"Tk {{amount}}",money_with_currency_format:"Tk {{amount}} BDT"},BSD:{money_format:"BS${{amount}}",money_with_currency_format:"BS${{amount}} BSD"},BHD:{money_format:"{{amount}}0 BD",money_with_currency_format:"{{amount}}0 BHD"},BYR:{money_format:"Br {{amount}}",money_with_currency_format:"Br {{amount}} BYR"},BZD:{money_format:"BZ${{amount}}",money_with_currency_format:"BZ${{amount}} BZD"},BTN:{money_format:"Nu {{amount}}",money_with_currency_format:"Nu {{amount}} BTN"},BAM:{money_format:"KM {{amount_with_comma_separator}}",money_with_currency_format:"KM {{amount_with_comma_separator}} BAM"},BRL:{money_format:"R$ {{amount_with_comma_separator}}",money_with_currency_format:"R$ {{amount_with_comma_separator}} BRL"},BOB:{money_format:"Bs{{amount_with_comma_separator}}",money_with_currency_format:"Bs{{amount_with_comma_separator}} BOB"},BWP:{money_format:"P{{amount}}",money_with_currency_format:"P{{amount}} BWP"},BND:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} BND"},BGN:{money_format:"{{amount}} ",money_with_currency_format:"{{amount}}  BGN"},MMK:{money_format:"K{{amount}}",money_with_currency_format:"K{{amount}} MMK"},KHR:{money_format:"KHR{{amount}}",money_with_currency_format:"KHR{{amount}}"},KYD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} KYD"},XAF:{money_format:"FCFA{{amount}}",money_with_currency_format:"FCFA{{amount}} XAF"},CLP:{money_format:"${{amount_no_decimals}}",money_with_currency_format:"${{amount_no_decimals}} CLP"},CNY:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} CNY"},COP:{money_format:"${{amount_with_comma_separator}}",money_with_currency_format:"${{amount_with_comma_separator}} COP"},CRC:{money_format:" {{amount_with_comma_separator}}",money_with_currency_format:" {{amount_with_comma_separator}} CRC"},HRK:{money_format:"{{amount_with_comma_separator}} kn",money_with_currency_format:"{{amount_with_comma_separator}} kn HRK"},CZK:{money_format:"{{amount_with_comma_separator}} K",money_with_currency_format:"{{amount_with_comma_separator}} K"},DKK:{money_format:"{{amount_with_comma_separator}}",money_with_currency_format:"kr.{{amount_with_comma_separator}}"},DOP:{money_format:"RD$ {{amount}}",money_with_currency_format:"RD$ {{amount}}"},XCD:{money_format:"${{amount}}",money_with_currency_format:"EC${{amount}}"},EGP:{money_format:"LE {{amount}}",money_with_currency_format:"LE {{amount}} EGP"},ETB:{money_format:"Br{{amount}}",money_with_currency_format:"Br{{amount}} ETB"},XPF:{money_format:"{{amount_no_decimals_with_comma_separator}} XPF",money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} XPF"},FJD:{money_format:"${{amount}}",money_with_currency_format:"FJ${{amount}}"},GMD:{money_format:"D {{amount}}",money_with_currency_format:"D {{amount}} GMD"},GHS:{money_format:"GH{{amount}}",money_with_currency_format:"GH{{amount}}"},GTQ:{money_format:"Q{{amount}}",money_with_currency_format:"{{amount}} GTQ"},GYD:{money_format:"G${{amount}}",money_with_currency_format:"${{amount}} GYD"},GEL:{money_format:"{{amount}} GEL",money_with_currency_format:"{{amount}} GEL"},HNL:{money_format:"L {{amount}}",money_with_currency_format:"L {{amount}} HNL"},HKD:{money_format:"${{amount}}",money_with_currency_format:"HK${{amount}}"},HUF:{money_format:"{{amount_no_decimals_with_comma_separator}}",money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} Ft"},ISK:{money_format:"{{amount_no_decimals}} kr",money_with_currency_format:"{{amount_no_decimals}} kr ISK"},INR:{money_format:"Rs. {{amount}}",money_with_currency_format:"Rs. {{amount}}"},IDR:{money_format:"{{amount_with_comma_separator}}",money_with_currency_format:"Rp {{amount_with_comma_separator}}"},ILS:{money_format:"{{amount}} NIS",money_with_currency_format:"{{amount}} NIS"},JMD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} JMD"},JPY:{money_format:"{{amount_no_decimals}}",money_with_currency_format:"{{amount_no_decimals}} JPY"},JEP:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} JEP"},JOD:{money_format:"{{amount}}0 JD",money_with_currency_format:"{{amount}}0 JOD"},KZT:{money_format:"{{amount}} KZT",money_with_currency_format:"{{amount}} KZT"},KES:{money_format:"KSh{{amount}}",money_with_currency_format:"KSh{{amount}}"},KWD:{money_format:"{{amount}}0 KD",money_with_currency_format:"{{amount}}0 KWD"},KGS:{money_format:"{{amount}}",money_with_currency_format:"{{amount}}"},LVL:{money_format:"Ls {{amount}}",money_with_currency_format:"Ls {{amount}} LVL"},LBP:{money_format:"L{{amount}}",money_with_currency_format:"L{{amount}} LBP"},LTL:{money_format:"{{amount}} Lt",money_with_currency_format:"{{amount}} Lt"},MGA:{money_format:"Ar {{amount}}",money_with_currency_format:"Ar {{amount}} MGA"},MKD:{money_format:" {{amount}}",money_with_currency_format:" {{amount}} MKD"},MOP:{money_format:"MOP${{amount}}",money_with_currency_format:"MOP${{amount}}"},MVR:{money_format:"Rf{{amount}}",money_with_currency_format:"Rf{{amount}} MRf"},MXN:{money_format:"$ {{amount}}",money_with_currency_format:"$ {{amount}} MXN"},MYR:{money_format:"RM{{amount}} MYR",money_with_currency_format:"RM{{amount}} MYR"},MUR:{money_format:"Rs {{amount}}",money_with_currency_format:"Rs {{amount}} MUR"},MDL:{money_format:"{{amount}} MDL",money_with_currency_format:"{{amount}} MDL"},MAD:{money_format:"{{amount}} dh",money_with_currency_format:"Dh {{amount}} MAD"},MNT:{money_format:"{{amount_no_decimals}} ",money_with_currency_format:"{{amount_no_decimals}} MNT"},MZN:{money_format:"{{amount}} Mt",money_with_currency_format:"Mt {{amount}} MZN"},NAD:{money_format:"N${{amount}}",money_with_currency_format:"N${{amount}} NAD"},NPR:{money_format:"Rs{{amount}}",money_with_currency_format:"Rs{{amount}} NPR"},ANG:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} NA"},NZD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} NZD"},NIO:{money_format:"C${{amount}}",money_with_currency_format:"C${{amount}} NIO"},NGN:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} NGN"},NOK:{money_format:"kr {{amount_with_comma_separator}}",money_with_currency_format:"kr {{amount_with_comma_separator}} NOK"},OMR:{money_format:"{{amount_with_comma_separator}} OMR",money_with_currency_format:"{{amount_with_comma_separator}} OMR"},PKR:{money_format:"Rs.{{amount}}",money_with_currency_format:"Rs.{{amount}} PKR"},PGK:{money_format:"K {{amount}}",money_with_currency_format:"K {{amount}} PGK"},PYG:{money_format:"Gs. {{amount_no_decimals_with_comma_separator}}",money_with_currency_format:"Gs. {{amount_no_decimals_with_comma_separator}} PYG"},PEN:{money_format:"S/. {{amount}}",money_with_currency_format:"S/. {{amount}} PEN"},PHP:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} PHP"},PLN:{money_format:"{{amount_with_comma_separator}} zl",money_with_currency_format:"{{amount_with_comma_separator}} zl PLN"},QAR:{money_format:"QAR {{amount_with_comma_separator}}",money_with_currency_format:"QAR {{amount_with_comma_separator}}"},RON:{money_format:"{{amount_with_comma_separator}} lei",money_with_currency_format:"{{amount_with_comma_separator}} lei RON"},RUB:{money_format:"{{amount_with_comma_separator}}",money_with_currency_format:"{{amount_with_comma_separator}} RUB"},RWF:{money_format:"{{amount_no_decimals}} RF",money_with_currency_format:"{{amount_no_decimals}} RWF"},WST:{money_format:"WS$ {{amount}}",money_with_currency_format:"WS$ {{amount}} WST"},SAR:{money_format:"{{amount}} SR",money_with_currency_format:"{{amount}} SAR"},STD:{money_format:"Db {{amount}}",money_with_currency_format:"Db {{amount}} STD"},RSD:{money_format:"{{amount}} RSD",money_with_currency_format:"{{amount}} RSD"},SCR:{money_format:"Rs {{amount}}",money_with_currency_format:"Rs {{amount}} SCR"},SGD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} SGD"},SYP:{money_format:"S{{amount}}",money_with_currency_format:"S{{amount}} SYP"},ZAR:{money_format:"R {{amount}}",money_with_currency_format:"R {{amount}} ZAR"},KRW:{money_format:"{{amount_no_decimals}}",money_with_currency_format:"{{amount_no_decimals}} KRW"},LKR:{money_format:"Rs {{amount}}",money_with_currency_format:"Rs {{amount}} LKR"},SEK:{money_format:"{{amount_no_decimals}} kr",money_with_currency_format:"{{amount_no_decimals}} kr SEK"},CHF:{money_format:"SFr. {{amount}}",money_with_currency_format:"SFr. {{amount}} CHF"},TWD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} TWD"},THB:{money_format:"{{amount}} ",money_with_currency_format:"{{amount}}  THB"},TZS:{money_format:"{{amount}} TZS",money_with_currency_format:"{{amount}} TZS"},TTD:{money_format:"${{amount}}",money_with_currency_format:"${{amount}} TTD"},TND:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} DT"},TRY:{money_format:"{{amount}}TL",money_with_currency_format:"{{amount}}TL"},UGX:{money_format:"Ush {{amount_no_decimals}}",money_with_currency_format:"Ush {{amount_no_decimals}} UGX"},UAH:{money_format:"{{amount}}",money_with_currency_format:"{{amount}} UAH"},AED:{money_format:"Dhs. {{amount}}",money_with_currency_format:"Dhs. {{amount}} AED"},UYU:{money_format:"${{amount_with_comma_separator}}",money_with_currency_format:"${{amount_with_comma_separator}} UYU"},VUV:{money_format:"${{amount}}",money_with_currency_format:"${{amount}}VT"},VEF:{money_format:"Bs. {{amount_with_comma_separator}}",money_with_currency_format:"Bs. {{amount_with_comma_separator}} VEF"},VND:{money_format:"{{amount_no_decimals_with_comma_separator}}",money_with_currency_format:"{{amount_no_decimals_with_comma_separator}} VND"},XBT:{money_format:"{{amount_no_decimals}} BTC",money_with_currency_format:"{{amount_no_decimals}} BTC"},XOF:{money_format:"CFA{{amount}}",money_with_currency_format:"CFA{{amount}} XOF"},ZMW:{money_format:"K{{amount_no_decimals_with_comma_separator}}",money_with_currency_format:"ZMW{{amount_no_decimals_with_comma_separator}}"}};var e=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"money-formats","");if(""!=e)try{e=JSON.parse(e),Object.keys(e).forEach((function(i){t.moneyFormats[i]=e[i]}))}catch(t){console.error(t)}return t}init(){this.initMemberVariables()}formatMoney(t,e){var i=this;t*=100;var n=i.moneyFormats[e][i.util.money_format];n||(n="{{amount}}"),"string"==typeof t&&(t=t.replace(".",""));var a="",o=/\{\{\s*(\w+)\s*\}\}/,r=n||"${{amount}}";function c(t,e){return void 0===t?e:t}function s(t,e,n,a){if(e=c(e,2),n=c(n,","),a=c(a,"."),isNaN(t)||null==t)return 0;var o=(t=(t/100).toFixed(e)).split("."),r=o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n),s=o[1]?a+o[1]:"";return 1==Number(i.util.getValue(window.ymq_option.ymq_option_branding.extra,"cents-up","0"))&&(s=`<sup>${s}</sup>`),r+s}switch(r.match(o)[1]){case"amount":a=s(t,2);break;case"amount_no_decimals":a=s(t,0);break;case"amount_with_comma_separator":a=s(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=s(t,0,".",",")}return r.replace(o,a)}},Config=class Config{constructor(){var t=this;t.instance=null,t.util=Util.getInstance(),t.init()}init(){var t=this;String.prototype.endWith=function(t){var e=this.length-t.length;return e>=0&&this.lastIndexOf(t)==e},t.Shopify={},t.money_format="",t.form_box="",t.onetimetag="",t.cart_form='form[action*="/cart"]',t.discount_box="#ymq_discount_box",t.styleDomId="#ymq-jsstyle",t.add_to_cart="ymq-add-to-cart-button",t.buy_id_now="ymq-buy-it-now-button",t.quantity_box="ymq-quantity-box",t.quantity_input="ymq-quantity-input",t.quantity_add="ymq-quantity-add",t.quantity_cut="ymq-quantity-cut",t.quantity_change="ymq-quantity-change",t.listen_add_to_cart_v=0,t.closeSvg='<svg class="ymq-close-icon ymq-icon" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1889"><path d="M546.942134 511.818772l327.456957-326.128977c9.617355-9.577423 9.648071-25.135361 0.070648-34.751692-9.577423-9.617355-25.137409-9.647048-34.750668-0.070648L512.119795 477.137729 184.520518 150.868479c-9.616331-9.577423-25.176316-9.545683-34.751692 0.070648-9.577423 9.616331-9.545683 25.174268 0.070648 34.751692l327.457981 326.127953-327.457981 326.128978c-9.616331 9.577423-9.647048 25.135361-0.070648 34.751692a24.496456 24.496456 0 0 0 17.41117 7.231702 24.500552 24.500552 0 0 0 17.340522-7.162078L512.119795 546.499816l327.599276 326.26925a24.492361 24.492361 0 0 0 17.340522 7.162078 24.5026 24.5026 0 0 0 17.41117-7.231702c9.577423-9.617355 9.545683-25.175292-0.070648-34.751692L546.942134 511.818772z" p-id="1890"></path></svg>',t.discount_html=`\n            <div class="ymq-discount">\n                <div class="ymq-discount-action">\n                    <div class="ymq-discount-active">\n                        <input placeholder="${window.ymq_option.ymq_option_branding.lan.discount_code}" class="ymq-discount-input" type="text" name="reduction_code">\n                        <div class="ymq-discount-apply ymq-discount-apply-disable">${window.ymq_option.ymq_option_branding.lan.application}</div>\n                    </div>\n                    <div class="ymq-discount-info">\n                        <div class="ymq-discount-success-info" style="display: none;">\n                            <svg class="ymq-svg-coupon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path></svg>\n                            <span class="ymq-discount-success-code"></span>\n                            <svg class="ymq-svg-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M1.5 1.5l10.05 10.05M11.5 1.5L1.45 11.55" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round"></path></svg>\n                        </div>\n                        <div class="ymq-discount-error-info"></div>\n                    </div>\n                </div>\n                \n            </div>\n            <div style="clear: both;"></div>\n        `,t.option_value_split=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"option_value_split",","),t.max_num=9999999999999,t.min_quantity=0,t.max_quantity=t.max_num,t.real_max_quantity=t.max_num,t.upload_ajax_list={},t.qty_split=" * ",t.real_time_upload=window.ymq_option.real_time_upload,t.into_ajax_validate=!0,t.ignore_main_product=!1,t.hide_variant_options=!1,t.multiple_option_type=[7,6,16,8,21],t.ymq_extra_0={},t.hasError=!1,t.multipleTypeArray=[6,7,8],t.emailRe=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.urlRe=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/,t.numberRe=/^\-?[0-9]+\.?[0-9]*$/,t.ymq_variant_id="ymq-variant-id",t.ymq_option_title="ymq-option-title",t.basImgUrl="http://ymq-shopify.oss-us-east-1.aliyuncs.com/",t.img_suffix="?x-oss-process=image/resize,w_100/quality,q_80",t.please="please",t.box_prefix="option-box-",t.attrib_prefix="ymq-attrib-",t.attrib_item_prefix="ymq-attrib-item-",t.optionHtml="",t.selectedYmqOption={},t.product="",t.ymq_shopify_options="",t.ymq_option_data="",t.ymq_option_condition="",t.ymq_option_template="",t.ymq_option_template_condition="",t.ymq_option_settings="",t.ymq_option_branding="",t.ymq_has_only_default_variant="",t.variantData="",t.tem_prefix="tem",t.properties="ymq",t.bind_variant_on_add_to_cart=!1,1==t.util.getValue(window.ymq_option.ymq_option_branding.extra,"bind-variant-type",1)&&(t.bind_variant_on_add_to_cart=!0),t.wholesale_is_variant=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"wholesale-is-variant",0),t.cart_price_factor=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"cart_price_factor",1),t.hightsize=1024*Number(t.util.getValue(window.ymq_option.ymq_option_branding.extra,"hightsize",10))*1024,t.ymq_price_class="ymq-price-span",t.wholesale_pricing=[],t.initCurrencyApp(),t.checkout_timeout=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"checkout-timeout","5"),t.ymq_enLang={name:"en",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["SU","MO","TU","WE","TH","FR","SA"],times:["Hour","Minute","Second"],timetxt:["Time","Start Time","End Time"],backtxt:"Back",clear:"Clear",today:"Now",yes:"Confirm",close:"Close"},t.ymq_jedateblue={bgcolor:"#275efe",color:"#ffffff",pnColor:"#bff3ff"},t.ymq_jedategreen={bgcolor:"#00A680",pnColor:"#00DDAA"},t.ymq_jedatered={bgcolor:"#D91600",pnColor:"#FF6653"},t.initFormat()}formClass(t){var e=this.form_class_name.split(","),i=[];return e.forEach((e=>{""!=e.trim()&&i.push(`${e} ${t}`)})),i.join(",")}getFileKey(t,e){return`shopify/option/uploads/${ymq_option.shop.replace(".shopify.com","")}/${e}/${t}`}uuid(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}creatYmqHiddenInput(t,e=!1){return"properties[]"==t?"":e?`<input class="ymq-hidden-input" value="" type="hidden" name="properties[${t}]">`:`<input class="ymq-hidden-input" value="" type="hidden" name="${t}">`}initMetaFiles(){window.metaFiles.convertAll=()=>{try{var t=localStorage.currentCurrency,e=Shopify.currency.active;window.hasOwnProperty("ymq_user_currencies_data")||(window.ymq_user_currencies_data={},window.metaFiles.user_currencies_data.forEach((t=>{window.ymq_user_currencies_data[t.code]=t}))),etranslateCurrency(window.ymq_user_currencies_data[e],window.ymq_user_currencies_data[t])}catch(t){}}}initCurrencyApp(){var t=this;t.currencyAppEnum={ymq:{install:"typeof window.ymq_currency == 'object'",load:'typeof window.YmqCurrencyInstance != "undefined"',do:"window.YmqCurrencyInstance.convertAll()",beforedo:"ymqJq('.'+that.ymq_price_class).addClass('money')",status:"true",format:"",init:"\n                        // that.NumberFormatNew.moneyFormats[that.Shopify.currency.active] = DoublyGlobalCurrency.moneyFormats[that.Shopify.currency.active];\n                        ymqJq('.'+that.ymq_price_class).each(function(){\n                            ymqJq(this).html(that.NumberFormatNew.formatMoney(ymqJq(this).data('ymq-original-money'),that.Shopify.currency.active))\n                        })\n                    "},doubly:{install:"document.documentElement.innerHTML.match(/doubly.js/)",load:'typeof(DoublyGlobalCurrency) != "undefined"',do:'DoublyGlobalCurrency.convertAll(ymqJq("[name=doubly-currencies]").val())',beforedo:"ymqJq('.'+that.ymq_price_class).addClass('money')",status:"true",format:"",init:"\n                        // that.NumberFormatNew.moneyFormats[that.Shopify.currency.active] = DoublyGlobalCurrency.moneyFormats[that.Shopify.currency.active];\n                        ymqJq('.'+that.ymq_price_class).each(function(){\n                            ymqJq(this).html(that.NumberFormatNew.formatMoney(ymqJq(this).data('ymq-original-money'),that.Shopify.currency.active))\n                        })\n                    "},mlveda:{install:"document.documentElement.innerHTML.match(/multiCurrencyPricing/)",load:'typeof ACSCurrency !== "undefined" && typeof ACSCurrency.moneyFormats !== "undefined"',do:"mlvedaload();",beforedo:"ymqJq('.'+that.ymq_price_class).addClass('money')",status:"true",format:"ACSCurrency.formatMoney(money*100,format)",init:"\n                        that.NumberFormatNew.moneyFormats[that.Shopify.currency.active] = ACSCurrency.moneyFormats[that.Shopify.currency.active];\n                        ymqJq('.'+that.ymq_price_class).each(function(){\n                            ymqJq(this).html(that.NumberFormatNew.formatMoney(ymqJq(this).data('ymq-original-money'),that.Shopify.currency.active))\n                        })\n                    "},localiser:{install:"typeof window.metaFiles == 'object'",load:"true",do:"window.metaFiles.convertAll();",beforedo:"ymqJq('.'+that.ymq_price_class).addClass('etrans-money')",status:"window.metaFiles.status == 1",format:"",init:"\n                        that.initMetaFiles();\n                        ymqJq('.'+that.ymq_price_class).each(function(){\n                            ymqJq(this).html(that.NumberFormatNew.formatMoney(ymqJq(this).data('ymq-original-money'),that.Shopify.currency.active))\n                        })\n                    "},bucks:{install:"typeof window.bucksCC == 'object'",load:"bucksCC.rendered == true",do:"((window || {}).bucksCC || {}).reConvert && bucksCC.reConvert()",beforedo:"ymqJq('.'+that.ymq_price_class).addClass('money')",status:"bucksCC.config.active == true",format:"",init:"\n                        that.initMetaFiles();\n                        ymqJq('.'+that.ymq_price_class).each(function(){\n                            ymqJq(this).html(that.NumberFormatNew.formatMoney(ymqJq(this).data('ymq-original-money'),that.Shopify.currency.active))\n                        })\n                    "}};var e=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-install","true"),i=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-load",""),n=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-do","true"),a=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-beforedo",""),o=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-status","true"),r=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-format",""),c=t.util.getValue(window.ymq_option.ymq_option_branding.extra,"currency-init","");return""!=e&&""!=i&&""!=n&&""!=o&&(t.currencyAppEnum={theme:{install:e,load:i,do:n,beforedo:a,status:o,format:r,init:c}}),t.currencyAppObj={},ymqJq.isEmptyObject(t.currencyAppObj)&&Object.keys(t.currencyAppEnum).forEach((function(e){ymqJq.isEmptyObject(t.currencyAppObj)&&t.currencyAppBool(t.currencyAppEnum[e].install)&&ymqOptionIntervalResult(666,500,(function(){return!ymqJq.isEmptyObject(t.currencyAppObj)||(!t.currencyAppBool(t.currencyAppEnum[e].status,!0)||!!t.currencyAppBool(t.currencyAppEnum[e].load)&&(t.currencyAppObj=t.currencyAppEnum[e],t.currencyAppBool(t.currencyAppEnum[e].init),t.doAppCurrency(),!0))}))})),t}currencyAppBool(srt,defaults=!1){var that=this;try{return eval(srt)}catch(t){return defaults}return defaults}doAppCurrency(){var that=this;try{ymqJq.isEmptyObject(that.currencyAppObj)||(""!=that.currencyAppObj.beforedo&&that.currencyAppBool(that.currencyAppObj.beforedo),eval(that.currencyAppObj.do))}catch(t){console.error(t)}return that}intervalResult(t,e,i,n){"function"==typeof t?(n=e,i=t,e=1e3,t=20):"function"==typeof e&&(n=i,i=e,e=1e3),"function"!=typeof i&&(i=function(){return!1});var a=0,o=setInterval((function(){++a>t||i(a)?clearInterval(o):"function"==typeof n&&n()}),e)}initFormat(){var t=this;return t.Shopify=Shopify,t.NumberFormat=new Intl.NumberFormat("en-US",{style:"currency",currency:t.Shopify.currency.active}),t.NumberFormatNew=YmqCurrency.getInstance(),t.initMinMax(),t}setMinMax(t,e=!1,i=!1){var n=this;""==t.min?n.min_quantity=0:(e&&(n.extra_1=!1),n.min_quantity=Number(t.min)),""==t.max?n.max_quantity=n.max_num:(e&&(n.extra_1=!1),t.max=t.max-window.ymq_option.product_qty_in_cart,window.ymq_option.product_qty_in_cart=0,t.max<=0?(window.ymq_option.theme_ajax_cart&&i&&(window.ymq_option.theme_ajax_cart=!1,n.productInstance.isShowBuyItNow().hideShopifyDomAndRegisterAddCartEvent().disabledJqEvent()),window.ymq_option.theme_ajax_cart=!1,n.real_max_quantity=t.max,n.max_quantity=n.min_quantity):(t.max<n.min_quantity&&(n.min_quantity=t.max),n.real_max_quantity=Number(t.max),n.max_quantity=Number(t.max)))}initMinMax(){var t=this;if(t.extra_1=!0,window.ymq_option.hasOwnProperty("ymq_extra_0")&&(t.ymq_extra_0=window.ymq_option.ymq_extra_0,"product"==window.ymq_option.page&&window.ymq_option.product.hasOwnProperty("id")&&window.ymq_option.ymq_option_branding.extra.plan>1&&t.ymq_extra_0.hasOwnProperty(window.ymq_option.product.id.toString()))){var e=t.ymq_extra_0[window.ymq_option.product.id.toString()];t.setMinMax(e,!0)}if(t.extra_1)try{window.ymq_option.hasOwnProperty("ymq_extra_1")&&(t.ymq_extra_1=window.ymq_option.ymq_extra_1.item,Object.keys(t.ymq_extra_1).some((e=>{var i=t.ymq_extra_1[e];if(1==i.status){if(1==i.need_product)return t.setMinMax(i),!0;if(window.ymq_option.product.hasOwnProperty("id")){var n=Object.keys(i.products).map((t=>Number(t)));if(-1!=ymqJq.inArray(window.ymq_option.product.id,n))return t.setMinMax(i),!0}if(window.ymq_option.hasOwnProperty("product_collections")){var a=Object.keys(ymq_option.product_collections).map((t=>Number(t))),o=Object.keys(i.collections).map((t=>Number(t)));if(a.filter((t=>o.indexOf(t)>-1)).length>0)return t.setMinMax(i),!0}if(window.ymq_option.product.hasOwnProperty("tags")){var r=window.ymq_option.product.tags,c=i.product_tags.split(",");if(r.filter((t=>c.indexOf(t)>-1)).length>0)return t.setMinMax(i),!0}}})))}catch(t){}}getMinMaxFunctionForCart(t,e,i,n){var a=this;try{if(window.ymq_option.ymq_option_branding.extra.plan>1){var o=a.getMinMaxFunction(t,e);0!=o&&(a.cartInstance.needUpdateQty.push({id:i,quantity:o}),a.cartInstance.needUpdateQtyNew[n]=o)}}catch(t){console.log(t)}}getMinMaxFunction(t,e){return""!=t.max&&e>t.max?t.max:""!=t.min&&e<t.min&&t.min}getMinMaxByProduct(t,e,i,n){var a=this;if(t&&a.ymq_extra_0.hasOwnProperty(t.toString())){var o=a.ymq_extra_0[t.toString()];a.getMinMaxFunctionForCart(o,e,i,n)}}doFormatWithWrappeStr(t,e,i,n=0,a=!0,o=!0){if(o)var r=this.doFormat(i,n,a);else r=this.doFormatWithoutRate(i,n,a);return""!=r&&(r=`${t}${r}${e}`),r}formatMoneyYmq(t,e){var i="";try{i=this.NumberFormatNew.formatMoney(t,e)}catch(e){i=this.NumberFormat.format(t)}return i}formatMoney(money,addClass=!0,currency=this.Shopify.currency.active){var that=this,negative=!1,res="";if(that.money_original=money,money<0&&(negative=!0,money=Math.abs(money)),!ymqJq.isEmptyObject(that.currencyAppObj)&&that.currencyAppObj.hasOwnProperty("format")&&""!=that.currencyAppObj.format){var format=that.NumberFormatNew.moneyFormats[currency][that.util.money_format];format||(format="{{amount}}");try{res=eval(that.currencyAppObj.format)}catch(t){res=that.formatMoneyYmq(money,currency)}}else res=that.formatMoneyYmq(money,currency);return res=negative?`-${res}`:res,addClass&&(res=`<span data-ymq-money="${that.money_original}" data-ymq-original-money="${that.money_original}" class="${that.ymq_price_class}">${res}</span>`),res}doFormat(t,e=0,i=!0){var n=this,a="";return n.money_original=t,t<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(t=0),0!=t&&(a=n.formatMoney(t*n.Shopify.currency.rate,i),1==Number(e)&&(a+=n.onetimetag),n.doAppCurrency(),setTimeout((()=>{n.doAppCurrency()}),1),setTimeout((()=>{n.doAppCurrency()}),50)),a}doFormatWithoutRate(t,e=!0,i=!1){var n=this,a="";return n.money_original=t,t<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(t=0),0!=t?(a=n.formatMoney(t,e),n.doAppCurrency(),setTimeout((()=>{n.doAppCurrency()}),1),setTimeout((()=>{n.doAppCurrency()}),50)):i&&(a=n.formatMoney(t,e)),a}getPriceWithRate(t){return t*this.Shopify.currency.rate}getSelectButtonPrice(t,e){var i=this,n=i.util.getValue(i.ymq_option_branding.extra,"price-value","3,7,15,16");n=n.split(",");var a=i.util.getValue(i.ymq_option_branding.lan,"price-split","+");return n.indexOf(e.toString())>-1||n.indexOf(Number(e))>-1?0!=t?i.doFormatWithWrappeStr(` <span class="ymq-price-in-option-value"> ${t>0?'<span class="ymq-price-split">&nbsp;'+a+"</span>":"&nbsp;"} `,"</span>",t):' <span class="ymq-price-in-option-value"></span>':""}ymqHook(key){var that=this,hookCode=that.util.getValue(that.ymq_option_branding.extra,key,"");if(""!=hookCode)try{eval(hookCode)}catch(t){console.log(t)}}static getInstance(t,e){return this.instance||(this.instance=new Config),this.instance[t]=e,this.instance}},Html=class t{constructor(t){var e=this;e.instance=null,e.initJson=t,e.config=Config.getInstance("htmlInstance",e),e.init()}initMemberVariables(){var t=this;t.optionHtml="",t.selectedYmqOption={},t.isShopify=!1,t.json={},t.validate=[],t.tool_text="",t.alert_text="",t.help_text="",t.variant_id=0,t.conditionJson={},t.needAddLabel=[],t.config.hasQuantity=!1,t.config.quantity_is_fix_type=!1,t.config.quantity_has_value=!0,t.config.qty_input_text=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-input-text","Qty: "),t.config.qty_inline=t.config.util.getValue(t.config.ymq_option_branding.extra,"qty-inline","3,4,5,6,7,8,15,16").split(","),t.config.multiple_select_qty_with_name=0!=Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"qty-with-name",0))}init(){this.initMemberVariables()}needHide(t){var e=this,i=!0;if(null===t)return!1;try{t.hasOwnProperty("class")&&(-1!=t.class.indexOf("ymq_ignore_main_product")&&(i=!1,e.config.ignore_main_product=!0),-1!=t.class.indexOf("ymq_ignore_main_product_and_hide_variant_option")&&(i=!1,e.config.ignore_main_product=!0,e.config.hide_variant_options=!0))}catch(t){i=!0}return i}buildtHtml(){var t=this;return Object.keys(t.json).forEach((function(e){if(t.needHide(t.json[e]))switch(t.beforeCreat(e),t.selectedYmqOption.type.toString()){case"1":t.creatField().doCreatOptionHtml();break;case"2":t.creatArea().doCreatOptionHtml();break;case"3":t.creatSelect().doCreatOptionHtml().initDropdown();break;case"20":t.creatSelect("single",!0).doCreatOptionHtml().initDropdown();break;case"4":t.creatRadio().doCreatOptionHtml();break;case"15":t.creatRadioButton().doCreatOptionHtml();break;case"5":t.creatCanvas().doCreatOptionHtml();break;case"6":t.creatCheckbox().doCreatOptionHtml();break;case"16":t.creatCheckboxButton().doCreatOptionHtml();break;case"7":t.creatSelect("multiple").doCreatOptionHtml().initDropdown();break;case"21":t.creatSelect("multiple",!0).doCreatOptionHtml().initDropdown();break;case"8":t.creatCanvas("checkbox").doCreatOptionHtml();break;case"9":case"10":t.creatDate().doCreatOptionHtml().initData();break;case"11":t.creatCustomeText().doCreatOptionHtml();break;case"12":t.creatFile().doCreatOptionHtml().initFile();break;case"13":t.creatSwitch().doCreatOptionHtml();break;case"14":t.creatColorPick().doCreatOptionHtml().initColpick();break;case"17":t.creatLayout().doCreatOptionHtml();break;case"18":t.creatFixedQuantity().doCreatOptionHtml();break;case"19":t.creatFixedQuantity(19).doCreatOptionHtml();break;case"100":try{(0==t.config.ymq_option_template_sort||Array.isArray(t.config.ymq_option_template_sort)&&t.selectedYmqOption.id&&t.config.ymq_option_template_sort.includes(t.selectedYmqOption.id.toString()))&&t.setJson(t.config.ymq_option_template[t.config.tem_prefix+t.selectedYmqOption.id],t.config.ymq_option_template_condition[t.config.tem_prefix+t.selectedYmqOption.id]).buildtHtml().setJson(t.config.ymq_option_data,t.config.ymq_option_condition)}catch(e){console.error(e),t.setJson(t.config.ymq_option_template[t.config.tem_prefix+t.selectedYmqOption.id],t.config.ymq_option_template_condition[t.config.tem_prefix+t.selectedYmqOption.id]).buildtHtml().setJson(t.config.ymq_option_data,t.config.ymq_option_condition)}}})),t}validateIsHasLabel(){return this.selectedYmqOption.label,this}beforeCreat(t){var e=this;if(e.selectedYmqOption=e.json[t],this.selectedYmqOption.hasOwnProperty("isShopify")?e.isShopify=!0:e.isShopify=!1,!e.isShopify)if(window.ymq_option.real_time_upload&&e.selectedYmqOption.hasOwnProperty("type")&&"12"==e.selectedYmqOption.type){(i=ymqJq(`.ymq-options-box[data-name="${e.config.util.reHtmlSpecialChars(e.creatName(null,!0))}"]`)).length>=1&&-1==ymqJq.inArray(e.selectedYmqOption.label,e.needAddLabel)&&(e.needAddLabel.push(e.selectedYmqOption.label),i.data("name",e.creatName(i.data("label")+i.data("id"),!0)))}else{var i=ymqJq(`[name="${e.config.util.reHtmlSpecialChars(e.creatName())}"]`),n=ymqJq(`[name="${e.config.util.reHtmlSpecialChars(e.creatName(null,!0))}"]`);if(i.length>=1&&-1==ymqJq.inArray(e.selectedYmqOption.label,e.needAddLabel)){e.needAddLabel.push(e.selectedYmqOption.label);var a=i.eq(0).parents(".ymq-options-box");a.data("name",e.creatName(a.data("label")+a.data("id"),!0)).attr("data-name",e.creatName(a.data("label")+a.data("id"),!0)),n.prop("name",e.creatName(a.data("label")+a.data("id"),!0)),i.each((function(){ymqJq(this).prop("name",e.creatName(a.data("label")+a.data("id")))}))}}return e.selectedQtyInput=1==Number(e.config.util.getValue(e.selectedYmqOption,"qty_input",0)),(e.isShopify||window.ymq_option.ymq_option_branding.extra.plan<2)&&(e.selectedQtyInput=!1),e.selectedQtyInputFlexClass="",-1==ymqJq.inArray(e.selectedYmqOption.type.toString(),e.config.qty_inline)&&-1==ymqJq.inArray(Number(e.selectedYmqOption.type),e.config.qty_inline)||(e.selectedQtyInputFlexClass="ymq-qty-input-item-flex"),e.validateIsHasLabel(),e.buildValidate(),e.buildTooltip(),e.buildAlert(),e.buildHelp(),e}buildValidate(){var t=this;if(t.validate=[],1==Number(t.selectedYmqOption.required)&&t.validate.push("required"),(1==Number(t.selectedYmqOption.type)&&1==Number(t.selectedYmqOption.field_type)||2==Number(t.selectedYmqOption.type))&&(t.selectedYmqOption.min_char>0&&t.validate.push("minchar:"+t.selectedYmqOption.min_char),t.selectedYmqOption.max_char>0&&t.validate.push("maxchar:"+t.selectedYmqOption.max_char)),(t.config.multiple_option_type.includes(Number(t.selectedYmqOption.type))||1==t.selectedYmqOption.qty_input||12==t.selectedYmqOption.type)&&(t.selectedYmqOption.hasOwnProperty("min_s")&&t.selectedYmqOption.min_s>0&&t.validate.push("min_s:"+t.selectedYmqOption.min_s),t.selectedYmqOption.hasOwnProperty("max_s")&&t.selectedYmqOption.max_s>0&&t.validate.push("max_s:"+t.selectedYmqOption.max_s)),1==Number(t.selectedYmqOption.type))switch(t.selectedYmqOption.field_type){case"2":t.validate.push("email");break;case"3":t.validate.push("phone");break;case"4":t.validate.push("number"),t.selectedYmqOption.min>0&&t.validate.push("numbermin:"+t.selectedYmqOption.min),t.selectedYmqOption.max>0&&t.validate.push("numbermax:"+t.selectedYmqOption.max);break;case"5":t.selectedYmqOption.min>0&&t.validate.push("numbermin:"+t.selectedYmqOption.min),t.selectedYmqOption.max>0&&t.validate.push("numbermax:"+t.selectedYmqOption.max),t.validate.push("integer");break;case"10":t.validate.push("url")}return t.validate.length>0?t.validate='data-validate="'+t.validate.join("|")+'"':t.validate="",t}buildTooltip(){var t=this;t.tool_text="",""!=t.selectedYmqOption.tooltip&&(t.tool_text=`<span class="ymq_tools ymq_tool_span"><span class="ymq_tooltip_disabled" style="display:none !important;">${t.config.util.reHtmlSpecialChars(t.selectedYmqOption.tooltip)}</span></span>`)}buildAlert(){var t=this;if(t.alert_text="",t.selectedYmqOption.hasOwnProperty("a_t1")||(t.selectedYmqOption.a_t1="",t.selectedYmqOption.a_t2="",t.selectedYmqOption.alert_text=""),t.selectedYmqOption.hasOwnProperty("alert_text")&&""!=t.selectedYmqOption.alert_text){var e="";""==!t.selectedYmqOption.a_t2&&(e=`<img class="ymq_img_alert" src="${t.selectedYmqOption.a_t2}">`),t.alert_text=`\n                    <div class="ymq_alert_box2" data-ymq-id="ymqdialogbox${t.selectedYmqOption.id}">\n                        ${e+t.selectedYmqOption.a_t1}\n                    </div>`,ymqJq("body").append(`\n                    <div id="ymqdialogbox${t.selectedYmqOption.id}" data-width="${t.selectedYmqOption.a_width}" class="ymq-modal">\n                      <span class="close-ymq-modal">\n                          &#215;\n                      </span>\n                      <div class="ymq-modal-content">\n                          ${t.selectedYmqOption.alert_text}\n                      </div>\n                    </div>\n                `)}}buildHelp(){var t=this;t.help_text="",""!=t.selectedYmqOption.help&&(t.help_text=`<div class="ymq_help_box">${t.config.util.reHtmlSpecialChars(t.selectedYmqOption.help)}</div>`)}doCreatOptionHtml(){var t=this,e="",i="",n="",a="",o="";if(null==t.selectedYmqOption)return t;var r=Number(t.config.util.getValue(this.selectedYmqOption,"hide_title",0));if([18,19].includes(Number(t.selectedYmqOption.type))&&window.ymq_option.ymq_option_branding.extra.plan<3)return t;1==Number(t.selectedYmqOption.required)&&(o="required");var c=!0;if([18,19].includes(Number(t.selectedYmqOption.type))&&ymqJq.isEmptyObject(t.selectedYmqOption.options)&&(c=!1),11!=t.selectedYmqOption.type&&17!=t.selectedYmqOption.type&&c){e=`<div ${1==r?'style="display:none;"':""} class="${t.config.ymq_option_title}"><span class="ymq_lable ${o}">${t.selectedYmqOption.label}</span>${t.alert_text}${t.tool_text}<span class="ymq_option_text_span"></span><span class="ymq_option_price_span"></span></div>`;1==Number(t.selectedYmqOption.tooltip_position)?i=t.help_text:2==Number(t.selectedYmqOption.tooltip_position)?n=t.help_text:a=t.help_text}var s="";if([12].includes(Number(t.selectedYmqOption.type))||(s=t.config.creatYmqHiddenInput(t.creatName(null,!0))),1==t.config.util.getValue(t.selectedYmqOption,"bundle_variant_type",1))var m=t.config.util.getValue(t.config.ymq_option_branding.extra,"unbundle_variant",0);else m=t.config.util.getValue(t.selectedYmqOption,"unbundle_variant",0);return this.optionHtml=`\n                <div \n                    class="ymq-options-box ymq-options-box-${this.selectedYmqOption.type} ${t.selectedQtyInput?"ymq-options-qty-box":""} ${this.isShopify?"ymq-shopify-option-box":""} ${t.config.util.getValue(t.selectedYmqOption,"class","")} ${t.config.util.getValue(t.selectedYmqOption,"column_width","")}" \n                    id="${t.config.box_prefix}${this.selectedYmqOption.id}"\n                    data-type="${this.selectedYmqOption.type}"\n                    data-id="-${t.selectedYmqOption.id.toString().split("tem").join("-")}"\n                    data-ymq-add-to-cart="${t.config.util.getValue(t.selectedYmqOption,"is_get_to_cart",1)}"\n                    data-ymq-unbundle_variant="${m}"\n                    data-name="${this.creatName(null,!0)}"\n                    data-label="${t.config.util.htmlSpecialChars(this.selectedYmqOption.label)}"\n                    data-onetime="${this.getOneTime()}"\n                    data-class="${t.config.attrib_prefix}${t.selectedYmqOption.id}"\n                    ${t.validate}\n                >\n                    ${n}\n                    ${e}\n                    ${a}\n                    ${t.optionHtml}\n                    <div class="ymq-error-box"></div>\n                    ${i}\n                    ${s}\n                </div>\n            `,""!=t.optionHtml&&ymqJq("#ymq-box").append(t.optionHtml),t}getOneTime(){return this.config.util.getValue(this.selectedYmqOption,"onetime","0")}creatColorPick(){var t=this,e=t.config.util.getValue(t.selectedYmqOption,"placeholder","");return t.optionHtml=`\n                <div class="ymq-input-color-box">\n                    <input placeholder="${e}" readonly class="ymq-input-text ymq-input-color ${t.config.attrib_prefix}${t.selectedYmqOption.id}" type="text" ${t.buildOptionAttr(t.selectedYmqOption)} value="">\n                    <div class="ymq-input-color-button"></div>\n                </div>\n            `,t}creatAccept(){var t="";return 1==this.selectedYmqOption.file_type&&(t='accept="image/*"'),t}creatFileMultiple(){var t=this,e='multiple="multiple"';return(1==t.selectedYmqOption.file_num||0!=t.config.util.getValue(t.selectedYmqOption,"cropped_type","0"))&&(e=""),e}creatFile(){var t=this;return""==t.selectedYmqOption.file_num&&(t.selectedYmqOption.file_num=999999),t.optionHtml=`\n                <div class="ymq_upload_new_box">\n                    <div class="ymq_upload_img_view spotlight-group">\n                        <label data-show="" id="ymq_upload${t.selectedYmqOption.id}" class="ymq_upload_new" style="z-index: 1;">\n                            <input ${t.creatAccept()} ${this.creatFileMultiple()} type="file" data-file-num="${t.selectedYmqOption.file_num}" data-rectangle-ratio="${t.config.util.getValue(t.selectedYmqOption,"rectangle_ratio","")}" data-file-type="${t.selectedYmqOption.file_type}" data-cropper="${t.config.util.getValue(t.selectedYmqOption,"cropped_type","0")}" style="display: none;" class="${t.config.attrib_prefix}${t.selectedYmqOption.id} ymq-options-file-input" name="${t.creatName()}" ${t.buildOptionAttr(t.selectedYmqOption,!1)}>\n                            <svg class="icon" style="width: 24px; height: 24px;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2737"><path d="M662.63 545.37l-128-128a32 32 0 0 0-45.25 0l-128 128a32 32 0 1 0 45.25 45.25L480 517.25V872a32 32 0 0 0 64 0V517.25l73.37 73.37a32 32 0 1 0 45.25-45.25zM752 760H640a32 32 0 0 1 0-64h112c79.4 0 144-64.6 144-144a144 144 0 0 0-132.45-143.54 32 32 0 0 1-29.24-28C720.6 268.46 625 184 512 184s-208.6 84.46-222.31 196.45a32 32 0 0 1-29.24 28A144 144 0 0 0 128 552c0 79.4 64.6 144 144 144h112a32 32 0 0 1 0 64H272c-114.69 0-208-93.31-208-208a208.08 208.08 0 0 1 166.23-203.79C258 216.5 375 120 512 120s254 96.5 281.77 228.21A208.08 208.08 0 0 1 960 552c0 114.69-93.31 208-208 208z" p-id="2738"></path></svg>\n                        </label>\n                    </div>\n                </div>\n                <div class="ymq_upload_box ymq_upload_file_view">\n\n                </div>\n            `,t}buildOptionAttr(t,e=!0){var i="",n=t.one_time?t.one_time:0,a=t.price?t.price:0,o=t.cost_price?t.cost_price:0,r=t.add_price_type?t.add_price_type:1,c=t.price_type?t.price_type:1,s=t.option_discount_type?t.option_discount_type:1,m=t.option_discount?t.option_discount:"",l=t.option_percentage_discount?t.option_percentage_discount:"",d="";2==r&&t.hasOwnProperty("variant_id")&&0!=t.variant_id&&t.hasOwnProperty("variant_price")&&(d=`ymq-add-price-variant="${t.variant_id}"`,a=t.variant_price),1==r&&2==c&&window.ymq_option.ymq_option_branding.extra.plan>2&&(d=`ymq-percentage-price="${t.percentage_price}"`);var p=t.sku?t.sku:"",u=t.weight?t.weight:0;window.ymq_option.ymq_option_branding.extra.plan<2&&(n=0,u=0,p="",a<0&&(a=0)),e&&(i=`name="${this.creatName()}"`);var y="";return(1==s&&""!=m||2==s&&""!=l)&&(y="ymq-has-compare-at-price"),`\n                    ${i}\n                    ${d}\n                    ${y}\n                    id="${this.config.attrib_prefix}${t.id}"\n                    data-ymq_discount_type="${s}"\n                    data-ymq_discount="${m}"\n                    data-ymq_percentage_discount="${l}"\n                    data-id="${t.id}"\n                    data-one_time="${n}"\n                    data-ymq_cost_price="${o}"\n                    data-price="${a}"\n                    data-sku="${p}"\n                    data-weight="${u}"\n                `}getOptionPrice(t){var e=t.price?t.price:0;return 2==(t.add_price_type?t.add_price_type:1)&&t.hasOwnProperty("variant_id")&&t.hasOwnProperty("variant_price")&&(e=t.variant_price),e}creatSwitch(){var t=this;return t.optionHtml=`\n                <div>\n                    <input class="ymq-checkbox-radio ymq-Switch ${t.config.attrib_prefix}${t.selectedYmqOption.id}" type="checkbox" ${t.buildOptionAttr(t.selectedYmqOption)} value="${t.selectedYmqOption.switch_text}" id="tool-${t.selectedYmqOption.id}" ${1==Number(t.selectedYmqOption.default)?"checked":""}>\n                    <label for="${t.config.attrib_prefix}${t.selectedYmqOption.id}">${t.selectedYmqOption.switch_text}</label>\n                </div>\n            `,t}creatField(){var t=this,e="";""!=t.selectedYmqOption.default_text&&null!=t.selectedYmqOption.default_text&&(e=`value="${t.selectedYmqOption.default_text}"`);var i="";return""!=t.selectedYmqOption.placeholder&&null!=t.selectedYmqOption.placeholder&&(i=`placeholder="${t.selectedYmqOption.placeholder}"`),t.optionHtml=`\n                <input ${e} ${i} class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" ${t.buildOptionAttr(t.selectedYmqOption)} type="text">\n            `,t}creatCustomeText(){var t=this;return t.optionHtml=`\n                <div class="ymq_custome_text">${t.selectedYmqOption.html}</div>\n            `,t}creatLayout(){var t=this;t.selectedYmqOption.hasOwnProperty("a_t1")||(t.selectedYmqOption.a_t1="",t.selectedYmqOption.a_t2="",t.selectedYmqOption.a_width="700",t.selectedYmqOption.alert_text="");var e="";return""==!t.selectedYmqOption.a_t2&&(e=`<img class="ymq_img_alert" src="${t.selectedYmqOption.a_t2}">`),""!=t.selectedYmqOption.alert_text?(t.optionHtml=`\n                    <div class="ymq_alert_box" data-ymq-id="ymqdialogbox${t.selectedYmqOption.id}">\n                        ${e+t.selectedYmqOption.a_t1}\n                    </div>\n                `,ymqJq("body").append(`\n                    <div id="ymqdialogbox${t.selectedYmqOption.id}" data-width="${t.selectedYmqOption.a_width}" class="ymq-modal">\n                      <span class="close-ymq-modal">\n                          &#215;\n                      </span>\n                      <div class="ymq-modal-content">\n                          ${t.selectedYmqOption.alert_text}\n                      </div>\n                    </div>\n                `)):t.optionHtml="",t}creatArea(){var t=this,e="";""!=t.selectedYmqOption.default_text&&null!=t.selectedYmqOption.default_text&&(e=t.selectedYmqOption.default_text);var i="";return""!=t.selectedYmqOption.placeholder&&null!=t.selectedYmqOption.placeholder&&(i=`placeholder="${t.selectedYmqOption.placeholder}"`),t.optionHtml=`\n                <textarea ${i} class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" ${t.buildOptionAttr(t.selectedYmqOption)}>${e}</textarea>\n            `,t}creatSelect(t="",e=!1){var i=this,n=i.selectedYmqOption.options,a=i.conditionJson,o=Number(i.config.util.getValue(i.selectedYmqOption,"strong-dorp-down",2)),r=Number(i.config.util.getValue(i.config.ymq_option_branding.extra,"strong-dorp-down",1));2==Number(o)&&(o=r),e&&(o=1);var c="",s="",m="ymq-no-strong-drop-down";1==o&&(c='style="display: none;"',s="multiple",m=""),"multiple"==t&&(s="multiple",i.selectedQtyInputFlexClass="");var l='<div class="ymq-multiple-select-qty-wrappe">',d="";if(i.optionHtml="",i.selectedQtyInput&&(i.optionHtml+=`<div class="ymq-qty-input-item ${i.selectedQtyInputFlexClass} ymq-qty-input-item-${i.selectedYmqOption.id}" id="ymq-qty-input-item-${i.selectedYmqOption.id}" data-id="${i.selectedYmqOption.id}">`),i.optionHtml+=`\n                    <select ${c} ${s} name="${i.creatName()}"  id="${i.config.attrib_prefix}${i.selectedYmqOption.id}" class="${m} ymq-dropdown ${i.config.attrib_prefix}${i.selectedYmqOption.id} ${"multiple"==t?"ymq-multiple":""} ${i.isShopify?"ymq-shopify-option":""}" placeholder="${i.config.ymq_option_branding.lan.please_choose}">\n            `,1!=o&&!i.isShopify)try{""!=i.config.ymq_option_branding.lan.please_choose.trim()&&(i.optionHtml+=`\n                            <option class="ymq-options-default" value="">${i.config.ymq_option_branding.lan.please_choose}</option>\n                        `)}catch(t){i.optionHtml+=`\n                        <option class="ymq-options-default" value="">${i.config.ymq_option_branding.lan.please_choose}</option>\n                    `}for(var p in n){var u=n[p],y="",_="",h="";if(e)if(o=1,2==u.canvas_type){var q=200;if(0==Number(i.config.util.getValue(i.config.ymq_option_branding.extra,"thum_img_zoom",0)))var f=`<img class="ymq-dropdown-img" src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}">`;else if(1==Number(i.config.util.getValue(i.config.ymq_option_branding.extra,"thum_img_zoom",0)))f=`<div class="spotlight-group">\n                                <div class="thum_img_zoom_box" style="position: relative;">\n                                    <img class="ymq-dropdown-img" src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}">\n                                    <div class="spotlight" style="bottom: 17px;right: 2px;" data-src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}" data-description="asdsa"></div>\n                                </div>\n                            </div>`;else if(2==Number(i.config.util.getValue(i.config.ymq_option_branding.extra,"thum_img_zoom",0)))f=`<div class="spotlight-group">\n                                <div class="ymq_tools thum_img_zoom_box" >\n                                    <img class="ymq-dropdown-img" src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}">\n                                    <span class="ymq_tooltip_show" style="display:none !important;">\n                                        <img class="ymq_tooltip_switch_img" src="${u.canvas2}">\n                                    </span>\n                                    <span class="ymq_tooltip_disabled" style="display:none !important;"></span>\n                                </div>\n                            </div>`;else if(3==Number(i.config.util.getValue(i.config.ymq_option_branding.extra,"thum_img_zoom",0)))f=`<div class="spotlight-group">\n                                <div class="ymq_tools thum_img_zoom_box" style="position: relative;">\n                                    <img class="ymq-dropdown-img" src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}">\n                                    <span class="ymq_tooltip_show" style="display:none !important;">\n                                        <img class="ymq_tooltip_switch_img" src="${u.canvas2}">\n                                    </span>\n                                    <span class="ymq_tooltip_disabled" style="display:none !important;"></span>\n                                    <div class="spotlight" style="bottom: 17px;right: 2px;" data-src="${i.config.util.getShopifySmallImg(u.canvas2,q,q)}" data-description="asdsa"></div>\n                                </div>\n                            </div>`}else f=`<span class="ymq-dropdown-color" style="background-color: #${u.canvas1};"></span>`;0==Number(u.hasstock)?(y=`data-title="${i.config.ymq_option_branding.lan.sold_out}"`,_="ymq_disabled_class ymq_sold_out",h="disabled",u.default=0):a.hasOwnProperty(u.id)&&(y=`data-title="${a[u.id].disabled_text}"`,_="ymq_disabled_class ymq_condition_disabled"),i.optionHtml+=`\n                    <option data-ymq_dropdown_img='${f}' ${y} ${h} ${1==Number(u.default)?"selected":""} class="${i.config.attrib_item_prefix}${u.id} ${_}" ${i.buildOptionAttr(u,!1)} value="${u.value}"><span class="ymq-option-value">${u.value}</span>${i.config.getSelectButtonPrice(i.getOptionPrice(u),i.selectedYmqOption.type.toString())}</option>\n                `,d+=`ymq-qty-input-${u.id} `,"multiple"==t&&(l+=`<div class="ymq-qty-input-wrappe-div ymq-qty-input-wrappe-div-${i.selectedYmqOption.id}" id="ymq-qty-input-wrappe-div-${u.id}" data-id="${u.id}">${i.config.qty_input_text}${i.config.multiple_select_qty_with_name?"("+u.value+")":""}<span class="ymq-qty-input-trigger-div ymq-qty-input-trigger-div-${i.selectedYmqOption.id}"><span data-clazz=".ymq-qty-input-${u.id}" data-num="-1" class="ymq-qty-input-trigger ymq-qty-input-trigger-cut">-</span><input value="1" min="1" class="ymq-qty-input ymq-qty-input-${i.selectedYmqOption.id} ymq-qty-input-${u.id}" id="ymq-qty-input-${u.id}" data-id="${u.id}" type="number"><span data-clazz=".ymq-qty-input-${u.id}" data-num="1" class="ymq-qty-input-trigger ymq-qty-input-trigger-add">+</span></span></div>`)}return i.optionHtml+="\n                    </select>\n            ",i.selectedQtyInput&&(i.optionHtml+="multiple"==t?`${l}</div></div>`:`<div class="ymq-qty-input-wrappe-div ymq-qty-input-wrappe-div-${i.selectedYmqOption.id}" id="ymq-qty-input-wrappe-div-${u.id}" data-id="${u.id}">${i.config.qty_input_text}<span class="ymq-qty-input-trigger-div ymq-qty-input-trigger-div-${i.selectedYmqOption.id}"><span data-clazz=".ymq-qty-input-${u.id}" data-num="-1" class="ymq-qty-input-trigger ymq-qty-input-trigger-cut">-</span><input value="1" min="1" class="ymq-qty-input ymq-qty-input-${i.selectedYmqOption.id} ${d}" id="ymq-qty-input-${i.selectedYmqOption.id} ${d}" data-id="${i.selectedYmqOption.id}" type="number"><span data-clazz=".ymq-qty-input-${u.id}" data-num="1" class="ymq-qty-input-trigger ymq-qty-input-trigger-add">+</span></span></div></div>`),i}creatCheckboxButton(){return this.creatrcbtn("checkbox"),this}creatRadioButton(){return this.creatrcbtn(),this}hasHref(t){try{return!(!this.selectedYmqOption.hasOwnProperty("open_new_window")||!t.hasOwnProperty("link")||""==t.link)}catch(t){return!1}}creatHref(t,e,i=0){return t?0==i?`<a class="ymq_option_href" href="${e.link}" ${1==this.selectedYmqOption.open_new_window?'target="_blank"':""} >`:"</a>":""}creatFor(t,e){return t?"":`for="${this.config.attrib_prefix}${e.id}"`}creatLabel(t){return t?"span ":"label "}creatrcbtn(t="radio"){var e=this,i=this.selectedYmqOption.options,n=e.conditionJson;for(var a in this.optionHtml="\n                    <div>\n                ",i){var o=i[a],r="",c="",s="",m=e.hasHref(o);0==Number(o.hasstock)?(r=`<span class="ymq_tooltip_disabled" style="display:none !important;">${e.config.ymq_option_branding.lan.sold_out}</span>`,c="ymq_disabled_class ymq_sold_out",s="disabled"):n.hasOwnProperty(o.id)&&(r=`<span class="ymq_tooltip_disabled" style="display:none !important;">${n[o.id].disabled_text}</span>`,c="ymq_disabled_class ymq_condition_disabled"),e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-item ${e.selectedQtyInputFlexClass} ymq-qty-input-item-${e.selectedYmqOption.id} ${e.config.attrib_item_prefix}${o.id}" id="ymq-qty-input-item-${o.id}" data-id="${o.id}">`),this.optionHtml+=`\n                    ${e.creatHref(m,o)}\n                    <input ${s}  class="ymq-options-button-input ${c} ${e.isShopify?"ymq-shopify-option":""} ${e.config.attrib_prefix}${e.selectedYmqOption.id}" ${e.buildOptionAttr(o)} value="${o.value}" type="${t}" id="tool-${o.id}" ${1==Number(o.default)?"checked":""}>\n                    <label class="ymq-options-button-label ${e.config.attrib_item_prefix}${o.id}" ${e.creatFor(m,o)}>\n                    ${r}\n                    <span class="ymq-option-value">${o.value}</span>${e.config.getSelectButtonPrice(e.getOptionPrice(o),e.selectedYmqOption.type.toString())}\n                    </label>\n                    ${e.creatHref(m,o,1)}\n                `,e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-wrappe-div ymq-qty-input-wrappe-div-${e.selectedYmqOption.id}" id="ymq-qty-input-wrappe-div-${o.id}" data-id="${o.id}">${e.config.qty_input_text}<span class="ymq-qty-input-trigger-div ymq-qty-input-trigger-div-${e.selectedYmqOption.id}"><span data-clazz=".ymq-qty-input-${o.id}" data-num="-1" class="ymq-qty-input-trigger ymq-qty-input-trigger-cut">-</span><input value="1" min="1" class="ymq-qty-input ymq-qty-input-${e.selectedYmqOption.id} ymq-qty-input-${o.id}" id="ymq-qty-input-${o.id}" data-id="${o.id}" type="number"><span data-clazz=".ymq-qty-input-${o.id}" data-num="1" class="ymq-qty-input-trigger ymq-qty-input-trigger-add">+</span></span></div></div>`)}return this.optionHtml+="\n                    </div>\n            ",e}creatFixedQuantity(t=18){var e=this,i=this.selectedYmqOption.options,n=(e.conditionJson,1),a=e.config.util.getValue(e.config.ymq_option_branding.lan,"q-buy","Buy:"),o=e.config.util.getValue(e.config.ymq_option_branding.lan,"q-save","Save");if(1==e.config.hasQuantity)return this.optionHtml="",e.selectedYmqOption=null,e;if(e.config.hasQuantity=!0,e.config.quantity={},e.config.quantity.defalut_quantity=e.config.min_quantity,e.config.quantity.type=t,e.config.quantity.options={},18==Number(t)&&(e.config.quantity_is_fix_type=!0),ymqJq.isEmptyObject(i))this.optionHtml=`<input value="222"  type="hidden" name="${e.creatName()}" >`,e.config.quantity_has_value=!1;else{for(var r in this.optionHtml="\n                        <div>\n                    ",i){var c=i[r];e.config.quantity.options[Number(c.quantity)]={quantity:Number(c.quantity),discount:Number(c.discount),discount_type:Number(c.discount_type)}}if(e.config.quantity.options[0]={quantity:0,discount:0,discount_type:2},19==t){var s="",m=0;for(var r in e.config.quantity.options){e.config.quantity.options[r];""!=s&&(e.config.quantity.options[s].quantity_max=r-1),1==m&&e.config.min_quantity>r&&(e.config.min_quantity=Number(r)),e.config.max_quantity<r&&(e.config.max_quantity=Number(r)),m++,e.config.quantity.options[r].quantity_max=e.config.max_num,s=r}}var l=[];Object.keys(i).forEach((function(r,c){var s=i[r];19==t&&l.push(s);var m="";m=1==Number(s.discount_type)?`${s.discount}%`:`-${e.config.doFormat(s.discount)}`;var d="";if(d=""==s.discount||0==Number(s.discount)?`<span style="display:none !important;" class="ymq-quantity-discount-price" data-quantity="${s.quantity}" data-discount="${s.discount}" data-discount_type="${s.discount_type}">${e.config.doFormat(80)}</span><span class="ymq-quantity-compared-price-no-discount" data-quantity="${s.quantity}">${e.config.doFormat(100)}</span>`:`<span class="ymq-quantity-discount-price" data-quantity="${s.quantity}" data-discount="${s.discount}" data-discount_type="${s.discount_type}">${e.config.doFormat(80)}</span><span class="ymq-quantity-compared-price" data-quantity="${s.quantity}">${e.config.doFormat(100)}</span><span class="ymq-quantity-discount">${1==Number(s.discount_type)?o:""} ${m}</span>`,19==t){var p=!1;1==Number(s.default)&&(e.config.quantity.defalut_quantity=Number(s.quantity))}else{if(1==n){p=!0;e.config.quantity.defalut_quantity=Number(s.quantity)}else p=!1;1==Number(s.default)&&(e.config.quantity.defalut_quantity=Number(s.quantity))}e.optionHtml+=`\n                    <div class="ymq-quantity-radio-box">\n                        <input data-index="${c}" value="${s.quantity}"  class="ymq-checkbox-radio ymq-quantity-radio ymq-quantity-radio-${s.quantity}  ${e.isShopify?"ymq-shopify-option":""} ${e.config.attrib_prefix}${e.selectedYmqOption.id}" id="${e.config.attrib_prefix}${s.id}" data-id="${s.id}" type="radio" name="${e.creatName()}" id="tool-${s.id}" ${1==Number(s.default)||p?"checked":""}>\n                        <label class="ymq-quantity-radio-label" for="${e.config.attrib_prefix}${s.id}"><span class="ymq-quantity-buy">${a}</span><span class="ymq-quantity-buy-quantity">${s.quantity}${19==t?"+":""}</span>${d}</label>\n                    </div>\n                    `,n++})),l.sort(((t,e)=>t.quantity-e.quantity)).forEach(((t,i)=>{var n=0;try{i+1<l.length&&(n=l[i+1].quantity-1)}catch(t){n=0}e.config.wholesale_pricing.push(`${t.quantity}-${n}-${t.discount_type}-${t.discount}`)})),19==t&&(this.optionHtml+=`\n                    <div class="ymq-quantity-show-box ymq-quantity-radio-box">\n                        <span><span class="ymq-quantity-buy">${a} </span><span class="ymq-quantity-buy-quantity">99+</span><span class="ymq-quantity-discount-price"></span><span class="ymq-quantity-compared-price"></span><span class="ymq-quantity-discount"> -10.00</span></span>\n                    </div>\n                    `),this.optionHtml+="\n                        </div>\n                "}return e}creatCheckbox(){return this.creatrc("checkbox"),this}creatRadio(){return this.creatrc(),this}creatrc(t="radio"){var e=this,i=this.selectedYmqOption.options,n=e.conditionJson;for(var a in this.optionHtml="\n                    <div>\n                ",i){var o=i[a],r="",c="",s="";0==Number(o.hasstock)?(r=`data-title="${e.config.ymq_option_branding.lan.sold_out}"`,c="ymq_disabled_class ymq_sold_out",s="disabled"):n.hasOwnProperty(o.id)&&(r=`data-title="${n[o.id].disabled_text}"`,c="ymq_disabled_class ymq_condition_disabled"),e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-item ${e.selectedQtyInputFlexClass} ymq-qty-input-item-${e.selectedYmqOption.id} ${e.config.attrib_item_prefix}${o.id}" id="ymq-qty-input-item-${o.id}" data-id="${o.id}">`),this.optionHtml+=`\n                <div class="ymq_r_c_box ${e.config.attrib_item_prefix}${o.id}">\n                    <input ${s} ${r} class="ymq-checkbox-radio ${c} ${e.isShopify?"ymq-shopify-option":""} ${e.config.attrib_prefix}${e.selectedYmqOption.id}" ${e.buildOptionAttr(o)} value="${o.value}" type="${t}" id="tool-${o.id}" ${1==Number(o.default)?"checked":""}>\n                    <label ${r} for="${e.config.attrib_prefix}${o.id}"><span class="ymq-option-value">${o.value}</span> ${e.config.getSelectButtonPrice(e.getOptionPrice(o),e.selectedYmqOption.type.toString())}</label>\n                </div>\n                `,e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-wrappe-div ymq-qty-input-wrappe-div-${e.selectedYmqOption.id}" id="ymq-qty-input-wrappe-div-${o.id}" data-id="${o.id}">${e.config.qty_input_text}<span class="ymq-qty-input-trigger-div ymq-qty-input-trigger-div-${e.selectedYmqOption.id}"><span data-clazz=".ymq-qty-input-${o.id}" data-num="-1" class="ymq-qty-input-trigger ymq-qty-input-trigger-cut">-</span><input value="1" min="1" class="ymq-qty-input ymq-qty-input-${e.selectedYmqOption.id} ymq-qty-input-${o.id}" id="ymq-qty-input-${o.id}" data-id="${o.id}" type="number"><span data-clazz=".ymq-qty-input-${o.id}" data-num="1" class="ymq-qty-input-trigger ymq-qty-input-trigger-add">+</span></span></div></div>`)}return this.optionHtml+="\n                    </div>\n            ",e}creatCanvas(t="radio"){var e=this,i=e.selectedYmqOption.options,n=e.conditionJson,a=!1,o=!1;1==e.config.util.getValue(e.config.ymq_option_branding.extra,"img-option-bigger",1)&&(a=!0),2==e.config.util.getValue(e.config.ymq_option_branding.extra,"img-option-bigger",1)&&(o=!0),3==e.config.util.getValue(e.config.ymq_option_branding.extra,"img-option-bigger",1)&&(a=!0,o=!0);var r=Number(e.config.util.getValue(e.config.ymq_option_branding.img,"--img-width",50)),c="",s="";e.selectedYmqOption.hasOwnProperty("style")&&2==Number(e.selectedYmqOption.style)&&(2==Number(e.selectedYmqOption.zoom)?(a=!0,o=!1):3==Number(e.selectedYmqOption.zoom)?(a=!1,o=!1):4==Number(e.selectedYmqOption.zoom)?(a=!1,o=!0):5==Number(e.selectedYmqOption.zoom)&&(a=!0,o=!0),""!=e.selectedYmqOption.width&&(c+=`width:${e.selectedYmqOption.width}px;`,r=Number(e.selectedYmqOption.width),s=`style="width: ${Number(e.selectedYmqOption.width)+30}px;"`),""!=e.selectedYmqOption.height&&(c+=`height:${e.selectedYmqOption.height}px;`),""!=e.selectedYmqOption.b_radius&&(c+=`border-radius: ${e.selectedYmqOption.b_radius}px;`)),r<200&&(r=200);var m=!1;for(var l in 1==Number(e.config.util.getValue(e.config.ymq_option_branding.extra,"show-canvas-text",0))&&(m=!0),this.optionHtml=`\n                    <div class="spotlight-group ${m?"spotlight-group-with-text":""}">\n                `,i){var d=i[l],p="",u="",y="",_="",h=e.hasHref(d);0==Number(d.hasstock)?(p=`data-title="${e.config.ymq_option_branding.lan.sold_out}"`,u=e.config.ymq_option_branding.lan.sold_out,y="ymq_disabled_class ymq_sold_out",_="disabled"):n.hasOwnProperty(d.id)&&(p=`data-title="${n[d.id].disabled_text}"`,u=n[d.id].disabled_text,y="ymq_disabled_class ymq_condition_disabled");var q=`${d.value} ${e.config.getSelectButtonPrice(e.getOptionPrice(d),e.selectedYmqOption.type.toString())}`;if(e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-item ${e.selectedQtyInputFlexClass} ymq-qty-input-item-${e.selectedYmqOption.id} ${e.config.attrib_item_prefix}${d.id}" id="ymq-qty-input-item-${d.id}" data-id="${d.id}">`),2==d.canvas_type)o&&(q=`<img class='ymq_tooltip_switch_img' src='${e.config.util.getShopifySmallImg(d.canvas2,r,r)}'><br>${d.value} ${e.config.getSelectButtonPrice(e.getOptionPrice(d),e.selectedYmqOption.type.toString())}`),this.optionHtml+=`\n                        ${e.creatHref(h,d)}\n                        ${m?"<"+e.creatLabel(h)+s+' class="ymq-canvas-box '+e.config.attrib_item_prefix+d.id+'"  '+e.creatFor(h,d)+">":""}\n                        <input ${_} ${p} class="ymq-options-img-input ${y} ${e.isShopify?"ymq-shopify-option":""} ${e.config.attrib_prefix}${e.selectedYmqOption.id}" ${e.buildOptionAttr(d)} value="${d.value}" type="${t}" id="tool-${d.id}" ${1==Number(d.default)?"checked":""}>\n                        <label ${p} style="${c}background: url(${e.config.util.getShopifySmallImg(d.canvas2,r,r)}) center top / cover;" class="ymq-options-img-label ymq-dicopy ${e.config.attrib_item_prefix}${d.id}" data-addclass="ymq_tooltip_switch_img_box" ${e.creatFor(h,d)}>\n                        <span class="ymq_tooltip_show" style="display:none !important;">${q}</span>\n                        <span class="ymq_tooltip_disabled" style="display:none !important;">${u}</span>\n                        `,a&&(this.optionHtml+=`\n                        <div class="spotlight" data-src="${d.canvas2}" data-description="${d.value}"></div>\n                        `),e.config.util.getValue(e.config.ymq_option_branding.img,"--img-selected-upper-url","")&&(this.optionHtml+=`<img class="ymq-selected-img-up-img ymq-img-up-img" src="${e.config.util.getValue(e.config.ymq_option_branding.img,"--img-selected-upper-url","")}" alt="">`),e.config.util.getValue(e.config.ymq_option_branding.img,"--img-disabled-upper-url","")&&(this.optionHtml+=`<img class="ymq-disabled-img-up-img ymq-img-up-img" src="${e.config.util.getValue(e.config.ymq_option_branding.img,"--img-disabled-upper-url","")}" alt="">`),this.optionHtml+=`\n                        </label>\n                        ${m?'<span class="ymq-canvas-text">'+d.value+e.config.getSelectButtonPrice(e.getOptionPrice(d),e.selectedYmqOption.type.toString())+"</span></"+e.creatLabel(h)+">":""}\n                    `,this.optionHtml+=e.creatHref(h,d,1);else{var f=`#${d.canvas1}`;1==Number(e.config.util.getValue(d,"automic_bgcolor",0))&&(f=d.canvas1),this.optionHtml+=`\n                        ${e.creatHref(h,d)}\n                        ${m?"<"+e.creatLabel(h)+s+' class="ymq-canvas-box '+e.config.attrib_item_prefix+d.id+'" '+e.creatFor(h,d)+">":""}\n                        <input ${_} ${p} class="ymq-options-img-input ${y} ${e.isShopify?"ymq-shopify-option":""} ${e.config.attrib_prefix}${e.selectedYmqOption.id}" ${e.buildOptionAttr(d)} value="${d.value}" type="${t}" id="tool-${d.id}" ${1==Number(d.default)?"checked":""}>\n                        <label ${p} style="${c}background-color: ${f};" class="ymq-options-img-label ymq-dicopy ${e.config.attrib_item_prefix}${d.id}" ${e.creatFor(h,d)}>\n                        <span class="ymq_tooltip_show" style="display:none !important;">${q}</span>\n                        <span class="ymq_tooltip_disabled" style="display:none !important;">${u}</span>\n                    `,e.config.util.getValue(e.config.ymq_option_branding.img,"--img-selected-upper-url","")&&(this.optionHtml+=`<img class="ymq-selected-img-up-img ymq-img-up-img" src="${e.config.util.getValue(e.config.ymq_option_branding.img,"--img-selected-upper-url","")}" alt="">`),e.config.util.getValue(e.config.ymq_option_branding.img,"--img-disabled-upper-url","")&&(this.optionHtml+=`<img class="ymq-disabled-img-up-img ymq-img-up-img" src="${e.config.util.getValue(e.config.ymq_option_branding.img,"--img-disabled-upper-url","")}" alt="">`),this.optionHtml+=`\n                        </label>\n                        ${m?'<span class="ymq-canvas-text">'+d.value+e.config.getSelectButtonPrice(e.getOptionPrice(d),e.selectedYmqOption.type.toString())+"</span></"+e.creatLabel(h)+">":""}\n                    `,this.optionHtml+=e.creatHref(h,d,1)}e.selectedQtyInput&&(e.optionHtml+=`<div class="ymq-qty-input-wrappe-div ymq-qty-input-wrappe-div-${e.selectedYmqOption.id}" id="ymq-qty-input-wrappe-div-${d.id}" data-id="${d.id}">${e.config.qty_input_text}<span class="ymq-qty-input-trigger-div ymq-qty-input-trigger-div-${e.selectedYmqOption.id}"><span data-clazz=".ymq-qty-input-${d.id}" data-num="-1" class="ymq-qty-input-trigger ymq-qty-input-trigger-cut">-</span><input value="1" min="1" class="ymq-qty-input ymq-qty-input-${e.selectedYmqOption.id} ymq-qty-input-${d.id}" id="ymq-qty-input-${d.id}" data-id="${d.id}" type="number"><span data-clazz=".ymq-qty-input-${d.id}" data-num="1" class="ymq-qty-input-trigger ymq-qty-input-trigger-add">+</span></span></div></div>`)}return this.optionHtml+="\n                </div>\n            ",e}creatDate(){var t=this,e=t.config.util.getValue(t.selectedYmqOption,"placeholder","");return t.optionHtml=`\n                    <input placeholder="${e}" class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" ${t.buildOptionAttr(t.selectedYmqOption)} readonly type="text">\n            `,t}creatMultipleName(t){return t}creatName(t=null,e=!1){var i=this,n=i.config.properties;if(e&&(n="properties"),t)return i.creatMultipleName(`${n}[${t}]`);if(i.isShopify)return"ymq-option"+(i.selectedYmqOption.optionsIndex- -1);var a=i.selectedYmqOption.label;return 18!=i.selectedYmqOption.type&&19!=i.selectedYmqOption.type||(a=`_${a}`),-1!=ymqJq.inArray(a,i.needAddLabel)?i.creatMultipleName(`${n}[${a}-${i.selectedYmqOption.id.toString().split("tem").join("-")}]`):i.creatMultipleName(`${n}[${a}]`)}YmqGetDay(t=0){t=Number(t);var e=new Date;return e.setDate(e.getDate()+t),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}initData(){var t=this,e={};e={theme:t.config.ymq_jedateblue,isToday:!1,onClose:!1,trigger:"click",language:t.config.ymq_enLang,format:t.selectedYmqOption.date_format,donefun:function(t){try{ymqJq(t.elem).val(t.val).change()}catch(t){}}},10==Number(t.selectedYmqOption.type)&&(e.range=" ~ ",e.multiPane=!1);var i="",n="";1==Number(t.selectedYmqOption.date_minDateType)?i=(new Date).Format("yyyy-MM-dd")+" ":2==Number(t.selectedYmqOption.date_minDateType)?""!=t.selectedYmqOption.min_date&&(i=t.selectedYmqOption.min_date+" "):3==Number(t.selectedYmqOption.date_minDateType)&&(i=t.YmqGetDay(t.config.util.getValue(t.selectedYmqOption,"min_days",1))),1==Number(t.selectedYmqOption.date_maxDateType)?n=(new Date).Format("yyyy-MM-dd")+" ":2==Number(t.selectedYmqOption.date_maxDateType)?""!=t.selectedYmqOption.max_date&&(n=t.selectedYmqOption.max_date+" "):3==Number(t.selectedYmqOption.date_maxDateType)&&(n=t.YmqGetDay(t.config.util.getValue(t.selectedYmqOption,"max_days",1))),i+t.selectedYmqOption.min_time!=""&&(e.minDate=i+t.selectedYmqOption.min_time),n+t.selectedYmqOption.max_time!=""&&(e.maxDate=n+t.selectedYmqOption.max_time);var a="";t.selectedYmqOption.day_limit.length>0&&(a="%"+t.selectedYmqOption.day_limit.join(",%"));var o="";t.selectedYmqOption.weekly_limit.length>0&&(o="ymq"+(o=t.selectedYmqOption.weekly_limit.join("-")));var r="";return""!=t.config.util.getValue(t.selectedYmqOption,"one_day_limit","")&&(r="one_day"+t.config.util.getValue(t.selectedYmqOption,"one_day_limit","")),a+o+r!=""&&(e.valiDate=[a+o+r,!1]),window.ymq_option.jeDate("#"+t.config.attrib_prefix+t.selectedYmqOption.id,e),this}initDropdown(t=null,e=null){var i=this;t||(t=ymqJq("#"+i.config.attrib_prefix+i.selectedYmqOption.id)),null==e&&(e=i.selectedYmqOption.type.toString());try{t.find("option").each((function(){(ymqJq(this).val()&&ymqJq(this).data("price")&&ymqJq(this).data("price")>0||ymqJq(this).val()&&ymqJq(this).attr("ymq-percentage-price")&&ymqJq(this).attr("ymq-percentage-price")>0)&&ymqJq(this).html(`${ymqJq(this).val()}${i.config.getSelectButtonPrice(ymqJq(this).data("price"),e)}`)}))}catch(t){}return t.dropdown({variantChange:function(t){t.hasClass("ymq-shopify-option")}}),i}initColpick(){var t=this;return ymqJq("#"+t.config.attrib_prefix+t.selectedYmqOption.id).colpick({submit:0,onChange:function(t,e,i,n,a){ymqJq(n).next().css("background","#"+e),ymqJq(n).val("#"+e),ymqJq(n).trigger("keyup")}}),t}initFile(){return this}setJson(t={},e={}){var i=this;return i.json=t,i.conditionJson=e,i}static getInstance(e){return this.instance||(this.instance=new t(e)),this.instance}},Product=class t{constructor(){var t=this;t.initConfig(),t.instance=null,t.variant=Variant.getInstance(),t.htmlBuilder=Html.getInstance(),t.validate=Validate.getInstance(),t.upload=Upload.getInstance(),t.init()}initMemberVariables(){var t=this;t.variantJson={},t.scriptArr=[],t.quantityDomInited=!1,t.conditionArr=[],t.formData={},t.selectedValue={},t.ymq_condition={},t.ymq_total_price=0,t.ymq_total_price_single=0,t.ymq_option_price=0,t.ymq_option_price_single=0,t.quantityback=0,t.ogFormData=new FormData,t.needchange=!0,t.paymentButtonDom="",t.config.shopify_option_after=1==t.config.util.getValue(t.config.ymq_option_branding.extra,"shopify-option-after",0),t.config.unbundle_addcart=t.config.util.getValue(t.config.ymq_option_branding.extra,"unbundle_addcart",1);try{t.config.lock_price=!1,t.config.lock_price_type=t.config.util.getValue(t.config.ymq_option_branding.extra,"lock-price",1),ymqJq(`[ymq-lock-product-id="${ymq_option.product.id}"]`).length>0&&(t.config.lock_price=!0)}catch(t){}}init(){var t=this;t.initMemberVariables();try{887!=ymq_option.theme_store_id||t.config.variantOriginal||(document.querySelector("product-info").updateOptionValues=t=>{})}catch(t){}t.doHook("before_init_product").buildStyle().buildUploadModalDom().buildOptionsListModal().isShowBuyItNow().hideShopifyDomAndRegisterAddCartEvent().disabledJqEvent().getShopifySelectDom().buildOptionDom().buildHiddenInputForDwanTheme().resetPrice().qtyInputIsDisabled().isRadioCanBeUnchecked().textAreaAutoHeight().triggerThemeOptions().buildQuantityDom().buildVariantConditionName().hidePaymentButton().doCancelAjaxCart().buildShowAddTotalPriceInfoDom().buildAddToCartDom().disabledSubmit().registerDeleteFileViewEvent().registerBuyItNowEvent().registerInputChangeEvent().buildFormData()}doHook(t){return this.config.ymqHook(t),this}buildOptionsListModal(){var t=this;if(0==t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"options_list_show",0))return t;var e=`\n                <div class="ymq-bmodal ymq-modal-fade" id="ymq-options-list-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n                    <div class="ymq-modal-dialog ymq-modal-lg" role="document" data-ymq-modal-center="${t.config.util.getValue(t.config.ymq_option_branding.extra,"ajaxcart-modal-center",1)}" data-ymq-modal-position="${t.config.util.getValue(t.config.ymq_option_branding.extra,"ajaxcart-modal-position",.6)}">\n                      <div class="ymq-bmodal-content">\n                        <div class="ymq-modal-header">\n                          <div class="ymq-modal-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">${t.config.closeSvg}</span></div>\n                        </div>\n                        <div class="ymq-modal-body">\n                          <div class="ymq-options-list-container">\n                          </div>\n                        </div>\n                        <div class="ymq-modal-footer">\n                          <div class="ymq-modal-button" data-dismiss="modal">${t.config.util.getValue(t.config.ymq_option_branding.lan,"modal-close","Close")}</div>\n                          <div class="ymq-modal-button ymq-options-list-add-to-cart">${t.config.util.getValue(t.config.ymq_option_branding.lan,"add-to-cart","Add To Cart")}</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n            `;return ymqJq("body").append(e),t.config.listModal=ymqJq("#ymq-options-list-modal"),ymqJq(document).on("click",".ymq-options-list-add-to-cart",(function(e){t.addCartAjax(e,t,ymqJq(this),!0)})),t}qtyInputIsDisabled(){return ymqJq(".ymq-options-qty-box .ymq-qty-input").attr("disabled",!0),ymqJq(".ymq-options-qty-box select option:selected:not(:disabled),input[type=radio]:checked:not(:disabled),input[type=checkbox]:checked:not(:disabled)").each((function(){var t=ymqJq(this).data("id");t&&ymqJq(`.ymq-qty-input-${t}`).attr("disabled",!1)})),this}isShowBuyItNow(){var t=this;return t.config.hideByNow=!1,t.config.cancelAjaxCart=!1,0!=Number(t.config.form_box_dom.find("[name='id']"))||(t.config.hideByNow=!0,t.config.cancelAjaxCart=!0,window.ymq_option.buy_now_new)?0==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"bunow","0"))?(t.config.hideByNow=!0,t.config.cancelAjaxCart=!0,t):(t.config.hideByNow=window.ymq_option.hideByNow,t.config.cancelAjaxCart=window.ymq_option.cancelAjaxCart,window.ymq_option.buy_now_new&&(window.ymq_option.theme_buy_now||(t.config.hideByNow=!0),window.ymq_option.theme_ajax_cart||(t.config.cancelAjaxCart=!0)),t):t}registerDeleteFileViewEvent(){var t=this;return ymqJq(document).on("click",".ymq_upload_file_item_del",(function(){var e=ymqJq(this),i=e.data("num");if(t.config.real_time_upload)ymqJq(`.ymq-hidden-input-${i}`).remove();else{var n=e.data("name");t.upload.fileData.hasOwnProperty(n)&&t.upload.fileData[n].hasOwnProperty(i)&&delete t.upload.fileData[n][i]}e.parents(".ymq-options-box").find('input[type="file"]').change().parents(".ymq_upload_new").removeClass("ymq_disabled"),e.parents(".ymq_upload_file_item").fadeOut().remove()})),t}buildUploadModalDom(){return this}de(t,e,i,n,a){if(t){var o={};if(ymq.$&&(o=ymq.$._data(t))&&o.events&&o.events[e])for(var r=0;r<o.events[e].length;r+=1)o.events[e][r].namespace!=n&&""!=n||(o.events[e][r].handler=function(){});if((o=ymqJq._data(t))&&o.events&&o.events[e])for(r=0;r<o.events[e].length;r+=1)o.events[e][r].namespace!=n&&""!=n||(o.events[e][r].handler=function(){})}}disabledJqEvent(){var t=this;return ymqOptionIntervalResult(1e4,100,(function(){return window.$&&$.fn&&$.fn.jquery?ymq.$=$:window.jQuery&&jQuery.fn&&jQuery.fn.jquery&&(ymq.$=jQuery),ymq.$?(t.buildQuantityDom(),t.doAddCart(),!0):"complete"==document.readyState})),t}intervalResult(t,e,i,n){"function"==typeof t?(n=e,i=t,e=1e3,t=20):"function"==typeof e&&(n=i,i=e,e=1e3),"function"!=typeof i&&(i=function(){return!1});var a=0,o=setInterval((function(){++a>t||i(a)?clearInterval(o):"function"==typeof n&&n()}),e)}doCancelAjaxCart(){var t=this;return t.config.cancelAjaxCart||(ymqJq(document).on("click","body",(function(e){t.I.each((function(i,n){if(ymqJq(this).length>0&&e.pageX>0&&e.pageY>0&&e.pageX>=ymqJq(this).offset().left&&e.pageX<=ymqJq(this).offset().left+ymqJq(this).outerWidth()&&e.pageY>=ymqJq(this).offset().top&&e.pageY<=ymqJq(this).offset().top+ymqJq(this).outerHeight())return t.controllerPaymentButton(!0,!0,!0,{jq:ymqJq(this),js:n},!1),!1}))})),t.controllerPaymentButton()),t}doAddCart(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"cart-ajax","0");return 1!=Number(e)&&(!!t.config.cancelAjaxCart&&(t.I.each((function(e,i){t.de(i,"click","namespace","","disable")})),void t.I.on("click.ymq",(function(e){if(!1===t.addCartAjax(e,t,ymqJq(this)))return!1}))))}hideListModal(){try{this.config.listModal&&this.config.listModal.modal("hide")}catch(t){}}showListModal(){var t=this;if(0==t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"options_list_show",0))return!1;if(t.buildFormData().buildOtherFormData(),t.validate.validateAll(t.formData,!0),0!=t.validate.validateCount)return!1;var e=`\n            <div class="ymq-list-item">\n                <div class="ymq-list-name ymq-list-data"><b>${t.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"option-name","Option Name")}</b></div>\n                <div class="ymq-list-value ymq-list-data"><b>${t.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"option-value","Option Value")}</b></div>\n                <div class="ymq-list-price ymq-list-data"><b>${t.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"option-price","Price")}</b></div>\n            </div>\n            `,i="";if(t.config.variantData.hasOwnProperty(t.variant.variant_id)){var n=t.config.variantData[t.variant.variant_id];e+=`\n                    <div class="ymq-list-item">\n                        <div class="ymq-list-name ymq-list-data">${t.config.product.title}</div>\n                        <div class="ymq-list-value ymq-list-data">${"Default Title"==n.title?" / ":n.title}</div>\n                        <div class="ymq-list-price ymq-list-data">${t.config.doFormatWithoutRate(n.price/100)} * ${t.getQuantity()}</div>\n                    </div>\n                `;var a=(Number(n.price/100)+Number(t.ymq_option_price*Shopify.currency.rate))*t.getQuantity()+Number(t.ymq_option_price_single)*Shopify.currency.rate;i+=`\n                    <div class="ymq-list-item">\n                        <div class="ymq-list-name ymq-list-data"></div>\n                        <div class="ymq-list-value ymq-list-data"></div>\n                        <div class="ymq-list-price ymq-list-data ymq-list-total-price"><b>${t.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"subtotal","Subtotal: ")} ${t.config.doFormatWithoutRate(a.toFixed(2))}</b></div>\n                    </div>\n                `}var o=!1;return Object.keys(t.formData).forEach((i=>{if((0!=t.formData[i].value.length||t.formData[i].hasOwnProperty("isFile"))&&t.formData[i].addToCart&&!t.formData[i].hide){t.selectedValue=t.formData[i];var n=t.selectedValue.value.join(t.config.option_value_split),a=i.substring(11,i.length-1),r=" / ";if(0!=t.formData[i].price&&(r=0==t.formData[i].onetime?`${t.config.doFormat(t.formData[i].price,t.formData[i].onetime)} * ${t.getQuantity()}`:`${t.config.doFormat(t.formData[i].price,t.formData[i].onetime)}`),t.formData[i].hasOwnProperty("isFile"))if(t.config.real_time_upload)t.formData[i].dom.parents(".ymq-options-box").find(".ymq-hidden-file-input").each((function(){var e=ymqJq(this).val();if(t.upload.isImg(e))n+=`\n                                        <div class="ymq_upload_img_item ymq_upload_file_item">\n                                            <img class="ymq_img_item" src="${e}" alt="">\n                                        </div>\n                                    `;else{var i=t.upload.getFileName(e);n+=`\n                                        <div class="ymq_upload_item ymq_upload_file_view_item ymq_upload_file_item">\n                                            <div class="ymq_upload_type ymq_upload_img"></div>\n                                            <div class="ymq_upload_name">${i}</div>\n                                            <div class="ymq_clear_both"></div>\n                                        </div>\n                                    `}}));else if(t.upload.fileData.hasOwnProperty(i))if(Object.keys(t.upload.fileData[i]).length>0){var c="";Object.keys(t.upload.fileData[i]).forEach((function(e,a){/^image\/\w+/.test(t.upload.fileData[i][e].file.type)?(URL&&(c=URL.createObjectURL(t.upload.fileData[i][e].file)),n+=`\n                                                <div class="ymq_upload_img_item ymq_upload_file_item">\n                                                    <img class="ymq_img_item" src="${c}" alt="">\n                                                </div>\n                                            `):n+=`\n                                                <div class="ymq_upload_item ymq_upload_file_view_item ymq_upload_file_item">\n                                                    <div class="ymq_upload_type ymq_upload_img"></div>\n                                                    <div class="ymq_upload_name">${t.upload.fileData[i][e].name}</div>\n                                                    <div class="ymq_clear_both"></div>\n                                                </div>\n                                            `}))}""!=n&&(o=!0,e+=`\n                            <div class="ymq-list-item">\n                                <div class="ymq-list-name ymq-list-data">${a}</div>\n                                <div class="ymq-list-value ymq-list-data">${n}</div>\n                                <div class="ymq-list-price ymq-list-data">${r}</div>\n                            </div>\n                        `)}})),o&&(ymqJq(".ymq-options-list-container").html(e+i),t.config.listModal.modal("show")),o}make_items(){var t=this,e=[];if(""!=t.ajax_uuid){var i={};try{if(1==t.config.util.getValue(t.config.ymq_option_branding.extra,"bundle_break","0")){var n=t.getAjaxDataByFormData();n.hasOwnProperty("_YmqWholesalePricing")&&(i._YmqWholesalePricing=n._YmqWholesalePricing),n.hasOwnProperty("_YmqItemDiscount")&&(i._YmqItemDiscount=n._YmqItemDiscount)}}catch(t){i={}}t.bundleTransformFunction()||(t.ymq_option_variants_single.forEach(((n,a)=>{var o={},[r,c]=t.config.util.getVariantIdAndQty(n);if(t.ymq_option_variants_single_unbundle.includes(n)){try{1==t.config.unbundle_addcart&&(o={...i,...t.ymq_option_variants_single_value[a]})}catch(t){}e.push({quantity:c,id:r,properties:{...i,...o}})}else 0==t.config.ignore_main_product?e.push({quantity:c,id:r,properties:{...i,_YmqChidrenId:t.ajax_uuid,_YmqOneTime:1}}):e.push({quantity:c,id:r,properties:{...i,_YmqOneTime:1}})})),t.ymq_option_variants.forEach(((n,a)=>{var o={},[r,c]=t.config.util.getVariantIdAndQty(n,t.getQuantity());if(t.ymq_option_variants_unbundle.includes(n)){try{1==t.config.unbundle_addcart&&(o={...i,...t.ymq_option_variants_value[a]})}catch(t){}e.push({quantity:c,id:r,properties:{...i,...o}})}else 0==t.config.ignore_main_product?e.push({quantity:c,id:r,properties:{...i,_YmqChidrenId:t.ajax_uuid}}):e.push({quantity:c,id:r})})))}return"function"==typeof window.ymq_option.make_items_hook?window.ymq_option.make_items_hook(e.reverse()):e.reverse()}initSellingPlan(){var t=this;try{var e=ymqJq('[data-bsub-selling-plan-input]:checked, [name="selling_plan"]:first');t.config.selling_plan_id="",0===e.closest("#shopify-section-carousel-related-products").length&&e.length>0?t.config.selling_plan_id=e.val():ymqJq('[name="selling_plan"]:checked').length>0&&(t.config.selling_plan_id=ymqJq('[name="selling_plan"]:checked').val()),t.config.selling_plan_id&&t.ogFormData.set("selling_plan",t.config.selling_plan_id)}catch(t){}}addCartAjax(t,e,i,n=!1){if(window.ymq_option.min_max_new&&e.config.real_max_quantity<=0)return alert(e.config.util.getValue(e.config.ymq_option_branding.lan,"min-max-in-product","You have exceeded the maximum purchase quantity.")),!1;try{if(window.imageUploader&&window.imageUploader.hasOwnProperty("settings")&&(e.config.ymq_option_branding.extra["other-form-data"]=1,0==window.imageUploader.validate()))return window.imageUploader.alertErrorMsg(),!1}catch(t){}try{if("function"==typeof ymqBeforeAddcartValidate&&!ymqBeforeAddcartValidate())return!1}catch(t){}if(!n&&e.showListModal())return t.stopImmediatePropagation(),t.preventDefault(),!1;var a=e.config.form_box_dom;if(e.config.ymqHook("doAddCart_before_validate"),e.buildFormData().buildOtherFormData(),e.validate.validateAll(e.formData,!0),0!=e.validate.validateCount)return t.stopImmediatePropagation(),t.preventDefault(),!1;e.config.ymqHook("doAddCart_after_validate"),e.buildFormData().buildOtherFormData(),e.startLoading(i);var o=null;if(a.attr("action")&&(o=a.attr("action").match(/\/([\w\W]*?]*?)\/cart\/add/)),null==o&&ymqJq('form[action*="/cart/add"]').length>0&&(o=ymqJq('form[action*="/cart/add"]').eq(0).attr("action").match(/\/([\w\W]*?]*?)\/cart\/add/)),e.config.ymqHook("doAddCart_before_getAjaxData"),e.getAjaxDataByFormData(),e.ogFormData.set("quantity",e.getQuantity()),e.ogFormData.set("id",e.variant.variant_id),e.initSellingPlan(),e.config.ymqHook("doAddCart_after_getAjaxData"),window.fbq&&1==e.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"fbq-event",1)){var r=0;if(e.config.variantData.hasOwnProperty(e.variant.variant_id)){var c=e.config.variantData[e.variant.variant_id],s=(r=c.price,{content_type:"product_group",content_ids:[e.config.product.id],currency:Shopify.currency.active,value:r/100+e.ymq_total_price,num_items:e.getQuantity(),content_name:c.title,content_category:e.config.product.type});"tecnologias-mjm.myshopify.com"==Shopify.shop||1==e.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"fbq-event-uuid",0)?fbq("track","AddToCart",s,{event_id:e.ymqUUID()}):fbq("track","AddToCart",s),console.log("fbq done")}}function m(){if(e.config.into_ajax_validate=!0,e.hideListModal(),e.config.ymqHook("doAddCart_success"),0==e.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"ajaxcart-modal",0)){setTimeout((function(){e.endLoading(i)}),5e3);var t=e.config.util.getValue(e.config.ymq_option_branding.extra,"add-cart-url",""),n=e.config.util.getValue(e.config.ymq_option_branding.extra,"add-cart-timeout","50");setTimeout((()=>{try{ymqCart.slidOpen(),e.endLoading(i)}catch{""==t?window.location.href=o?"/"+o[1]+"/cart":"/cart":0==t?location.reload():window.location.href=o?"/"+o[1]+`/${t}`:`/${t}`}}),n)}else{try{e.config.cartInstance.ajaxcart.makeAjaxCartHtml()}catch(t){window.location.href=o?"/"+o[1]+"/cart":"/cart"}e.endLoading(i)}}function l(t=""){if(e.config.into_ajax_validate=!0,e.hideListModal(),e.config.ymqHook("doAddCart_error"),setTimeout((function(){e.endLoading(i)}),10),""!=t)alert(t);else if(e.config.variantData.hasOwnProperty(e.variant.variant_id)){var n=e.config.variantData[e.variant.variant_id].name,a=e.config.util.getValue(e.config.ymq_option_branding.lan,"inventory_reminder","The product %s is already sold out.");alert(a.replace("%s",n))}}function d(){0==e.config.ignore_main_product&&ymqJq.ajax({type:"POST",url:"/cart/add?_easygift_form_payload=true",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:e.ogFormData}).done((function(t){m()})).fail((function(t){var i="";422!=t.status&&(i=e.config.util.getValue(e.config.ymq_option_branding.lan,"upload_limit","The uploaded file size is too large, please upload again."));try{"function"==typeof ymqFileAjaxError&&ymqFileAjaxError()?m():l(i)}catch(t){l(i)}}))}if(e.ajax_uuid="",e.bundleTransformFunction()||(e.ymq_option_variants_single.length>0||e.ymq_option_variants.length>0)&&e.config.bind_variant_on_add_to_cart&&(e.ajax_uuid=e.ymqUUID(),e.ymq_option_variants_single.length==e.ymq_option_variants_single_unbundle.length&&e.ymq_option_variants.length==e.ymq_option_variants_unbundle.length||(e.ogFormData.set("properties[_YmqParentId]",e.ajax_uuid),e.ajax_properties._YmqParentId=e.ajax_uuid)),e.has_upload){(p=e.make_items()).length>0?(e.config.into_ajax_validate=!1,ymqJq.post({url:"/cart/add.js?_easygift_form_payload=true",dataType:"json"},{items:p}).done((function(){d()})).fail((function(t){l(t.responseJSON.description)}))):d()}else{var p=e.make_items();if(0==e.config.ignore_main_product){var u={quantity:e.getQuantity(),id:e.variant.variant_id,properties:e.ajax_properties};e.config.selling_plan_id&&(u.selling_plan=e.config.selling_plan_id),p.push(u)}ymqJq.post({url:"/cart/add.js?_easygift_form_payload=true",dataType:"json"},{items:p}).done((function(t){m()})).fail((function(t){l(t.responseJSON.description)}))}return t.stopImmediatePropagation(),t.preventDefault(),!0}ymqUUID(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}hideShopifyDomAndRegisterAddCartEvent(){var t=this,e=t.config.form_box_dom,i=t.config.shop,n=Shopify.theme.name?Shopify.theme.name.toLowerCase():"",a=null,o=t.config.product;["slimedotnet.myshopify.com","ridesharegear.myshopify.com","shoretees-ca.myshopify.com","winspear-picks.myshopify.com","sallureofficial.myshopify.com","the-million-roses-romania.myshopify.com","eventtechrentals.myshopify.com","hocwoman.myshopify.com","wigirlhair.myshopify.com","petshopmalta.myshopify.com","the2tails-mermaid-tails.myshopify.com","gwyllem.myshopify.com","kirudansk.myshopify.com","us-jewels-gems.myshopify.com","neweditionshop.myshopify.com","olemasonjar.myshopify.com","ronniemac69.myshopify.com","3bdshop0004.myshopify.com","teddy-winthrop.myshopify.com"].indexOf(i);if(0==ymqJq("#ymq-box").length)for(var r=ymqJq('\x3c!-- ymq custom product options by YMQ --\x3e\x3c!-- https://apps.shopify.com/ymq-options --\x3e<div id="ymq-box" class="ymq-box"></div>'),c=(e.find('[name="id"]'),ymqJq('<select id="test1111" name="id" style="display: none;"></select>')),s=0;s<o.variants.length;s+=1)c.append('<option value="'+o.variants[s].id+'"></option>');else r=ymqJq("#ymq-box");if(0==r.find(".ymq-options-box").length){var m,l=[".productForm-block--options-inline .selector-wrapper",".swatches__container","#variations-content-product-template > .selector-wrapper",".product__variants__wrap",'.variations [class^="nt_select_pr_"]',".product__selectors .selector-wrapper, .selector-wrapper-secton .selector-wrapper",".ProductForm__Option","> .product-options.no-options > .product-type","div.select:not(.shopify-select)",".inline-field-wrapper","> .row > .col-sm-12.col-xs-12",".row .col-md-6.col-sm-12",".product-details-wrapper .product-options","> .product-options .swatches","> .product-options",".radio-wrapper",".product-single__variant","table.variations",".selection-wrapper.variant .selector-wrapper",".selection-wrapper.variant",".details_wrapper .color_product__options, .details_wrapper .size_product__options, .details_wrapper .single_product__options",".product-options--mobile, .product-options--desktop",".product-options",".select-container",".product-single__swatch",".lh-swatch-images, .lh-swatch-simple",".selector-wrapper:not(.full-width):not(.quantity-product-template)",".gf_swatches-selector",".product-form__option",".product-form__item:not(.product-form__item--quantity):not(.product-form__item--submit):not(.product-form__quantity-selector)",".variant-wrapper, > .swatches","[data-product-options-contariner]",".form__control","div.option",".form__control","#product-variants",".option-selectors",".variant-group",".form-field-swatch",'[class*="medium-item-grid"] .item, [class*="small-item-grid"] .item',".col-md-6.col-sm-12.col-xs-12:not(.selector-wrapper)",".product-options .swatches",".swatches-container",".tt-swatches-container .tt-wrapper",".tt-swatches-container",".variant-option",".option-header, .option-values",".product-option-list",'div[class="input-row"]',".product-form__controls-group .pf-container",".product-form__item",".variations","div[data-product-options-container]","[data-product-options-container]",".gf_variants-wrapper",".product-form__variants",'[data-label="(P) Variants"]','[data-label="(P) Swatches"]','[data-pf-type="ProductVariant"]',"> .js-product-options",".form__input-wrapper--select",".prd-block_options",".materialize-select",".c-cartform__label",".product-page--variants",".variants",".so-product-variants-wrap",".gt_product-swatches",".product-form--variants .radios--root, .product-form--variants .disclosure--root",".product-details__options .product-details__option-wrapper",".product-form-option",".so-custom-field-wrap",".sh-product-options",".product-page-info__variants"],d=t.config.util.getValue(t.config.ymq_option_branding.extra,"theme-variant-class",""),p=t.config.util.getValue(t.config.ymq_option_branding.extra,"theme-variant-class-no","");if(window.ymq_option.ymq_has_only_default_variant&&""!=p&&(d=p),""!=d&&l.unshift(d),t.config.replace&&(m=ymqJq(t.config.replace)),!m||!m.length)for(s=0;s<l.length;s+=1)try{if(0<(m=e.find(l[s])).length){".product-options--mobile, .product-options--desktop"===l[s]&&(m=m.add(e.find(".selector-wrapper:not(.full-width):not(.quantity-product-template)")));break}}catch(u){}".product-form-wrapper .selector-wrapper"===l[s]&&setTimeout((function(){ymqJq(".product-form-options-wrapper").removeClass("large--hide")}),1e4);var u=":not(.scr-open-size-chart):not([data-quantity-action]):not(.js-qty-button):not(.uploadkit-button):not(.accordion__header):not(.quantity--input__button):not(.btn-num-product-down):not(.btn-num-product-up)";if("loft"===n&&0<e.find('[name="add"], .add-to-cart-btn').length?a=e.find('[name="add"], .add-to-cart-btn'):0<e.find("input#pre-order[type=submit]").length?a=e.find("input#pre-order[type=submit]").first():0<e.find("button[name=add]:not(.dummy_button_for)").length?a=e.find("button[name=add]:not(.dummy_button_for)"):0<e.find("input.add_to_cart, button.add_to_cart").length?a=e.find("input.add_to_cart, button.add_to_cart").first():0<e.find("button.add-to-cart, button.ProductForm__AddToCart").length?a=e.find("button.add-to-cart, button.ProductForm__AddToCart").first():0<e.find(".addToCart").length?a=e.find(".addToCart").first():0<e.find('button[type="submit"]'+u+", input[type=submit]").length?a=e.find('button[type="submit"]'+u+", input[type=submit]"):0<e.find("button"+u).length?a=e.find("button"+u).first():0<e.find(".btn-addtocart").length?a=e.find(".btn-addtocart").first():0<e.find(".shg-btn, .paira-add-to-cart").length&&(a=e.find(".shg-btn, .paira-add-to-cart").first()),a){if(o&&("pf-atc-button"===a.attr("id")||a.is('[data-pf-type="ProductATC"]')))(r=ymqJq("<button></button>")).html(a.html()),r.attr("class",a.attr("class")),a.replaceWith(r),a=r;setTimeout((function(){a.removeClass("disabled");try{a.attr("type","submit")}catch(t){}}),20)}if("optimizeinstagram.myshopify.com"===i?m=e.find(l[6]):"marei1998.myshopify.com"===i&&(m=e.find(".product-options label[for], .product-options label[for] + .select-wrapper")),a&&a.hasClass&&a.hasClass("shg-btn")){var y=ymqJq('<button type="submit" style="border: 0;" class="shg-btn" id="'+a.get(0).id+'">ADD TO CART</button>');a.replaceWith(y),(a=y).click((function(t){e.submit()}))}if(0<m.length){t.config.replace=l[s],m.parent().removeClass("d-none").removeClass("hide-for-all");var _=m.first().find('select, input[type="radio"], input[type="checkbox"]').first();_.length&&ymqJq._data(_.get(0),"events");".row .col-md-6.col-sm-12"!==l[s]&&".col-md-6.col-sm-12.col-xs-12:not(.selector-wrapper)"!==l[s]||r.find(".selector-wrapper").css({paddingLeft:15}),t.config.variantOriginal&&0==t.config.shopify_option_after?m.last().css("marginBottom",Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-original-margin-bottom",0))).after(r):(m.first().before(r),t.config.shopify_option_after&&t.config.variantOriginal&&m.last().after('<div class="ymq-qty-price-box"></div>')),r.parent().hide(),r.parent().show(),r.parent().removeClass("hide"),r.parent().parent().hide(),r.parent().parent().show(),r.parent().removeClass("hidden"),".gf_variants-wrapper"===l[s]&&ymqJq(l[s]+":first").closest('[data-label="(P) Variants"]').attr("id",""),r.last().after(e.find(".size-chart-link, .size-chart-container")),t.config.variantOriginal||m.each((function(t,e){0===ymqJq(e).find('input[name="quantity"]:not(.product-single__swatch__input), input[type="text"]:not(.select-dropdown):not([disabled="disabled"]), input[type="number"], input[type="submit"], button:not([aria-controls="modal-bohobi-size-chart"]):not(.custom-style-select-box)').filter(':not(.ProductForm__Item):not(.Popover__Value):not(.Popover__Close):not([data-activates]):not(.product-option-quantity):not([id^="SingleOptionSelector-"]):not([aria-controls="modal-size-chart"])').length&&ymqJq(e).hide()}))}else t.config.replace="no valid option found",e.prepend(r)}var h=t.config.util.getValue(t.config.ymq_option_branding.extra,"hide-shopify-option","");""!=h&&ymqJq(h).hide();var q=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-hide","");""!=q&&ymqJq(q).hide();var f=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-show","");""!=f&&ymqJq(f).show();var g=e.find(".product-form-grid.product-form-grid-select");g.length&&(g.first().after(g.find(".product-quantity-label, .product-quantity-input")),e.find(".swatch, .product-form-grid.product-form-grid-select, .fake-choice, .product-variants-radio-btns").hide(),ymqJq(".product-single__meta > [itemscope] > .product-variants-item").hide());var v=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-add-to-cart","");if(""!=v)var b=`${v},.shopify-payment-button__button [role="button"], .shopify-payment-button__button [role="button"] span, .sticky_atc_js,#AddToCart,buy-buttons.buy-buttons [type="submit"]`;else b='.shopify-payment-button__button [role="button"], .shopify-payment-button__button [role="button"] span, .sticky_atc_js,#AddToCart,buy-buttons.buy-buttons [type="submit"]';var w=ymqJq('form[action*="/cart/add"]'),x=(w=w.not('.ssw-product-form, #add-item-qv, [id^="product-actions"], .product-form--mini, .ca-form')).find('[name="add"], .add-to-cart-btn,#addToCart');return x=x.add(a).add(b),t.I=x,t.listenAddToCartButtonIsReload(),t.doAddCart(),t}listenAddToCartButtonIsReload(){var t=this;if(!window.ymqAdmin&&t.config.cancelAjaxCart&&1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"add-button-reload",0)))try{var e=t.config.listen_add_to_cart_v;t.config.add_dom_len=t.I.length,t.I.each((function(){ymqJq(this).attr("ymq-add-to-cart-tags","ymq")})),ymqOptionIntervalResult(1e6,100,(function(){return e!=t.config.listen_add_to_cart_v||(ymqJq("[ymq-add-to-cart-tags=ymq]").length!=t.config.add_dom_len&&(t.config.listen_add_to_cart_v++,t.hideShopifyDomAndRegisterAddCartEvent()),!1)}))}catch(t){}return t}startLoading(t){t.addClass("ymq-btn-progress")}endLoading(t){t.removeClass("ymq-btn-progress")}controllerBuyNow(t=!0){var e=this;return e.config.hideByNow||(1==t?(ymqJq(e.config.form_box).find(e.paymentButtonDom).css("cssText","pointer-events:none !important;"),e.config.form_box_dom.find(e.paymentButtonDom).css("cssText","pointer-events:none !important;")):(ymqJq(e.config.form_box).find(e.paymentButtonDom).css("cssText","pointer-events:auto !important;"),e.config.form_box_dom.find(e.paymentButtonDom).css("cssText","pointer-events:auto !important;"))),e}controllerAjaxCart(t=!0){var e=this;return e.config.cancelAjaxCart||(1==t?e.I.css("cssText","pointer-events:none !important;"):e.I.css("cssText","pointer-events:auto !important;")),e}bundleTransformFunction(){return!(!ymq_option.transform_function||1!=this.config.util.getValue(this.config.ymq_option_branding.extra,"transformer-bundle-variant",1))}controllerPaymentButton(t=!0,e=!1,i=!1,n,a=!0){setTimeout((()=>{var o=this;1==t&&o.buildFormData().buildOtherFormData();var r=!1;1==e?(o.validate.validateAll(o.formData,!0),0!=o.validate.validateCount?o.controllerBuyNow().controllerAjaxCart():(r=!0,o.controllerBuyNow(!1).controllerAjaxCart(!1))):o.validate.validateAllWithOutPrompt(o.formData)?o.controllerBuyNow().controllerAjaxCart():(r=!0,o.controllerBuyNow(!1).controllerAjaxCart(!1));try{if(n.jq.prop("disabled"))return void o.controllerBuyNow().controllerAjaxCart()}catch(t){}if(r)if(o.draft_order?(o.controllerBuyNow(),i&&a&&o.checkout(n.jq,n.js)):o.controllerBuyNow(!1),o.has_bundle_variant&&!o.bundleTransformFunction()){if(i&&0==a&&!n.jq.hasClass("ymq-ajax-bundle-variant")){n.jq.addClass("ymq-ajax-bundle-variant"),o.ajax_uuid=o.ymqUUID();var c=o.make_items();ymqJq.post({url:"/cart/add.js?tag=ymq-no-listen",dataType:"json",async:!1},{items:c}).done((function(t){window.ymq_option.cancel_isten=!0,clearTimeout(window.ymq_option.cancel_isten_time),window.ymq_option.cancel_isten_time=setTimeout((()=>{window.ymq_option.cancel_isten&&(window.ymq_option.cancel_isten=!1)}),1e4),o.buildHideInputForHIdeProperty("properties[_YmqParentId]",o.ajax_uuid);var e=o.config.util.getValue(o.config.ymq_option_branding.extra,"bundle-variant-trigger-type",2);if(0==e||2==e)try{setTimeout((()=>{n.jq.trigger("click")}),1)}catch(t){}if(1==e||2==e)try{setTimeout((()=>{n.jq[0].click()}),1)}catch(t){}setTimeout((()=>{n.jq.removeClass("ymq-ajax-bundle-variant")}),200)})).fail((function(t){setTimeout((()=>{n.jq.removeClass("ymq-ajax-bundle-variant")}),200),alert(t.responseJSON.description)}))}o.controllerAjaxCart()}else o.controllerAjaxCart(!1)}),66)}hidePaymentButton(){var t=this,e="";if(0==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"qty-input-trigger",0))&&(e+="\n                    .ymq-qty-input-trigger{\n                        display: none!important;\n                    }\n                "),window.ymq_option.buy_now_new){var i=t.config.util.getValue(t.config.ymq_option_branding.extra,"payment-button-hide-product","");if(t.paymentButtonDom='.shopify-payment-button,[data-shopify="payment-button"],.sezzle-checkout-button',""!=i&&ymqJq(t.config.form_box).find(i).length>0&&(t.paymentButtonDom=`.shopify-payment-button,[data-shopify="payment-button"],${i}`),!t.config.hideByNow)return ymqJq(document).on("click","body",(function(e){ymqJq(t.paymentButtonDom).each((function(i,n){if(ymqJq(this).length>0&&e.pageX>0&&e.pageY>0&&e.pageX>=ymqJq(this).offset().left&&e.pageX<=ymqJq(this).offset().left+ymqJq(this).outerWidth()&&e.pageY>=ymqJq(this).offset().top&&e.pageY<=ymqJq(this).offset().top+ymqJq(this).outerHeight())return t.controllerPaymentButton(!0,!0,!0,{jq:ymqJq(this),js:n}),!1}))})),t.controllerPaymentButton(),t;e+=`\n                    ${t.paymentButtonDom}{\n                        display: none!important;\n                    }\n                `,ymqJq(t.paymentButtonDom).hide().remove(),ymqJq("body").append(`<style type="text/css">${e}</style>`),ymqJq(t.config.styleDomId).append(e)}else{i=t.config.util.getValue(t.config.ymq_option_branding.extra,"payment-button-hide","");if(!t.config.hideByNow)return t.paymentButtonDom='#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons,[data-shopify="payment-button"]',""!=i&&ymqJq(t.config.form_box).find(i).length>0&&(t.paymentButtonDom=i),ymqJq(document).on("click","body",(function(e){ymqJq(t.config.form_box).find(t.paymentButtonDom).each((function(){if(ymqJq(this).length>0&&e.pageX>0&&e.pageY>0&&e.pageX>=ymqJq(this).offset().left&&e.pageX<=ymqJq(this).offset().left+ymqJq(this).outerWidth()&&e.pageY>=ymqJq(this).offset().top&&e.pageY<=ymqJq(this).offset().top+ymqJq(this).outerHeight())return t.controllerPaymentButton(!0,!0),!1}))})),t.controllerPaymentButton(),t;""!=i&&(e+=`\n                        ${i}{\n                            display: none!important;\n                        }\n                    `,ymqJq(i).hide()),e+='\n                    #dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons,[data-shopify="payment-button"]{\n                        display: none!important;\n                    }\n                ',ymqJq("#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons").hide(),ymqJq('[data-shopify="payment-button"]').hide().remove(),ymqJq(t.config.styleDomId).append(e)}return t}buildVariantConditionName(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-condition-label-class",""),i=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-condition-value-parent-class","");return t.config.variantOriginal&&""!=e&&""!=i&&ymqJq(e).length>0&&ymqJq(i).length>0&&ymqJq(e).each((function(){ymqJq(this).parents(i).attr("name",`option-box-ymq-variant-${t.config.util.htmlSpecialChars(ymqJq(this).text()).trim()}`)})),e=".ymq-options-box .ymq-option-title .ymq_lable",i=".ymq-options-box",ymqJq(e).each((function(){ymqJq(this).parents(i).attr("name",`option-box-ymq-variant-${t.config.util.htmlSpecialChars(ymqJq(this).text()).trim()}`)})),this}buildStyle(){var t=this,e=":root{";t.config.ymq_option_branding.hasOwnProperty("original-select")||(e+="\n                    --no-strong-padding-t: 6;\n                    --no-strong-padding-r: 22;\n                    --no-strong-padding-b: 6;\n                    --no-strong-padding-l: 8;\n                    --no-strong-border: 1;\n                    --no-strong-border-color: #a0a0a0;\n                    --no-strong-border-radius: 4;\n                    --no-strong-min-height: 36;\n                    --no-strong-color: #000;\n                    --no-strong-background: #fff;\n                    --no-strong-line-height: 1.2;\n                    --no-strong-max-width: 400;\n                    --no-strong-border-color-focus: #a0a0a0;\n                    --no-strong-color-focus: #000;\n                    --no-strong-background-focus: #fff;\n                "),t.config.ymq_option_branding.hasOwnProperty("qty")||(e+="\n                    --qty-border-color: #000000;\n                    --qty-border-radius: 0;\n                    --qty-disabled-background-color: #CCCCCC;\n                    --qty-font-color: #000000;\n                    --qty-font-size: 14;\n                    --qty-height: 22;\n                    --qty-width: 44;\n                    --qty-margin-l-r: 2;\n                    --qty-margin-t-b: 2;\n                    --qty-max-width: 400;\n                "),t.config.ymq_option_branding.hasOwnProperty("ajax-modal")||(e+="\n                    --ajax-cart-modal-button-font-size: 15;\n                    --ajax-cart-modal-button-background-color: #000;\n                    --ajax-cart-modal-button-color: #fff;\n                    --ajax-cart-modal-button-min-width: 150;\n                    --ajax-cart-modal-button-padding-t-b: 10;\n                    --ajax-cart-modal-button-padding-l-r: 15;\n                    --ajax-cart-modal-alert-font-size: 16;\n                    --ajax-cart-modal-alert-radius: 5;\n                    --ajax-cart-modal-alert-padding: 5;\n                    --ajax-cart-modal-alert-background-color: #f0f9eb;\n                    --ajax-cart-modal-alert-color: #67c23a;\n                "),Object.keys(t.config.ymq_option_branding).forEach((function(i){"lan"!=i&&"extra"!=i&&Object.keys(t.config.ymq_option_branding[i]).forEach((function(n){e+=`\n                    ${n}: ${t.config.ymq_option_branding[i][n]};\n                `}))})),e+="}";var i=t.config.util.getValue(t.config.ymq_option_branding.extra,"title-value","1,2,9,10");(i=i.split(",")).push(18,19);var n=[];i.forEach((function(t){n.push(`.ymq-options-box-${t} .ymq_option_text_span`)})),e+=`\n            ${n.join(",")}{\n                display: none;\n            }\n        `,e+=t.config.util.getValue(t.config.ymq_option_branding.extra,"extra-style-code",""),e+=t.config.util.getValue(t.config.ymq_option_branding.extra,"extra-product-page-style-code",""),ymqJq(t.config.styleDomId).html(e);var a=`<style type="text/css">${t.config.util.getValue(t.config.ymq_option_branding.extra,"customecss","")}</style>`;return ymqJq("body").append(a),t}buildOptionDom(){var t=this;t.config.shopify_option_after?t.buildYmqDom().buildShopifyDom():t.buildShopifyDom().buildYmqDom(),t.config.hide_variant_options&&ymqJq(".ymq-shopify-option-box").remove();try{ymqJq("div[class*='ymq_qty_default_']").each((function(){var t=1;ymqJq(this).attr("class").split(" ").forEach((e=>{-1!=e.indexOf("ymq_qty_default_")&&e.split("ymq_qty_default_")[1]&&(t=parseInt(e.split("ymq_qty_default_")[1]))})),t>0&&ymqJq(this).find(".ymq-qty-input").val(t)})),ymqJq("div[class*='ymq_qty_min_']").each((function(){var t=1;ymqJq(this).attr("class").split(" ").forEach((e=>{-1!=e.indexOf("ymq_qty_min_")&&e.split("ymq_qty_min_")[1]&&(t=parseInt(e.split("ymq_qty_min_")[1]))})),t>0&&(ymqJq(this).find(".ymq-qty-input").val(t),ymqJq(this).find(".ymq-qty-input").attr("min",t).prop("min",t))})),ymqJq("div[class*='ymq_qty_max_']").each((function(){var t=1e5;ymqJq(this).attr("class").split(" ").forEach((e=>{-1!=e.indexOf("ymq_qty_max_")&&e.split("ymq_qty_max_")[1]&&(t=parseInt(e.split("ymq_qty_max_")[1]))})),t>0&&ymqJq(this).find(".ymq-qty-input").attr("max",t).prop("max",t)}))}catch(t){}return t}buildShopifyDom(){var t=this;return t.config.variantOriginal||t.variant.buildVariantHtml().isSoldOut(),t}isRadioCanBeUnchecked(){var t=this;return 1==t.config.util.getValue(t.config.ymq_option_branding.extra,"radio-unchecked",0)&&ymqJq('.ymq-options-box:not(.ymq-shopify-option-box) input[type="radio"]:not(.ymq-quantity-radio)').on("click",(function(){var t=ymqJq(this).attr("name");ymqJq(this).attr("checked")?ymqJq(this).attr("checked",!1).prop("checked",!1).trigger("change"):(ymqJq(`.ymq-options-box input[type="radio"][name="${t}"]`).attr("checked",!1).prop("checked",!1),ymqJq(this).attr("checked",!0).prop("checked",!0))})),t}buildYmqDom(){var t=this;t.config.ymqHook("buildYmqDom_b"),t.htmlBuilder.setJson(t.config.ymq_option_data,t.config.ymq_option_condition).buildtHtml();try{t.config.lock_price&&(1==t.config.lock_price_type&&(ymqJq("head").append("<style>.ymq-option-title-right-price,.ymq-price-in-option-value { display: none !important; }</style>"),ymqJq(".ymq-dropdown .ymq-price-in-option-value").remove()),2==t.config.lock_price_type&&ymqJq(".ymq-box").remove())}catch(t){}return t.config.ymqHook("buildYmqDom_a"),t}resetPrice(){var t=this;return ymqOptionIntervalResult(1e5,10,(function(){return 1==window.ymq_option.variant_json_success&&(setTimeout((()=>{ymqJq("[ymq-add-price-variant]").each((function(){try{var e=window.ymq_option.variant_json[Number(ymqJq(this).attr("ymq-add-price-variant"))];if(e){var i=e.price/100;try{i=(i/Shopify.currency.rate).toFixed(2)}catch(t){i=i.toFixed(2)}var n=t.config.getSelectButtonPrice(i,ymqJq(this).parents(".ymq-options-box").data("type"));if(0==e.available&&(ymqJq(this).data("title",t.config.ymq_option_branding.lan.sold_out),ymqJq(this).addClass("ymq_disabled_class").addClass("ymq_sold_out").attr("disabled",!0).change()),ymqJq(this).data("price",i),"OPTION"==ymqJq(this).get(0).tagName){if(ymqJq(this).find(".ymq-price-in-option-value").remove(),ymqJq(this).append(n),ymqJq(this).parent("select").parent().hasClass("ymq-dropdown")){ymqJq(this).parent("select").parent().children().each((function(t){"SELECT"!=ymqJq(this).get(0).tagName&&ymqJq(this).remove()})),ymqJq(this).parent("select").removeClass("ymq-inited").unwrap();try{var a=ymqJq(this).parents(".ymq-options-box").data("type");a=null!=a?a.toString():"7"}catch(t){a="7"}t.htmlBuilder.initDropdown(ymqJq(this).parent("select"),a)}ymqJq(this).parent("select").change()}else{var o=ymqJq(`[for="${ymqJq(this).attr("id")}"]`);o.find(".ymq-price-in-option-value").remove(),o.append(n),ymqJq(this).change()}}}catch(t){console.error(t)}}))}),10),!0)})),t}buildHiddenInputForDwanTheme(){var t=this;try{var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"add-to-cart-form",""),i='form[id^="AddToCartForm-template"],form[id^="product-form-template"]';if(e=""!=e?`${e},${i}`:i,t.config.add_to_cart_form=e,""!=e&&ymqJq(e).length>0){var n=ymqJq('<div class="add-to-cart-form-input-box"></div>');ymqJq(e).append(n),ymqJq(".ymq-options-box .ymq-hidden-input").each((function(){ymqJq(".add-to-cart-form-input-box").append(ymqJq(this).clone())}))}}catch(t){}return ymqJq(".ymq-hidden-input:not(.ymq-hidden-file-input)").each((function(){ymqJq(this).data("ymq-empty-name",ymqJq(this).attr("name"))})),t}triggerThemeOptions(){var t=this;try{var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-option-dom","");e&&ymqJq(document).on("change",".ymq-shopify-option",(function(){if(ymqJq(this).hasClass("ymq-dropdown"))var i=ymqJq(this).find("option:selected").attr("id");else i=ymqJq(this).attr("id");var n=(i=i.split("-")).length,a=i[n-2],o=i[n-1];i=e.replace(/ymq1/g,a).replace(/ymq2/g,o);if(ymqJq(i).length>0){"OPTION"==ymqJq(i).get(0).tagName&&(ymqJq(i).prop("selected",!0).parent("select").trigger("change"),t.config.util.jstrigger(ymqJq(i).parent("select")[0],"change"));var r=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-option-type",2);0!=r&&2!=r||ymqJq(i).trigger("click"),1!=r&&2!=r||ymqJq(i)[0].click()}}))}catch(t){}return t}textAreaAutoHeight(){return ymqJq.fn.ymqAutoHeight=function(){function t(t){t.style.height="auto",t.scrollTop=0,t.style.height=t.scrollHeight+"px"}this.each((function(){t(this),ymqJq(this).on("input",(function(){t(this)}))}))},ymqJq(".ymq-options-box textarea").ymqAutoHeight(),this}disabledSubmit(){var t=this;return t.config.hideByNow?(window.ymq_option.buy_now_new||ymqJq(t.config.form_box).submit((function(t){return t.preventDefault(),!1})),t):t}buildAddToCartDom(){var t=this;return t}getQuantity(){return parseInt(this.quantityDom.val())||1}reSetQtyByRadioValue(){var t=this.getQuantityGradeByRadioInput();null!=t&&this.setQuantity(t.quantity)}setQuantity(t){return isNaN(t)&&(t=1),t<1&&(t=1),this.quantityDom.val(t),this}setQuantityByQty(){var t=this;if(t.config.quantity_is_fix_type){var e=t.getQuantity();if(null!=(n=t.getQuantityGradeByRadioInput())){var i=n.quantity;e>i&&(ymqJq(".ymq-quantity-radio:checked").parents(".ymq-quantity-radio-box").next(".ymq-quantity-radio-box").find(".ymq-quantity-radio").trigger("click"),t.reSetQtyByRadioValue()),e<i&&(ymqJq(".ymq-quantity-radio:checked").parents(".ymq-quantity-radio-box").prev(".ymq-quantity-radio-box").find(".ymq-quantity-radio").trigger("click"),t.reSetQtyByRadioValue())}}else{var n,a=t.getQuantity();a=parseInt(a),isNaN(a)&&(a=1),!isNaN(t.config.min_quantity)&&a<t.config.min_quantity&&(a=t.config.min_quantity),!isNaN(t.config.max_quantity)&&a>t.config.max_quantity&&(a=t.config.max_quantity),t.setQuantity(a),null!=(n=t.getQuantityGradeByQtyInput())&&(0==ymqJq(`.ymq-quantity-radio-${n.quantity}`).length?ymqJq(".ymq-quantity-radio:checked").attr("checked",!1).prop("checked",!1):ymqJq(`.ymq-quantity-radio-${n.quantity}`).attr("checked")&&ymqJq(`.ymq-quantity-radio-${n.quantity}`).prop("checked")||(t.needchange=!1,ymqJq(`.ymq-quantity-radio-${n.quantity}`).trigger("click")))}}setQuantityByRadio(){var t=this,e=t.getQuantityGradeByRadioInput();return null!=e?t.setQuantity(e.quantity):isNaN(t.config.min_quantity)?t.setQuantity(1):t.setQuantity(t.config.min_quantity),t}getShopifyJqDom(t){return ymq.$?ymq.$(t):ymqJq(t)}buildQuantityDom(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"show-quantity",""),i="";if(""!=t.config.form_class_name&&(i=`,${t.config.formClass('[name="quantity"]')}`),""!=e&&ymqJq(e).length>0)var n=t.getShopifyJqDom(`${e}${i}`);else(n=t.getShopifyJqDom(`${t.config.form_box} [name="quantity"]${i}`)).length>1&&(n=t.getShopifyJqDom(t.config.formClass('[name="quantity"]')));if(n.length>=1)t.quantityDom=n;else{if(!t.quantityDomInited){if(0==t.config.util.getValue(t.config.ymq_option_branding.extra,"quantity-box",1))var a=`\n                            <div class="ymq-quantity-wrapper">\n                                <div id="${t.config.quantity_box}" style="display: none!important;">\n                                    <input id="${t.config.quantity_input}" value="1" readonly type="hidden">\n                                </div>\n                            </div>\n                        `;else a=`\n                            <div class="ymq-quantity-wrapper">\n                                <div id="${t.config.quantity_box}">\n                                    <div class="${t.config.quantity_change}" data-type="cut" id="${t.config.quantity_add}">-</div>\n                                    <input id="${t.config.quantity_input}" name="quantity" value="1" type="text">\n                                    <div class="${t.config.quantity_change}" data-type="add" id="${t.config.quantity_cut}">+</div>\n                                </div>\n                            </div>\n                        `;t.config.shopify_option_after&&t.config.variantOriginal?ymqJq(".ymq-qty-price-box").append(a):ymqJq("#ymq-box").append(a),t.quantityDomInited=!0}t.quantityDom=t.getShopifyJqDom(`#${t.config.quantity_input}`),t.config.quantity_is_fix_type&&t.config.quantity_has_value&&t.quantityDom.attr("readonly",!0).prop("readonly",!0)}return t.registerQuantityChangeEvent(),t.setQuantityByRadio(),t}buildShowAddTotalPriceInfoDom(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-price-in-product-page",""),i=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-compare-at-price-in-product-page","");if(!(""!=e&&ymqJq(e).length>0||""!=i&&ymqJq(i).length>0)||1==t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"ymq-price-addons",0)){var n=`\n                    <div id="ymq-price-addons">\n                        ${t.config.ymq_option_branding.lan.add_price_text.replace("%s",'<span id="ymq-addons-price"></span>')}\n                    </div>\n                `;t.config.shopify_option_after&&t.config.variantOriginal?ymqJq(".ymq-qty-price-box").append(n):ymqJq("#ymq-box").append(n)}return t}registerQuantityChangeEvent(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"quantity-change","");return ymqJq(".ymq-quantity-change").each((function(e,i){t.de(i,"click","namespace","","disable")})),t.quantityDom.each((function(e,i){t.de(i,"change","namespace","ymq","disable")})),""!=e&&ymqJq(e).each((function(e,i){t.de(i,"click","namespace","ymq","disable")})),ymqJq(".ymq-quantity-change").on("click",(function(){var e=-1;"add"==ymqJq(this).data("type")&&(e=1);var i=t.getQuantity();i=Number(i),i+=e,t.setQuantity(i),t.quantityDom.change()})),""!=e&&ymqJq(e).on("click.ymq",(function(){setTimeout((()=>{t.quantityDom.change()}),50)})),t.quantityDom.on("change.ymq",(function(){console.log("qty change"),t.quantityChange()})),this}quantityChange(){this.setQuantityByQty(),this.buildFormData().buildOtherFormData()}getQuantityGradeByQtyInput(){var t=this.getQuantity();return this.doGetQuantityGrade(t)}getQuantityGradeByRadioInput(){var t=ymqJq(".ymq-quantity-radio:checked").val();return this.doGetQuantityGrade(parseInt(t))}doGetQuantityGrade(t){var e=this,i=null;if(e.config.hasQuantity&&e.config.quantity_has_value)if(e.config.quantity_is_fix_type)try{Object.keys(e.config.quantity.options).forEach((function(n){if(t==n)throw i=e.config.quantity.options[n],new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}else try{Object.keys(e.config.quantity.options).forEach((function(n){if(t>=n&&t<=e.config.quantity.options[n].quantity_max)throw i=e.config.quantity.options[n],new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}return i}getShopifySelectDom(){var t=this;t.config.form_box_dom.css("cssText","display:block !important;");var e=[],i=[],n=[],a=[];try{t.config.form_box_dom.find("select").each((function(){e=[],i=[],n=[];var a=ymqJq(this);ymqJq(this).find("option").each((function(){e.push(ymqJq(this).html()),i.push(ymqJq(this).val()),n.push(t.config.util.htmlSpecialChars(ymqJq(this).val()))})),Object.keys(t.config.ymq_shopify_options).forEach((function(o,r){t.config.shopifySelectDom.hasOwnProperty(o)||JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(e)&&JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(i)&&JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(n)||(t.config.shopifySelectDom[o]={},t.config.shopifySelectDom[o].jq=a,t.config.shopifySelectDom[o].type="select",a.attr("id")?t.config.shopifySelectDom[o].id=a.attr("id"):(t.config.shopifySelectDom[o].id=`ymq_shopify_select_id_${o}`,a.attr("id",`ymq_shopify_select_id_${o}`)))}))})),t.config.form_box_dom.find(":radio").each((function(){a.push(ymqJq(this).attr("name"))})),(a=ymqJq.unique(a)).forEach((function(e){i=[],n=[];var a=e.replace("'","\\'");ymqJq(`input[name='${a}']`).each((function(){i.push(ymqJq(this).val()),n.push(t.config.util.htmlSpecialChars(ymqJq(this).val()))}));var o=ymqJq(`input[name='${a}']`);Object.keys(t.config.ymq_shopify_options).forEach((function(a,r){t.config.shopifySelectDom.hasOwnProperty(a)||JSON.stringify(t.config.ymq_shopify_options[a])!=JSON.stringify(i)&&JSON.stringify(t.config.ymq_shopify_options[a])!=JSON.stringify(n)||(t.config.shopifySelectDom[a]={},t.config.shopifySelectDom[a].jq=o,t.config.shopifySelectDom[a].type="radio",t.config.shopifySelectDom[a].name=e)}))}))}catch(t){console.log(t)}return t}registerInputChangeEvent(){var t=this;ymqJq(document).on("keydown","input.ymq-input-text",(function(t){if(13==t.keyCode)return t.preventDefault(),!1})),ymqJq(document).on("keyup","input.ymq-input-text",(function(t){if(13==t.keyCode)return t.preventDefault(),!1})),ymqJq(document).on("keyup",".ymq-input-text",(function(t){ymqJq(this).change()})),ymqJq(t.config.form_box).find('input[type="text"],input[type="number"],textarea').on("keyup",(function(){var e=ymqJq(this).parents(".ymq-options-box");t.buildFormData().buildOtherFormData().validateOne(e),t.config.hideByNow&&t.config.cancelAjaxCart||t.controllerPaymentButton(!1)}));return""!=t.config.form_class_name&&(t.config.formClass("input"),t.config.formClass("select"),t.config.formClass("textarea")),ymqJq(document).on("change","input,select,textarea",(function(){var e=ymqJq(this).parents(".ymq-options-box");ymqJq(this).hasClass("ymq-shopify-option")&&(t.variant.isSoldOut(),t.variant.changeUriByVariantId()),e.hasClass("ymq-options-qty-box")&&!ymqJq(this).hasClass("ymq-qty-input")&&("SELECT"==ymqJq(this).get(0).tagName?(e.find(".ymq-qty-input").attr("disabled",!0),ymqJq(this).find("option:selected:not(:disabled)").each((function(){var t=ymqJq(this).data("id");t&&ymqJq(`.ymq-qty-input-${t}`).attr("disabled",!1)}))):("radio"==ymqJq(this).attr("type")&&e.find(".ymq-qty-input").attr("disabled",!0),ymqJq(this).prop("checked")&&!ymqJq(this).prop("disabled")?ymqJq(`.ymq-qty-input-${ymqJq(this).data("id")}`).attr("disabled",!1):ymqJq(`.ymq-qty-input-${ymqJq(this).data("id")}`).attr("disabled",!0))),ymqJq(this).hasClass("ymq-qty-input")&&ymqJq(this).val(t.config.util.getIntValue(ymqJq(this))),t.buildFormData().buildOtherFormData().validateOne(e),t.config.hideByNow&&t.config.cancelAjaxCart||t.controllerPaymentButton(!1)})),ymqJq(document).on("change",".ymq-quantity-radio",(function(){t.needchange&&t.setQuantityByRadio().buildFormData().buildOtherFormData(),t.needchange=!0})),ymqJq(".ymq-qty-input-trigger").on("click",(function(){var t=ymqJq(this).data("clazz");if(ymqJq(t).prop("disabled")){if(!ymqJq(this).hasClass("ymq-qty-input-trigger-cut")){i=`#ymq-attrib-${ymqJq(t).data("id")}`;ymqJq(i).length>0&&ymqJq(i).is("input")&&(ymqJq(i).prop("checked")||ymqJq(i).trigger("click").change())}}else{var e=Number(ymqJq(t).val())+Number(ymqJq(this).data("num"));if(ymqJq(t).val(e).change(),0==e){var i=`#ymq-attrib-${ymqJq(t).data("id")}`;ymqJq(i).length>0&&ymqJq(i).is("input")&&ymqJq(i).prop("checked")&&ymqJq(i).trigger("click").change()}}})),ymqJq(document).on("click",".ymq-dropdown-img",(function(){ymqJq(this).parents(".ymq-multiple-li").find("a").click()})),t}validateOne(t){var e=this,i=t.data("name");return e.validate.validateOne(e.formData[i]),e}validateAll(t=!1){var e=this;return e.validate.validateAll(e.formData,t),e}checkout(t,e){var i=this;if(t.hasClass("ymq-btn-progress"))return!1;try{if(i.buildFormData().buildOtherFormData(),i.validate.validateAll(i.formData,!0),0!=i.validate.validateCount)return e.stopImmediatePropagation(),e.preventDefault(),!1;i.startLoading(t);var n={attributes:{},cart_level_discount_applications:[],currency:Shopify.currency&&Shopify.currency.rate&&Shopify.currency.active},a=i.getQuantity(),o=a;n.items=[];var r=i.config.variantData[i.variant.variant_id];"Default Title"==r.title?r.title=i.config.product.title:r.title=`${i.config.product.title} - ${r.title}`,r.variant_id=i.variant.variant_id,r.key=i.ymqUUID(),r.quantity=a,r.grams=r.weight,r.product_id=i.config.product.id,r.product_title=i.config.product.title,r.original_price=i.config.variantData[i.variant.variant_id].price,r.line_price=i.config.variantData[i.variant.variant_id].price*a,r.final_line_price=i.config.variantData[i.variant.variant_id].price*a,r.original_line_price=i.config.variantData[i.variant.variant_id].price*a,r.properties=i.getAjaxDataByFormData(),n.items.push(r);var c=!1;Object.keys(r.properties).forEach((t=>{r.properties[t];0==c&&["_YmqItemDiscount","_YmqItemPrice","_YmqItemPriceOneTime","_YmqItemSku","_YmqItemWeight"].includes(t)&&(c=!0)})),i.ymq_option_variants.forEach((t=>{var e=1;if(1==(t=t.split(" * ")).length||(e=t[1]),t=t[0],window.ymq_option.variant_json.hasOwnProperty(t)){var r=window.ymq_option.variant_json[t];o+=Number(a*e),n.items.push({variant_id:t,key:i.ymqUUID(),properties:null,grams:r.weight,product_id:r.product_id,original_price:r.price,line_price:r.price*a,final_line_price:r.price,original_line_price:r.price*a,quantity:a*e})}})),i.ymq_option_variants_single.forEach((t=>{var e=1;if(1==(t=t.split(" * ")).length?t=t[0]:e=(t=t[0])[1],window.ymq_option.variant_json.hasOwnProperty(t)){var a=window.ymq_option.variant_json[t];o+=e,n.items.push({variant_id:t,key:i.ymqUUID(),properties:null,grams:a.weight,product_id:a.product_id,original_price:a.price,line_price:a.price,final_line_price:a.price,original_line_price:a.price,quantity:e})}})),n.item_count=o;var s={data:n,allowDiscountCodesInCheckout:1,discountCode:"",shop:i.config.shop,token:i.config.token,timestamp:i.config.timestamp,customer_id:i.config.customer_id,note:"",version:2,currency:Shopify.currency&&Shopify.currency.rate&&Shopify.currency.active,rate:Shopify.currency&&Shopify.currency.active&&Shopify.currency.rate,note_attributes:"",tags:"",has_automatic_discount:!0,page:"product"};ymqJq.post("https://option.ymq.cool/api/checkout",s).done((function(e){window.location.href=e.data,setTimeout((function(){i.endLoading(t)}),5e3)})).fail((function(n){i.addCartAjax(e,i,t)}))}catch(n){i.addCartAjax(e,i,t),console.log(each)}}registerBuyItNowEvent(){var t=this;return ymqJq(".ymq-options-box-12").length>0||(t.config.ymqHook("build_buy_now"),ymqJq(document).on("click",`.${t.config.buy_id_now}`,(function(e){t.checkout(ymqJq(this),e)}))),t}getOptionVlaue(t){var e=this,i="";try{if(i=t.value.join(e.config.option_value_split),1==Number(e.config.util.getValue(e.config.ymq_option_branding.extra,"add-cart-carry-currency","1"))){var n=e.config.doFormatWithWrappeStr(" | ","",Number(t.price)+Number(t.vprice),t.onetime,!1);if(""!=n){try{n=n.replace("<sup>","").replace("</sup>","")}catch(t){}i+=n}}}catch(t){i=""}return i}getAjaxDataByFormData(){var t=this,e={};t.ogFormData=new FormData,t.has_upload=!1,t.ajax_properties={},Object.keys(t.formData).forEach((function(i){if((0!=t.formData[i].value.length||t.formData[i].hasOwnProperty("isFile"))&&t.formData[i].addToCart&&(t.formData[i].hasOwnProperty("isFile")||!t.formData[i].unbundle_prop||0==t.config.unbundle_addcart)){t.selectedValue=t.formData[i];var n=t.getOptionVlaue(t.selectedValue),a=i.substring(11,i.length-1);if(t.formData[i].hasOwnProperty("hide")&&1==t.formData[i].hide&&(a="_"+a),t.formData[i].hasOwnProperty("isFile")){if(t.config.real_time_upload){var o=t.formData[i].dom.parents(".ymq-options-box");o.find(".ymq-hidden-file-input").length>0&&o.find(".ymq-hidden-file-input").each((function(){var i=ymqJq(this).attr("name").substring(11,ymqJq(this).attr("name").length-1);t.ogFormData.set(ymqJq(this).attr("name"),ymqJq(this).val()),e[i]=ymqJq(this).val(),t.ajax_properties[i]=ymqJq(this).val()}))}else if(t.upload.fileData.hasOwnProperty(i)){var r=Object.keys(t.upload.fileData[i]).length;r>0&&(t.has_upload=!0,Object.keys(t.upload.fileData[i]).forEach((function(e,n){t.ogFormData.set(1==r?i:t.reCreatName(i,n+1),t.upload.fileData[i][e].file,t.upload.fileData[i][e].name)})))}}else t.ogFormData.set(`properties[${a}]`,n),e[a]=n,t.ajax_properties[a]=n}}));let i={};if(ymq_option.transform_function&&ymq_option.transform_function_image){let n=!0;if(Object.keys(e).forEach((a=>{let o=e[a];"_YmqEVariantIdsOneTime"==a||"_YmqEVariantIds"==a?t.bundleTransformFunction()&&(i[a]=o):i[a]=o,["_YmqItemSku","_YmqItemWeight","_YmqItemDiscount","_YmqWholesalePricing"].includes(a)&&(n=!1)})),n){if(t.bundleTransformFunction()){let e={};if(i.hasOwnProperty("_YmqEVariantIdsOneTime")){let n=t.parseStringToObject(i._YmqEVariantIdsOneTime);Object.keys(n).forEach((t=>{let i=ymqJq(`[ymq-add-price-variant="${t}"]`).data("price");i&&(e[t]=Number(i))}))}if(i.hasOwnProperty("_YmqEVariantIds")){let n=t.parseStringToObject(i._YmqEVariantIds);Object.keys(n).forEach((t=>{let i=ymqJq(`[ymq-add-price-variant="${t}"]`).data("price");i&&(e[t]=Number(i))}))}ymqJq.isEmptyObject(e)||(i._YmqItemVp=e)}(i.hasOwnProperty("_YmqItemPrice")||i.hasOwnProperty("_YmqItemPriceOneTime")||i.hasOwnProperty("_YmqEVariantIds")||i.hasOwnProperty("_YmqEVariantIdsOneTime"))&&(t.ogFormData.set("properties[__ymq_option_info]",JSON.stringify(i)),e.__ymq_option_info=JSON.stringify(i),t.ajax_properties.__ymq_option_info=JSON.stringify(i))}}return e}reCreatName(t=null,e=0){return`properties[${t=t.substring(11,t.length-1)}_${e}]`}registerAddToCartEvent(){var t=this;return ymqJq("body").on("click",`#${t.config.add_to_cart}`,(function(){if(t.validate.validateAll(t.formData,!0),0!=t.validate.validateCount)return!1;ymqJq(this).addClass("ymq-btn-progress");var e=t.getAjaxDataByFormData();e.id=t.variant.variant_id,e.quantity=t.getQuantity(),ymqJq.ajax({type:"POST",url:"/cart/add.js?_easygift_form_payload=true",data:e,dataType:"json",success:function(t){window.location.href="/cart"},error:function(t){ymqJq(this).removeClass("ymq-btn-progress")}})})),t}getMultiple(t){return-1!=this.config.multipleTypeArray.indexOf(Number(t))}buildOtherFormData(){var t=this;if(0==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"other-form-data",0)))return t;try{if(ymqJq("[name^='properties']:not(.ymq-hidden-input)").length>0){ymqJq("[name^='properties']:not(.ymq-hidden-input)").each((function(){if(!ymqJq(this).prop("disabled")){var e="",i=ymqJq(this).attr("name"),n=ymqJq(this).get(0).tagName.toLowerCase(),a=ymqJq(this).attr("ymq-other-validate");if(ymqJq(this).attr("ymq-other-name"))var o=ymqJq(this).attr("ymq-other-name");else o=i.match(/\[(.+?)\]/g)[0].replace("[","").replace("]","");if(!t.formData.hasOwnProperty(i)){"select"==n?e="select":"textarea"==n?e="textarea":"input"==n&&(e=ymqJq(this).attr("type")?ymqJq(this).attr("type"):"text");var r=[];if("select"==e){var c=ymqJq(this).val();c instanceof Array?r=c:r.push(ymqJq(this).val())}else if(["textarea","text","hidden"].includes(e))""!=ymqJq(this).val()&&r.push(ymqJq(this).val());else if(["checkbox","radio"].includes(e))ymqJq(`[name='${i}']:not(:disabled):checked`).each((function(){r.push(ymqJq(this).val())}));else try{r.push(ymqJq(this).val())}catch(t){}r=r.filter((t=>""!=t)),t.formData[i]={dom:null,label:i,unbundle:!1,unbundle_prop:!1,hide:!1,onetime:0,price:0,vprice:0,validate:a,value:r,variant_ids:[],variant_ids_value:[],nameStr:o,name:i,addToCart:!0,hasQty:!1,otherValidate:!0},"file"==e&&(t.formData[i]={dom:null,label:i,unbundle:!1,unbundle_prop:!1,hide:!1,isFile:!0,onetime:0,price:0,vprice:0,validate:a,value:[],variant_ids:[],variant_ids_value:[],nameStr:o,name:i,addToCart:!0,hasQty:!1,otherValidate:!0})}}})),t.getAjaxDataByFormData();let e=t.ajax_properties.__ymq_option_info;e&&(ymqJq('[name="properties[__ymq_option_info]"]').remove(),t.buildHideInputForHIdeProperty("properties[__ymq_option_info]",e))}}catch(t){console.log(t)}return t}getOptionValueWithQty(t,e,i){if(i&&""!=t)try{var n=this.config.util.getOptionValueQty(e);return`${t}${this.config.qty_split}${n}`}catch(e){return t}return t}getOptionPriceWithQty(t,e,i,n){var a=e.data(t);if("price"==t&&(void 0===a&&e.data(t,0),a=this.getPercentagePrice(e,null,n)),void 0===a)return 0;if(i)try{var o=this.config.util.getOptionValueQty(e);return Number(a*o)}catch(t){return Number(a)}return Number(a)}getOptionVariantWithQty(t,e,i){if(i)try{return`${t} * ${this.config.util.getOptionValueQty(e)}`}catch(e){return t}return t}getPercentagePrice(t,e=null,i=!0,n=t.data("price")){if(void 0===n&&(n=0),window.ymq_option.ymq_option_branding.extra.plan<3)return n;if(t.is("select")&&(t=t.find("option:selected")),void 0!==t.attr("ymq-percentage-price")&&(null==e&&(e=this.config.variantData[this.variant.variant_id].price/100),n=e*(t.attr("ymq-percentage-price")/100)/Shopify.currency.rate),i)try{var a=t.data("ymq_discount_type"),o=n;if(1==a)(i=t.data("ymq_discount"))&&(n-=i)<0&&(n=o<0?o:0);else if(2==a){var r=t.data("ymq_percentage_discount");r&&(n*=(100-r)/100),n<0&&(n=o<0?o:0)}}catch(t){}return n}updateOptionPriceDom(){var t=this;setTimeout((()=>{var e=t.config.util.getValue(t.config.ymq_option_branding.lan,"price-split","+"),i=t.config.util.getValue(t.config.ymq_option_branding.lan,"free","Free"),n=t.config.variantData[t.variant.variant_id].price/100;ymqJq("[ymq-percentage-price],[ymq-has-compare-at-price]").each((function(){var a=[],o=t.getPercentagePrice(ymqJq(this),n),r=t.getPercentagePrice(ymqJq(this),n,!1);if(ymqJq(this).is("option")){ymqJq(this).parent(".ymq-dropdown").hasClass("ymq-percentage-select-init")||(ymqJq(this).parent(".ymq-dropdown").addClass("ymq-percentage-select-init"),ymqJq(this).parent(".ymq-dropdown").find("option").each((function(t,e){ymqJq(this).attr("data-index",t)}))),a.push(ymqJq(this).find(".ymq-price-in-option-value"));var c=ymqJq(this).parents(".ymq-percentage-select-init");a.push(c.next(".ymq-multiple-ul").find(`.ymq-multiple-li[data-index="${ymqJq(this).attr("data-index")}"] .ymq-price-in-option-value`));try{var s=ymqJq(this).parent().val();Array.isArray(s)?s.includes(ymqJq(this).attr("value"))&&a.push(c.next(".ymq-multiple-ul").next("span").find(".ymq-price-in-option-value")):(s=ymqJq(this).attr("value"))&&a.push(c.next(".ymq-multiple-ul").next("span").find(".ymq-price-in-option-value"))}catch(t){a.push(c.next(".ymq-multiple-ul").next("span").find(".ymq-price-in-option-value"))}}else a.push(ymqJq(`[for="${ymqJq(this).attr("id")}"] .ymq-price-in-option-value`));var m=t.config.doFormatWithWrappeStr(` ${o>0?'<span class="ymq-price-split">&nbsp;'+e+"</span>":"&nbsp;"} `,"",o);r>o&&(m+=0==o?`<span class="ymq-compare-at-price-free-text">&nbsp; ${i}</span> <span style="margin-left:3px!important;" class="ymq-compare-at-price ymq-compare-at-price-free"> ${t.config.doFormat(r)} </span>`:` <span class="ymq-compare-at-price">${t.config.formatMoney(r*t.config.Shopify.currency.rate)}</span>`),a.forEach((t=>{t.html(m)}))}))}),1)}filterArray(t,e){return t.filter((t=>!e.some((e=>t===e))))}buildFormData(){var t=this;if(t.draft_order=!1,t.has_bundle_variant=!1,t.config.variantOriginal){if(t.config.iddom.length>0&&0==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-id-from",0)))var e=t.config.iddom.val();else e=t.config.util.getUrlParam("variant");e&&(t.variant.variant_id=e,t.variant.changeVariantId())}t.config.ymqHook("buildFormData_b"),t.formData={};try{var i=t.config.form_box_dom[0];ymqJq.contains(document,i)||t.initForm()}catch(t){}var n=t.config.form_box_dom.find(".ymq-options-box"),a="",o=1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"condition_disable_new",0));n.each((function(){var e=ymqJq(this).data("name"),i=ymqJq(this).data("label"),n=Number(ymqJq(this).data("type")),r=ymqJq(this).data("class"),c=Number(ymqJq(this).data("onetime")),s=ymqJq(this).hasClass("ymq-options-qty-box"),m=1==Number(ymqJq(this).data("ymq-add-to-cart"));window.ymq_option.ymq_option_branding.extra.plan<2&&(c=0);var l={},d=ymqJq(this).find(`.${r}`),p=ymqJq(this).find(`.${r}:disabled`),u=(ymqJq(this).find(`.${r}[ymq-add-price-variant]`),ymqJq(this).attr("data-ymq-unbundle_variant"));t.bundleTransformFunction()&&(u=0);var y=o&&ymqJq(this).is(":visible"),_=ymqJq(this).data("validate");if(18==n||19==n)if(p.length<d.length){t.config.has_wholesale_pricing=!0;var h=t.getQuantityGradeByQtyInput();if(null!=h){var q=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-rang","qtyRange"),f=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount","discount"),g=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type","discountType"),v=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type-percentage","percentage"),b=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type-fixed","fixed"),w=t.config.util.getValue(t.config.ymq_option_branding.lan,"max-quantity","999999"),x=`${q}: ${h.quantity} - ${999999==Number(h.quantity_max?h.quantity_max:h.quantity)?w:Number(h.quantity_max?h.quantity_max:h.quantity)} | ${f}: ${h.discount} | ${g}: ${1==Number(h.discount_type)?v:b}`;a=`discount:${h.discount},discount_type:${h.discount_type}`,l={onetime:0,price:0,cost_price:0,compare_at_price:0,vprice:0,validate:"",hide:!1,value:[x],sku:[],weight:0,variant_ids:[],variant_ids_value:[]}}else if(!(19!=n||isNaN(t.config.min_quantity)&&isNaN(t.config.max_quantity))){var k=1,J=t.config.max_num;isNaN(t.config.min_quantity)||(k=t.config.min_quantity),isNaN(t.config.max_quantity)||(J=t.config.max_quantity);x=`${q=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-rang","qtyRange")}: ( ${k} - ${J} ) `;a=`discount:${h.discount},discount_type:${h.discount_type}`,l={onetime:0,price:0,cost_price:0,compare_at_price:0,vprice:0,validate:"",hide:!1,value:[x],sku:[],weight:0,variant_ids:[],variant_ids_value:[]}}19==n&&(m=!1)}else t.config.has_wholesale_pricing=!1;else if(1==d.length){if(!d.prop("disabled")||y)if(l.onetime=c,7==n||3==n||20==n||21==n){l.value=[],l.sku=[],l.variant_ids=[],l.variant_ids_value=[];var $=0,O=0,C=0,D=0,j=0;ymqJq(this).find("option").each((function(){ymqJq(this).prop("selected")&&""!=ymqJq(this).val()&&!ymqJq(this).prop("disabled")&&(l.value.push(t.getOptionValueWithQty(ymqJq(this).val(),ymqJq(this),s)),ymqJq(this).attr("ymq-add-price-variant")?(l.variant_ids.push(t.getOptionVariantWithQty(ymqJq(this).attr("ymq-add-price-variant"),ymqJq(this),s)),l.variant_ids_value.push(t.getOptionValueWithQty(ymqJq(this).val(),ymqJq(this),s))):(ymqJq(this).data("sku")&&l.sku.push(ymqJq(this).data("sku")),ymqJq(this).data("weight")&&(j-=-t.getOptionPriceWithQty("weight",ymqJq(this),s))),ymqJq(this).attr("ymq-add-price-variant")?D-=-t.getOptionPriceWithQty("price",ymqJq(this),s):$-=-t.getOptionPriceWithQty("price",ymqJq(this),s),O-=-t.getOptionPriceWithQty("ymq_cost_price",ymqJq(this),s),C-=-t.getOptionPriceWithQty("price",ymqJq(this),s,!1))})),l.price=$,l.cost_price=O,l.compare_at_price=C,l.vprice=D,l.weight=j,l.validate=_}else if("radio"==d.attr("type")||"checkbox"==d.attr("type")){l.value=[],l.sku=[],l.variant_ids=[],l.variant_ids_value=[];$=0,O=0,C=0,D=0,j=0;d.prop("checked")&&(l.value.push(t.getOptionValueWithQty(d.val(),d,s)),d.attr("ymq-add-price-variant")?(l.variant_ids.push(t.getOptionVariantWithQty(d.attr("ymq-add-price-variant"),d,s)),l.variant_ids_value.push(t.getOptionValueWithQty(d.val(),d,s))):(d.data("sku")&&l.sku.push(d.data("sku")),d.data("weight")&&(j-=-t.getOptionPriceWithQty("weight",d,s))),d.attr("ymq-add-price-variant")?D-=-t.getOptionPriceWithQty("price",d,s):$-=-t.getOptionPriceWithQty("price",d,s),O-=-t.getOptionPriceWithQty("ymq_cost_price",d,s),C-=-t.getOptionPriceWithQty("price",d,s,!1)),l.price=$,l.cost_price=O,l.compare_at_price=C,l.vprice=D,l.weight=j,l.validate=_}else if("file"==d.prop("type")){if(l.value=[],l.sku=[],l.variant_ids=[],l.variant_ids_value=[],""!=t.config.util.getValue(t.config.ymq_option_branding.extra,"upload-num-prompt","")){var N=0;t.upload.fileData.hasOwnProperty(e)&&(N=Object.keys(t.upload.fileData[e]).length),l.value.push(`(${N} / ${d.data("file-num")})`)}0!=l.value.length&&(l.price=d.data("price")?Number(d.data("price")):0),l.price=0,l.cost_price=0,l.compare_at_price=0;var P=!1;t.config.real_time_upload?ymqJq(this).find(".ymq-hidden-file-input").length>0&&(P=!0):t.upload.fileData.hasOwnProperty(e)&&Object.keys(t.upload.fileData[e]).length>0&&(P=!0),P&&(l.price=t.getOptionPriceWithQty("price",d,s),l.cost_price=t.getOptionPriceWithQty("ymq_cost_price",d,s),l.compare_at_price=t.getOptionPriceWithQty("price",d,s,!1),l.weight=t.getOptionPriceWithQty("weight",d,s),l.sku=d.data("sku")?[d.data("sku")]:[]),l.isFile=!0,l.name=e,l.validate=_,l.onetime=c,l.variant_ids=[],l.variant_ids_value=[],l.vprice=0,l.validate=_}else l.value=""==d.val()?[]:[d.val()],l.price=0,l.cost_price=0,l.compare_at_price=0,l.vprice=0,l.weight=0,l.sku=[],l.variant_ids=[],l.variant_ids_value=[],0!=l.value.length&&(d.attr("ymq-add-price-variant")?(l.vprice=t.getOptionPriceWithQty("price",d,s),l.variant_ids=[t.getOptionVariantWithQty(d.attr("ymq-add-price-variant"),d,s)],l.variant_ids_value=l.value):(l.price=t.getOptionPriceWithQty("price",d,s),l.cost_price=t.getOptionPriceWithQty("ymq_cost_price",d,s),l.compare_at_price=t.getOptionPriceWithQty("price",d,s,!1),l.sku=d.data("sku")?[d.data("sku")]:[],l.weight=t.getOptionPriceWithQty("weight",d,s))),l.validate=_}else if(d.length!=p.length||y){l.onetime=c,l.value=[],l.sku=[],l.variant_ids=[],l.variant_ids_value=[];$=0,O=0,C=0,D=0,j=0;d.each((function(){ymqJq(this).prop("disabled")||ymqJq(this).prop("checked")&&(l.value.push(t.getOptionValueWithQty(ymqJq(this).val(),ymqJq(this),s)),ymqJq(this).attr("ymq-add-price-variant")?(l.variant_ids.push(t.getOptionVariantWithQty(ymqJq(this).attr("ymq-add-price-variant"),ymqJq(this),s)),l.variant_ids_value.push(t.getOptionValueWithQty(ymqJq(this).val(),ymqJq(this),s))):(ymqJq(this).data("sku")&&l.sku.push(ymqJq(this).data("sku")),ymqJq(this).data("weight")&&(j-=-t.getOptionPriceWithQty("weight",ymqJq(this),s))),ymqJq(this).attr("ymq-add-price-variant")?D-=-t.getOptionPriceWithQty("price",ymqJq(this),s):$-=-t.getOptionPriceWithQty("price",ymqJq(this),s),O-=-t.getOptionPriceWithQty("ymq_cost_price",ymqJq(this),s),C-=-t.getOptionPriceWithQty("price",ymqJq(this),s,!1))})),l.price=$,l.cost_price=O,l.compare_at_price=C,l.vprice=D,l.weight=j,l.validate=_}else 1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"min-max",0))&&!ymqJq(this).is(":hidden")&&ymqJq(this).find("[condition-disabled]").length>0&&(l.onetime=c,l.value=[],l.sku=[],l.variant_ids=[],l.variant_ids_value=[],l.price=0,l.cost_price=0,l.compare_at_price=0,l.vprice=0,l.weight=j,l.validate=_,setTimeout((()=>{t.validateOne(ymqJq(this))}),50));if(!ymqJq.isEmptyObject(l)){l.dom=d.eq(0),l.hasQty=s,l.label=i,l.addToCart=m,m||(l.sku=[],l.weight=0),l.unbundle=!1,l.unbundle_prop=!1,1==u&&(l.unbundle=!0,l.value.length==l.variant_ids_value.length&&(l.unbundle_prop=!0)),t.selectedValue=l;var S=t.selectedValue.value.join(t.config.option_value_split),A=t.config.doFormatWithWrappeStr(`${S}<span class="ymq-option-title-right-price"> | `,"</span>",Number(t.selectedValue.price)+Number(t.selectedValue.vprice),c);""!=A&&(t.selectedValue.compare_at_price&&t.selectedValue.compare_at_price>t.selectedValue.price+t.selectedValue.vprice&&(A+=` <span class="ymq-compare-at-price">${t.config.formatMoney(t.selectedValue.compare_at_price*t.config.Shopify.currency.rate)}</span>`),S=A);var E=t.config.util.getValue(t.config.ymq_option_branding.extra,"title-value","1,2,9,10");E=E.split(","),(ymqJq.inArray(n,E)>=0||ymqJq.inArray(n.toString(),E)>=0)&&ymqJq(this).find(".ymq_option_price_span").html(t.config.doFormat(t.selectedValue.price,c)),ymqJq(this).find(".ymq_option_text_span").html(S),ymqJq(this).hasClass("ymq-shopify-option-box")||(t.formData[e]=l)}})),t.updateOptionPriceDom(),t.ymq_total_price=0,t.ymq_total_price_single=0,t.ymq_option_price=0,t.ymq_option_price_single=0,t.ymq_option_sku=[],t.ymq_option_weight=0,t.ymq_option_price_to_cart=0,t.ymq_option_price_to_cart_single=0,t.ymq_option_cost_price_to_cart=0,t.ymq_option_cost_price_to_cart_single=0,t.ymq_option_vprice_to_cart=0,t.ymq_option_vprice_to_cart_single=0,t.ymq_option_variants=[],t.ymq_option_variants_single=[],t.ymq_option_variants_unbundle=[],t.ymq_option_variants_single_unbundle=[],t.ymq_option_variants_value=[],t.ymq_option_variants_single_value=[];var r=t.getQuantity();if(Object.keys(t.formData).forEach((function(e){if(1==Number(t.formData[e].onetime)){if(t.ymq_total_price=Number(t.ymq_total_price)+Number(t.formData[e].price)+Number(t.formData[e].vprice),t.ymq_option_price_single=Number(t.ymq_option_price_single)+Number(t.formData[e].price)+Number(t.formData[e].vprice),1==t.formData[e].addToCart){t.ymq_option_price_to_cart_single=Number(t.ymq_option_price_to_cart_single)+Number(t.formData[e].price),t.ymq_option_cost_price_to_cart_single=Number(t.ymq_option_cost_price_to_cart_single)+Number(t.formData[e].cost_price),t.ymq_option_vprice_to_cart_single=Number(t.ymq_option_vprice_to_cart_single)+Number(t.formData[e].vprice),t.formData[e].unbundle&&(t.ymq_option_variants_single_unbundle=t.ymq_option_variants_single_unbundle.concat(t.formData[e].variant_ids)),t.ymq_option_variants_single=t.ymq_option_variants_single.concat(t.formData[e].variant_ids);try{t.formData[e].variant_ids_value.forEach((i=>{var n={};n[t.formData[e].label]=i,t.ymq_option_variants_single_value.push(n)}))}catch(t){}}}else if(t.ymq_total_price=Number(t.ymq_total_price)+Number(t.formData[e].price)*r+Number(t.formData[e].vprice)*r,t.ymq_option_price=Number(t.ymq_option_price)+Number(t.formData[e].price)+Number(t.formData[e].vprice),1==t.formData[e].addToCart){t.ymq_option_price_to_cart=Number(t.ymq_option_price_to_cart)+Number(t.formData[e].price),t.ymq_option_cost_price_to_cart=Number(t.ymq_option_cost_price_to_cart)+Number(t.formData[e].cost_price),t.ymq_option_vprice_to_cart=Number(t.ymq_option_vprice_to_cart)+Number(t.formData[e].vprice),t.formData[e].unbundle&&(t.ymq_option_variants_unbundle=t.ymq_option_variants_unbundle.concat(t.formData[e].variant_ids)),t.ymq_option_variants=t.ymq_option_variants.concat(t.formData[e].variant_ids);try{t.formData[e].variant_ids_value.forEach((i=>{var n={};n[t.formData[e].label]=i,t.ymq_option_variants_value.push(n)}))}catch(t){}}try{var i=t.formData[e].weight;null!=i&&NaN!=i||(i=0),t.ymq_option_weight=Number(t.ymq_option_weight)+i,t.ymq_option_sku=t.ymq_option_sku.concat(t.formData[e].sku)}catch(t){}t.ymq_total_price_single=Number(t.ymq_total_price_single)+Number(t.formData[e].price)+Number(t.formData[e].vprice)})),t.config.bind_variant_on_add_to_cart)var c=["YmqItemMinMax","YmqItemDiscount","YmqItemPrice","YmqItemPriceOneTime","YmqItemCostPrice","YmqItemCostPriceOneTime","YmqItemSku","YmqItemWeight","YmqEVariantIds","YmqEVariantIdsOneTime","YmqWholesalePricing"];else c=["YmqItemMinMax","YmqItemDiscount","YmqItemPrice","YmqItemPriceOneTime","YmqItemCostPrice","YmqItemCostPriceOneTime","YmqItemSku","YmqItemWeight","YmqItemVPrice","YmqItemVPriceOneTime","YmqVariantIds","YmqVariantIdsOneTime","YmqWholesalePricing"];try{c.forEach((e=>{var i=[];switch(e){case"YmqItemMinMax":(0!=t.config.min_quantity||t.config.max_quantity!=t.config.max_num)&&window.ymq_option.ymq_option_branding.extra.plan>1&&i.push(`min:${t.config.min_quantity},max:${t.config.max_quantity}`);break;case"YmqItemDiscount":""!=a&&window.ymq_option.ymq_option_branding.extra.plan>2&&(a.startsWith("discount:0")||(t.draft_order=!0),i.push(a));break;case"YmqItemPrice":t.ymq_option_price_to_cart<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(t.ymq_option_price_to_cart=0),0!=t.ymq_option_price_to_cart&&(t.bundleTransformFunction()||(t.draft_order=!0),i.push(t.ymq_option_price_to_cart.toFixed(2)));break;case"YmqItemPriceOneTime":0!=t.ymq_option_price_to_cart_single&&window.ymq_option.ymq_option_branding.extra.plan>1&&(t.bundleTransformFunction()||(t.draft_order=!0),i.push(t.ymq_option_price_to_cart_single.toFixed(2)));break;case"YmqItemCostPrice":window.ymq_option.ymq_option_branding.extra.plan>2&&0!=t.ymq_option_cost_price_to_cart&&i.push(t.ymq_option_cost_price_to_cart.toFixed(2));break;case"YmqItemCostPriceOneTime":window.ymq_option.ymq_option_branding.extra.plan>2&&0!=t.ymq_option_cost_price_to_cart_single&&i.push(t.ymq_option_cost_price_to_cart_single.toFixed(2));break;case"YmqItemSku":t.ymq_option_sku.length>0&&window.ymq_option.ymq_option_branding.extra.plan>1&&(t.draft_order=!0,i.push(t.ymq_option_sku.join(t.config.util.getValue(t.config.ymq_option_branding.extra,"splicer","-"))));break;case"YmqItemWeight":t.ymq_option_weight>0&&window.ymq_option.ymq_option_branding.extra.plan>1&&(t.draft_order=!0,i.push(t.ymq_option_weight.toFixed(0)));break;case"YmqItemVPrice":t.ymq_option_vprice_to_cart<0&&window.ymq_option.ymq_option_branding.extra.plan<2&&(t.ymq_option_vprice_to_cart=0),0!=t.ymq_option_vprice_to_cart&&(t.draft_order=!0,i.push(t.ymq_option_vprice_to_cart.toFixed(2)));break;case"YmqItemVPriceOneTime":0!=t.ymq_option_vprice_to_cart_single&&window.ymq_option.ymq_option_branding.extra.plan>1&&(t.draft_order=!0,i.push(t.ymq_option_vprice_to_cart_single.toFixed(2)));break;case"YmqVariantIds":if(t.ymq_option_variants.length>0)t.draft_order=!0,(n=t.filterArray(t.ymq_option_variants,t.ymq_option_variants_unbundle)).length>0&&i.push(n.join(","));break;case"YmqVariantIdsOneTime":if(t.ymq_option_variants_single.length>0)t.draft_order=!0,(n=t.filterArray(t.ymq_option_variants_single,t.ymq_option_variants_single_unbundle)).length>0&&i.push(n.join(","));break;case"YmqEVariantIds":if(t.ymq_option_variants.length>0)t.bundleTransformFunction()||(t.draft_order=!0),t.has_bundle_variant=!0,(n=t.filterArray(t.ymq_option_variants,t.ymq_option_variants_unbundle)).length>0&&i.push(n.join(","));break;case"YmqEVariantIdsOneTime":var n;if(t.ymq_option_variants_single.length>0)t.bundleTransformFunction()||(t.draft_order=!0),t.has_bundle_variant=!0,(n=t.filterArray(t.ymq_option_variants_single,t.ymq_option_variants_single_unbundle)).length>0&&i.push(n.join(","));break;case"YmqWholesalePricing":t.config.wholesale_pricing.length>0&&1==t.config.has_wholesale_pricing&&i.push(t.config.wholesale_pricing.join(","))}i.length>0&&(t.formData[`properties[${e}]`]={addToCart:!0,dom:null,hasQty:!1,hide:!0,onetime:0,price:0,vprice:0,variant_ids:[],validate:void 0,sku:[],weight:0,value:i})}))}catch(t){console.log(t)}ymqJq(".ymq-hidden-input:not(.ymq-hidden-file-input)").each((function(){ymqJq(this).val("").attr("name",`empty-${ymqJq(this).data("ymq-empty-name")}`)})),ymqJq(".ymq-hide-properties").remove(),Object.keys(t.formData).forEach((function(e){try{if(!t.formData[e].isFile&&t.formData[e].addToCart&&0!=t.formData[e].value.length){var i;i=t.getOptionVlaue(t.formData[e]),ymqJq(`[name="empty-${e}"]`).length>0?1==t.formData[e].unbundle_prop&&0!=t.config.unbundle_addcart||ymqJq(`[name="empty-${e}"]`).val(i).attr("name",e):t.formData[e].hasOwnProperty("hide")&&1==t.formData[e].hide&&t.buildHideInputForHIdeProperty(e.replace(/properties\[/g,"properties[_"),i)}}catch(t){}})),window.ymq_option.real_time_upload&&ymqJq(".ymq-options-box .ymq-hidden-file-input").each((function(t){var e=ymqJq(this).prop("disabled"),i=ymqJq(this).attr("name");ymqJq(`[name="${i}"]`).prop("disabled",e)})),t.price(),t.buildQuantityDiscount(),t.config.doAppCurrency(),t.config.ymqHook("buildFormData_a");let s={};if(ymq_option.transform_function&&ymq_option.transform_function_image){let e=!0;if(ymqJq(".ymq-hidden-input").each((function(){let i=ymqJq(this).attr("name"),n=ymqJq(this).val();i.startsWith("properties[")&&(i=i.substring(11,i.length-1),"_YmqEVariantIdsOneTime"==i||"_YmqEVariantIds"==i?t.bundleTransformFunction()&&(s[i]=n):s[i]=n,["_YmqItemSku","_YmqItemWeight","_YmqItemDiscount","_YmqWholesalePricing"].includes(i)&&(e=!1))})),e){if(t.bundleTransformFunction()){let e={};if(s.hasOwnProperty("_YmqEVariantIdsOneTime")){let i=t.parseStringToObject(s._YmqEVariantIdsOneTime);Object.keys(i).forEach((t=>{let i=ymqJq(`[ymq-add-price-variant="${t}"]`).data("price");i&&(e[t]=Number(i))}))}if(s.hasOwnProperty("_YmqEVariantIds")){let i=t.parseStringToObject(s._YmqEVariantIds);Object.keys(i).forEach((t=>{let i=ymqJq(`[ymq-add-price-variant="${t}"]`).data("price");i&&(e[t]=Number(i))}))}ymqJq.isEmptyObject(e)||(s._YmqItemVp=e)}(s.hasOwnProperty("_YmqItemPrice")||s.hasOwnProperty("_YmqItemPriceOneTime")||s.hasOwnProperty("_YmqEVariantIds")||s.hasOwnProperty("_YmqEVariantIdsOneTime"))&&t.buildHideInputForHIdeProperty("properties[__ymq_option_info]",JSON.stringify(s))}}return t}parseStringToObject(t){let e={},i=t.split(",");for(let t of i){let[i,n]=t.split(" * ");n=n?Number(n.trim()):1,e[i]?e[i]+=n:e[i]=n}return e}buildHideInputForHIdeProperty(t,e){function i(i){try{if(i.find(".add-to-cart-form-input-box").length>0&&(i=i.find(".add-to-cart-form-input-box")),0==i.find(`[name="${t}"]`).length){var n=ymqJq("<input>",{type:"hidden",name:t,class:"ymq-hidden-input ymq-hide-properties",value:e});i.append(n)}}catch(t){console.log(t)}}i(this.config.form_box_dom),ymqJq(this.config.add_to_cart_form).each((function(){i(ymqJq(this))}))}buildQuantityDiscount(){var t=this,e=t.config.variantData[t.variant.variant_id].price;try{e/=Shopify.currency.rate}catch(t){}var i=t.config.util.getValue(t.config.ymq_option_branding.lan,"q-save","Save");return ymqJq(".ymq-quantity-radio-box").each((function(){var n=0,a=2,o=1,r=0,c=0;if(ymqJq(this).hasClass("ymq-quantity-show-box")){var s=t.getQuantityGradeByQtyInput();null!=s?(ymqJq(this).show(),n=Number(s.discount),a=Number(s.discount_type),o=t.getQuantity(),ymqJq(this).find(".ymq-quantity-buy-quantity").html(o),1==a?ymqJq(this).find(".ymq-quantity-discount").html(`${i} ${n}%`):ymqJq(this).find(".ymq-quantity-discount").html(`-${t.config.doFormat(n)}`)):ymqJq(this).hide()}else n=Number(ymqJq(this).find(".ymq-quantity-discount-price").data("discount")),a=Number(ymqJq(this).find(".ymq-quantity-discount-price").data("discount_type")),o=Number(ymqJq(this).find(".ymq-quantity-discount-price").data("quantity"));r=(Number(e)/100+Number(t.ymq_option_price))*o+Number(t.ymq_option_price_single),c=1==a?r*(1-n/100):r-n,1==t.config.util.getValue(t.config.ymq_option_branding.extra,"qty-dis-qty",0)&&(c/=o,r/=o),ymqJq(this).find(".ymq-quantity-discount-price").html(t.config.doFormat(c)),ymqJq(this).find(".ymq-quantity-compared-price,.ymq-quantity-compared-price-no-discount").html(t.config.doFormat(r))})),t}getDiscountPrice(t){if(window.ymq_option.ymq_option_branding.extra.plan<3)return t;try{var e=this.getQuantityGradeByQtyInput();if(null!=e){var i=Number(e.discount);1==Number(e.discount_type)?t*=1-i/100:t-=i}}catch(t){console.log(t)}return t}price(){var t=this;try{if(t.config.lock_price&&3!=t.config.lock_price_type)return t}catch(t){}var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-price-in-product-page",""),i=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-compare-at-price-in-product-page",""),n=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-price-in-product-page-qty",""),a=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-compare-at-price-in-product-page-qty","");return""!=e&&ymqJq(e).length>0||""!=i&&ymqJq(i).length>0||""!=n&&ymqJq(n).length>0||""!=a&&ymqJq(a).length>0?(t.config.variantData.hasOwnProperty(t.variant.variant_id)&&setTimeout((()=>{var o=t.config.variantData[t.variant.variant_id],r=o.price,c=o.compare_at_price;""!=e&&ymqJq(e).length>0&&ymqJq(e).html(t.config.doFormatWithoutRate((100*Number(t.ymq_total_price_single)*Shopify.currency.rate+Number(r))/100)),""!=n&&ymqJq(n).length>0&&ymqJq(n).html(t.config.doFormatWithoutRate(t.getDiscountPrice((100*Number(t.ymq_total_price)*Shopify.currency.rate+Number(r)*t.getQuantity())/100))),""!=i&&ymqJq(i).length>0&&c&&ymqJq(i).html(t.config.doFormatWithoutRate((100*Number(t.ymq_total_price_single)*Shopify.currency.rate+Number(c))/100)),""!=a&&ymqJq(a).length>0&&c&&ymqJq(a).html(t.config.doFormatWithoutRate(t.getDiscountPrice((100*Number(t.ymq_total_price)*Shopify.currency.rate+Number(c)*t.getQuantity())/100)))}),t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"price-time",0)),1==t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"ymq-price-addons",0)&&(0==Number(t.ymq_total_price)?ymqJq("#ymq-price-addons").slideUp(300,"swing"):ymqJq("#ymq-price-addons").slideDown(300,"swing"),ymqJq("#ymq-addons-price").html(t.config.doFormat(t.getDiscountPrice(t.ymq_total_price))))):(0==Number(t.ymq_total_price)?ymqJq("#ymq-price-addons").slideUp(300,"swing"):ymqJq("#ymq-price-addons").slideDown(300,"swing"),ymqJq("#ymq-addons-price").html(t.config.doFormat(t.getDiscountPrice(t.ymq_total_price)))),t}reset(t,e,i,n,a){var o=this;o.config.form_box_dom.html(""),o.config.ymq_variantjson=t,o.config.ymq_option_data=e,o.config.ymq_option_condition=i,o.config.ymq_option_template=n,o.config.ymq_option_template_condition=a,o.config.hasQuantity=!1,o.variant.init(),o.init()}initConfig(){var t=this;t.config=Config.getInstance("productInstance",t),t.config.shop=window.ymq_option.shop,t.config.token=window.ymq_option.token,t.config.timestamp=window.ymq_option.timestamp,t.config.customer_id=window.ymq_option.customer_id,t.config.product=window.ymq_option.product,t.config.ymq_has_only_default_variant=window.ymq_option.ymq_has_only_default_variant,t.config.automic_variant_swatch={};var e=window.ymq_option.product.options;window.ymq_option.hasOwnProperty("ymq_shopify_options")?t.config.ymq_shopify_options=window.ymq_option.ymq_shopify_options:window.ymq_option.ymq_has_only_default_variant?t.config.ymq_shopify_options={Title:["Default Title"]}:(t.config.ymq_shopify_options={},window.ymq_option.product.variants.forEach((function(i){i.options.forEach((function(i,n){var a=e[n];i=t.config.util.htmlSpecialChars(i),t.config.ymq_shopify_options.hasOwnProperty(a)||(t.config.ymq_shopify_options[a]=[]),t.config.ymq_shopify_options[a].includes(i)||t.config.ymq_shopify_options[a].push(i)}))}))),t.config.color_swatch_title=t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"color-swatch-title",""),t.config.color_swatch=Number(t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"color-swatch","2")),t.config.color_matching=t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"color-matching","{}"),t.config.color_swatch_lower=Number(t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"color-swatch-lower","1")),t.config.color_matching_first=Number(t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"color-matching-first","0"));try{t.config.color_matching=JSON.parse(t.config.color_matching)}catch(t){}try{t.config.color_swatch_title=t.config.color_swatch_title.split(",")}catch(e){t.config.color_swatch_title=[]}if(1==t.config.color_swatch_lower){var i=[];t.config.color_swatch_title.forEach((function(e){i.push(t.config.util.reHtmlSpecialChars(e.toLowerCase()))})),t.config.color_swatch_title=i}if(t.config.ymq_has_only_default_variant||window.ymq_option.product.variants.forEach((function(i){Array.isArray(i.options)&&i.options.forEach((function(n,a){var o=e[a];try{if(t.config.color_swatch_title.includes(1==t.config.color_swatch_lower?o.toLowerCase().trim():o.trim())&&0!=t.config.color_swatch&&(t.config.automic_variant_swatch.hasOwnProperty(o)||(t.config.automic_variant_swatch[o]={}),!t.config.automic_variant_swatch[o].hasOwnProperty(n))){var r=!1,c="";if(2==t.config.color_swatch&&i.hasOwnProperty("featured_image")&&null!=i.featured_image&&i.featured_image.hasOwnProperty("src")&&(t.config.automic_variant_swatch[o][n]={canvas_type:2,canvas1:"",canvas2:i.featured_image.src,automic_bgcolor:1},r=!0,c=i.featured_image.src),0==r||1==t.config.color_matching_first){var s="",m="",l=1;try{if(t.config.color_matching.hasOwnProperty(n)){var d=t.config.color_matching[n];"object"==typeof d?d.hasOwnProperty("color")&&d.hasOwnProperty("img")&&d.hasOwnProperty("type")&&(1==d.type?s=d.color:(m=d.img,l=2)):s=d}else r?(m=c,s="",l=2):s=t.config.util.htmlSpecialChars(n)}catch(t){}t.config.automic_variant_swatch[o][n]={canvas_type:l,canvas1:s,canvas2:m,automic_bgcolor:1}}}}catch(t){}}))})),t.config.money_format=window.ymq_option.ymq_option_branding.lan.currency,t.config.form_box="",t.config.shopifySelectDom=[],1==t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"form-box-new",0))t.config.form_box='form[action*="/cart/add"]';else if(ymqJq('form[action="/cart/add"]').length>=1)t.config.form_box='form[action="/cart/add"]';else if(ymqJq('form[action*="/cart/add"]').length>=1){var n=ymqJq('form[action*="/cart/add"]').attr("action");t.config.form_box=`form[action="${n}"]`}t.config.ymq_variantjson=window.ymq_option.ymq_variantjson,t.config.ymq_option_data=window.ymq_option.ymq_option_data,t.config.ymq_option_condition=window.ymq_option.ymq_option_condition,t.config.ymq_option_template=window.ymq_option.ymq_option_template,t.config.ymq_option_template_condition=window.ymq_option.ymq_option_template_condition,t.config.ymq_option_settings=window.ymq_option.ymq_option_settings,t.config.ymq_option_branding=window.ymq_option.ymq_option_branding,t.config.variantData={},t.config.product.variants.forEach((function(e){t.config.variantData[e.id]=e})),t.config.variantOriginal=!1,1==t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-original",0)&&(t.config.variantOriginal=!0),t.config.onetimetag=` ( ${t.config.util.getValue(t.config.ymq_option_branding.lan,"one-time-tag","one time")} )`,t.config.form_box_dom="",t.initForm();var a=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-id-dom","");a&&ymqJq(a).length>0?t.config.iddom=ymqJq(a):t.config.iddom=t.config.form_box_dom.find("[name='id']"),window.ymq_option.hasOwnProperty("ymq_option_template_sort")?""==window.ymq_option.ymq_option_template_sort?t.config.ymq_option_template_sort=[]:t.config.ymq_option_template_sort=window.ymq_option.ymq_option_template_sort.split(","):t.config.ymq_option_template_sort=!1}initForm(){var t=this,e=t.config.util.getValue(t.config.ymq_option_branding.extra,"add-cart-form-number",0);t.config.form_class_name="",Number(e)==e?(t.config.form_box_dom=ymqJq(t.config.form_box).eq(Number(e)),t.config.form_class_name=t.config.form_box):ymqJq(e).length>0?(t.config.form_box_dom=ymqJq(e),t.config.form_class_name=e):(t.config.form_box_dom=ymqJq(t.config.form_box).eq(0),t.config.form_class_name=t.config.form_box)}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Upload=class t{constructor(){var t=this;t.instance=null,t.config=Config.getInstance("uploadInstance",t),t.init()}init(){this.disabledFileInput().initMemberVariables().initModal().initOptions().registerEvent(),this.registerFileInputChangeEvent()}initMemberVariables(){var t=this;return t.cropper=null,t.files=null,t.num=0,t.fileData={},t.rectangleRatios=[],t.formData=new FormData,t.inputDom=null,t.previewReady=!1,t.imgDom=null,t}disabledFileInput(){return ymqJq(document).on("click",".ymq_upload_new.ymq_disabled,.ymq_upload_new.ymq-btn-progress",(function(t){return t.stopImmediatePropagation(),t.preventDefault(),!1})),this}initOptions(){var t=this;return t.options={ready:function(){var e=this.cloneNode();e.className="",e.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",ymqJq(".ymq-img-review")[0].appendChild(e.cloneNode()),t.previewReady=!0},viewMode:Number(t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"cropper-show",1)),dragMode:"move",isRound:!1,crop:function(t){var e=t.detail,i=this.cropper.getImageData(),n=e.width/e.height,a=ymqJq(".ymq-img-review")[0];a&&setTimeout((function(){var t=a.getElementsByTagName("img").item(0),o=a.offsetWidth,r=o/n,c=e.width/o;a.style.height=r+"px",t&&(t.style.width=i.naturalWidth/c+"px",t.style.height=i.naturalHeight/c+"px",t.style.marginLeft=-e.x/c+"px",t.style.marginTop=-e.y/c+"px")}),10)}},t}resetAspectRatio(t){var e=this;return 2==(t=t.split(":")).length?(t=t[0]/t[1],e.options.aspectRatio=t):delete e.options.aspectRatio,e}registerEvent(){var t=this;return ymqJq(document).on("click",".ymq-cropper-button-resize",(function(){t.destroyCropper().resetAspectRatio(ymqJq(this).data("aspect-ratio")).newCropper()})),ymqJq(document).on("click",".ymq-cropper-rotate-left",(function(){t.cropper.rotate(-30)})),ymqJq(document).on("click",".ymq-cropper-rotate-right",(function(){t.cropper.rotate(30)})),t.modal.find("#ymq-do-cropper").on("click",(function(){if(t.cropper&&!t.modal.find("#ymq-do-cropper").hasClass("ymq-btn-progress")){t.modal.find("#ymq-do-cropper").addClass("ymq-btn-progress");t.getCanvas().toDataURL("image/jpeg",1);t.getCanvas().toBlob((function(e){t.addImg(e),t.modal.find("#ymq-do-cropper").removeClass("ymq-btn-progress")}))}})),t}destroyCropper(){var t=this;return t.cropper.destroy(),t.cropper=null,t}newCropper(){var t=this;return t.cropper=new Cropper(t.imgDom[0],t.options),t.modal.resize(),t}initRectangleRatio(){var t=this;t.rectangleRatios=[],t.resetAspectRatio("");var e=t.inputDom.data("rectangle-ratio");e&&(e=e.split(",")).length>0&&(t.rectangleRatios=e,t.resetAspectRatio(t.rectangleRatios[0])),t.options.isRound=!1,ymqJq(".ymq-img-container").removeClass("cropper-container-round"),2==t.inputDom.data("cropper")&&(t.resetAspectRatio("1:1"),ymqJq(".ymq-img-container").addClass("cropper-container-round"));var i="";return t.rectangleRatios.forEach((function(t){i+=`<div class="ymq-cropper-button ymq-cropper-button-resize" data-aspect-ratio="${t}">${t}</div>`})),t.modal.find(".ymq-img-action_m").html(i),t.modal.find(".ymq-img-action_pc").html(i),t}getCanvas(){var t=this;if(2==t.inputDom.data("cropper")){var e=t.cropper.getCroppedCanvas(),i=document.createElement("canvas"),n=i.getContext("2d"),a=e.width,o=e.height;return i.width=a,i.height=o,n.imageSmoothingEnabled=!0,n.drawImage(e,0,0,a,o),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(a/2,o/2,Math.min(a,o)/2,0,2*Math.PI,!0),n.fill(),i}return t.cropper.getCroppedCanvas()}registerFileInputChangeEvent(){var t=this,e='input[type="file"]';return""!=t.config.form_class_name&&(e=t.config.formClass('input[type="file"]')),ymqJq(document).on("change",e,(function(e){if(t.inputDom=ymqJq(this),t.files=e.target.files,t.inputDom.val())if(ymqJq(this).hasClass("ymq-options-file-input")){0!=t.inputDom.data("cropper")?t.initRectangleRatio().doCropper():t.addFile();var i="";i+='<div class="ymq-cropper-button ymq-cropper-rotate-left"><svg t="1625460890766" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6401" width="16" height="16"><path d="M950.930517 512q0 89.161143-34.889143 170.276571t-93.696 139.995429-139.995429 93.696-170.276571 34.889143q-98.304 0-186.88-41.398857t-150.820571-116.882286q-4.022857-5.705143-3.730286-12.873143t4.827429-11.702857l78.262857-78.848q5.705143-5.12 14.262857-5.12 9.142857 1.170286 13.165714 6.875429 41.691429 54.272 102.253714 83.968t128.585143 29.696q59.465143 0 113.444571-23.113143t93.403429-62.537143 62.537143-93.403429 23.113143-113.444571-23.113143-113.444571-62.537143-93.403429-93.403429-62.537143-113.444571-23.113143q-56.027429 0-107.446857 20.260571t-91.428571 58.002286l78.262857 78.848q17.700571 17.115429 7.972571 39.424-9.728 22.820571-33.718857 22.820571l-256 0q-14.848 0-25.746286-10.825143t-10.825143-25.746286l0-256q0-23.990857 22.820571-33.718857 22.308571-9.728 39.424 7.972571l74.313143 73.728q61.147429-57.709714 139.702857-89.453714t162.596571-31.744q89.161143 0 170.276571 34.889143t139.995429 93.696 93.696 139.995429 34.889143 170.276571z" p-id="6402" fill="#ffffff"></path></svg></div><div class="ymq-cropper-button ymq-cropper-rotate-right"><svg t="1625461123473" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6636" width="16" height="16"><path d="M950.857143 146.285714l0 256q0 14.857143-10.857143 25.714286t-25.714286 10.857143l-256 0q-24 0-33.714286-22.857143-9.714286-22.285714 8-39.428571l78.857143-78.857143q-84.571429-78.285714-199.428571-78.285714-59.428571 0-113.428571 23.142857t-93.428571 62.571429-62.571429 93.428571-23.142857 113.428571 23.142857 113.428571 62.571429 93.428571 93.428571 62.571429 113.428571 23.142857q68 0 128.571429-29.714286t102.285714-84q4-5.714286 13.142857-6.857143 8 0 14.285714 5.142857l78.285714 78.857143q5.142857 4.571429 5.428571 11.714286t-4.285714 12.857143q-62.285714 75.428571-150.857143 116.857143t-186.857143 41.428571q-89.142857 0-170.285714-34.857143t-140-93.714286-93.714286-140-34.857143-170.285714 34.857143-170.285714 93.714286-140 140-93.714286 170.285714-34.857143q84 0 162.571429 31.714286t139.714286 89.428571l74.285714-73.714286q16.571429-17.714286 40-8 22.285714 9.714286 22.285714 33.714286z" p-id="6637" fill="#ffffff"></path></svg></div>',t.modal.find(".ymq-img-action_m").append(i),t.modal.find(".ymq-img-action_pc").append(i)}else t.addOtherFile()})),t}doCropper(){var t,e,i=this;i.current_file=null;try{i.files&&i.files.length>0&&(t=i.files[0],i.current_file=t,/^image\/\w+/.test(t.type)?URL?i.done(URL.createObjectURL(t)):FileReader&&((e=new FileReader).onload=function(t){i.done(e.result)},e.readAsDataURL(t)):i.addFile())}catch(t){}}done(t){var e=this;e.inputDom.val(""),e.imgDom.prop("src",t),e.modal.modal("show")}isDisabled(t=null){var e=this;null==t&&(t=e.inputDom);var i=t.parents(".ymq-options-box").attr("data-name"),n=t.data("file-num"),a=0;e.config.real_time_upload?a=t.parents(".ymq-options-box").find(".ymq-hidden-input ").length:e.fileData.hasOwnProperty(i)&&(a=Object.keys(e.fileData[i]).length),a>=n?t.parents(".ymq_upload_new").addClass("ymq_disabled"):t.parents(".ymq_upload_new").removeClass("ymq_disabled")}addOtherFile(){var t=this;try{var e=t.inputDom.prop("name");t.fileData.hasOwnProperty(e)||(t.fileData[e]={});var i=t.files.length;for(let n=0;n<i;n++)t.fileData[e][n]={file:t.files[n],name:t.files[n].name}}catch(t){}}getUpdateArray(t,e){var i=null;return t.items.some((t=>{if(t.properties&&t.properties.hasOwnProperty("_YmqItemHide")&&t.properties._YmqItemHide==e)return i={data:{quantity:0,id:t.key},item:t},!0})),i}getItemImage(t){var e=this,i=[];try{t.hasOwnProperty("properties")&&!ymqJq.isEmptyObject(t.properties)&&Object.keys(t.properties).forEach((n=>{t.properties[n].includes("https://cdn.shopify")&&i.push({value:t.properties[n],id:e.config.productInstance.ymqUUID()})}))}catch(t){console.log(t)}return i}getFileName(t){return t.substring(t.lastIndexOf("/")+1)}showImage(t,e,i){var n=this,a=e.parents(".ymq-options-box").find(".ymq_upload_img_view"),o=e.parents(".ymq-options-box").find(".ymq_upload_file_view"),r=i.substring(11,i.length-1),c="",s="";if(t.forEach((t=>{s+=`<input class="ymq-hidden-input ymq-hidden-file-input ymq-hidden-input-${t.id}" data-file-key="${t.id}" value="${t.value}" type="hidden" data-name="${r}" name="${i}">`,n.isImg(t.value)?(c=`\n                        <div class="ymq_upload_img_item ymq_upload_file_item ymq_upload_file_item_${t.id}" style="display: none;" data-name="${i}" data-num="${t.id}">\n                            <img class="ymq_img_item" src="${t.value}" alt="">\n                            <div class="ymq_upload_img_item_bg">\n                                <span data-name="${i}" data-num="${t.id}" class="ymq_upload_img_item_del ymq_upload_file_item_del"></span>\n                                <div class="spotlight" data-src="${t.value}"></div>\n                            </div>\n                        </div>\n                    `,a.prepend(c),ymqJq(`.ymq_upload_file_item_${t.id}`).fadeIn()):(c=`\n                        <div class="ymq_upload_item ymq_upload_file_view_item ymq_upload_file_item ymq_upload_file_item_${t.id}">\n                            <div class="ymq_upload_type ymq_upload_img"><span></span></div>\n                            <div class="ymq_upload_name">${n.getFileName(t.value)}</div>\n                            <div data-name="${i}" data-num="${t.id}" class="ymq_upload_status ymq_upload_success ymq_upload_file_item_del"><span></span></div>\n                            <div class="ymq_clear_both"><span></span></div>\n                        </div>\n                    `,o.append(c),ymqJq(`.ymq_upload_file_item_${t.id}`).fadeIn())})),e.parents(".ymq-options-box").append(s),e.parents(".ymq-options-box").find(".ymq-hidden-file-input").each((function(t,i){1==e.parents(".ymq-options-box").find(".ymq-hidden-file-input").length?ymqJq(this).attr("name",`properties[${ymqJq(this).data("name")}]`):ymqJq(this).attr("name",`properties[${ymqJq(this).data("name")}_${t+1}]`)})),""!=n.config.add_to_cart_form&&ymqJq(n.config.add_to_cart_form).length>0){var m=ymqJq(n.config.add_to_cart_form);ymqJq(n.config.add_to_cart_form).find(".add-to-cart-form-input-box").length>0&&(m=ymqJq(n.config.add_to_cart_form).find(".add-to-cart-form-input-box"));try{if(12==(d=n.findPrevDom(e.parents(".ymq-options-box").prev(".ymq-options-box"))).data("type"))var l=d.find("[data-file-key]:last-child").attr("name");else l=d.data("name")}catch(t){console.log(t);var d=null;l="ymqymqymqymq"}var p="";e.parents(".ymq-options-box").find(".ymq-hidden-file-input").each((function(t,e){ymqJq(this).data("file-key")&&m.find(`.ymq-hidden-input-${ymqJq(this).data("file-key")}`).remove(),ymqJq(this).prev().data("file-key")&&(p=ymqJq(this).prev().data("file-key")),t>0&&m.find(ymqJq(`[data-file-key="${p}"]`)).length>0?m.find(ymqJq(`[data-file-key="${p}"]`)).after(ymqJq(this).clone()):m.find(ymqJq(`[name="${l}"]`)).length>0?m.find(ymqJq(`[name="${l}"]`)).after(ymqJq(this).clone()):m.find(ymqJq(`[name="empty-${l}"]`)).length>0?m.find(ymqJq(`[name="empty-${l}"]`)).after(ymqJq(this).clone()):null==d||d.length>0?m.append(ymqJq(this).clone()):m.prepend(ymqJq(this).clone())}))}}findPrevDom(t){return 1==t.length&&12==t.data("type")&&0==t.find(".ymq-hidden-file-input").length?this.findPrevDom(t.prev(".ymq-options-box")):t}complateUpload(t){if(t.parent(".ymq_upload_new").removeClass("ymq-btn-progress"),this.error_file.length>0){var e="";this.error_file.forEach((t=>{e+=t})),alert(e)}}addFileAjaxSuccessNew(t,e=[]){var i=this,{uuid:n,inputDom:a,name:o}=i.config.upload_ajax_list[t][0];i.showImage(e,a,o),a.val("").change(),i.isDisabled(),function(t,e){i.config.upload_ajax_list[t].shift(),0==i.config.upload_ajax_list[t].length?i.complateUpload(e):i.addFileAjax(0,t)}(t,a)}addFileAjaxSuccess(t){var e=this,{uuid:i,inputDom:n,name:a}=e.config.upload_ajax_list[t][0];function o(t,i){e.config.upload_ajax_list[t].shift(),0==e.config.upload_ajax_list[t].length?i.parent(".ymq_upload_new").removeClass("ymq-btn-progress"):e.addFileAjax(0,t)}ymqJq.post({url:"/cart/update.js?ymq-cart-no-listen",dataType:"json"}).done((function(r){try{var c=e.getUpdateArray(r,i);null!=c?(e.showImage(e.getItemImage(c.item),n,a),n.val("").change(),e.isDisabled(),ymqJq.ajax({type:"POST",url:"/cart/change.js",data:c.data,dataType:"json",success:function(e){o(t,n)},error:function(e){o(t,n)}})):o(t,n)}catch(e){o(t,n),console.log(e)}})).fail((function(){o(t,n)}))}addFileAjax(t,e){var i=this;if(1==i.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"upload_cloud","0")){var n=i.config.upload_ajax_list[e][0],a=n.inputDom,o=n.files,r=[],c={};o.forEach((t=>{t=t.file;var e=i.config.uuid(),n=i.config.getFileKey(t.name,e);c[e]={key:n,file:t},r.push({key:n,content_type:t.type,uuid:e})}));var s=30;3==window.ymq_option.ymq_option_branding.extra.plan&&(s=90),ymqJq.ajax({method:"post",url:"https://mail.ymq.cool/api/upload/apply_token",data:{expiration:s,files:r},success:function(t){try{var n=[];Object.keys(t.data).forEach((e=>{var i=new Promise((function(i,n){fetch(t.data[e],{method:"PUT",body:c[e].file,mode:"cors",headers:{"Content-Type":c[e].file.type,"Access-Control-Allow-Origin":"*"}}).then((t=>{var i={value:`${ymq_option.s3_url}${c[e].key}`,id:e};return t.ok?i.status="success":i.status="fasle",i})).then((t=>{i(t)})).catch((t=>{n(t)}))}));n.push(i)})),Promise.all(n).then((t=>{var n=[];t.forEach((t=>{n.push(t)})),i.addFileAjaxSuccessNew(e,n)})).catch((t=>{i.complateUpload(a)}))}catch(t){i.complateUpload(a),alert(i.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"ajax-upload-error","Failed to upload file."))}}})}else{var{formData:m,name:l,uuid:d,inputDom:a}=i.config.upload_ajax_list[e][0];++t<=3?ymqJq.ajax({type:"POST",url:"/cart/add?_easygift_form_payload=true&ymq-cart-no-listen",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:m}).done((function(t){i.addFileAjaxSuccess(e)})).fail((function(n){console.log(n),i.addFileAjax(t,e)})):(a.parent(".ymq_upload_new").removeClass("ymq-btn-progress"),alert(i.config.util.getValue(window.ymq_option.ymq_option_branding.lan,"ajax-upload-error","Failed to upload file.")))}}makeFormDataArray(t){var e=this,i=[];i.push([]);var n=0,a=0;return t.forEach((t=>{var o;(n+=Number(t.file.size))>e.config.hightsize?(a++,n=0,(o=[]).push(t),i[a]=o):((o=i[a]).push(t),i[a]=o)})),i}fileAjax(t,e,i){var n=this,a=null;i=n.makeFormDataArray(i),setTimeout((()=>{e.parent(".ymq_upload_new").addClass("ymq-btn-progress");var o=n.config.productInstance,r=o.ymqUUID();n.config.upload_ajax_list[r]=[],n.error_file=[],i.forEach(((i,c)=>{if(i.length>0){var s=o.ymqUUID();(a=new FormData).set("quantity",o.getQuantity()),a.set("id",o.variant.variant_id),o.initSellingPlan(),n.config.selling_plan&&a.set("selling_plan",n.config.selling_plan_id),a.set("properties[_YmqItemHide]",s);var m=[];i.forEach(((t,e)=>{var i=!0;window.ymq_option.ymq_option_branding.extra.plan>=3&&t.file.size>52428800&&(n.error_file.push(`${t.file.name} ${n.config.util.getValue(n.config.ymq_option_branding.lan,"file_limit","must not exceed")} 50Mb. `),i=!1),a.set(t.key,t.file,t.name),i&&m.push({key:t.key,file:t.file,name:t.name})})),n.config.upload_ajax_list[r].push({files:m,formData:a,name:t,uuid:s,inputDom:e})}})),n.config.upload_ajax_list[r].length>0&&n.addFileAjax(0,r)}),10)}isImg(t){return null!=t.match(/\.(jpeg|svg|webp|jpg|gif|png|bmp)$/)}addFile(){var t=this,e="",i=t.inputDom.prop("name");i.startsWith("ymq")&&(i=`properties${i.slice(3)}`);var n=t.inputDom.parents(".ymq-options-box").find(".ymq_upload_img_view"),a=t.inputDom.parents(".ymq-options-box").find(".ymq_upload_file_view"),o=t.inputDom.data("file-num"),r=t.files.length,c="";if(t.fileData.hasOwnProperty(i)||(t.fileData[i]={}),t.config.real_time_upload&&1==t.inputDom.parents(".ymq-options-box").data("ymq-add-to-cart")?o-=t.inputDom.parents(".ymq-options-box").find(".ymq-hidden-input").length:o-=Object.keys(t.fileData[i]).length,o<=t.files.length&&(r=o),t.config.real_time_upload&&1==t.inputDom.parents(".ymq-options-box").data("ymq-add-to-cart")){var s=[];for(let e=0;e<r;e++)s.push({key:t.config.productInstance.reCreatName(i,e),file:t.files[e],name:t.files[e].name});t.fileAjax(i,t.inputDom,s)}else for(let o=0;o<r;o++)t.fileData[i][t.num]={file:t.files[o],name:t.files[o].name},/^image\/\w+/.test(t.files[o].type)?(URL&&(e=URL.createObjectURL(t.files[o])),c=`\n                            <div class="ymq_upload_img_item ymq_upload_file_item ymq_upload_file_item_${t.num}" style="display: none;" data-name="${i}" data-num="${t.num}">\n                                <img class="ymq_img_item" src="${e}" alt="">\n                                <div class="ymq_upload_img_item_bg">\n                                    <span data-name="${i}" data-num="${t.num}" class="ymq_upload_img_item_del ymq_upload_file_item_del"></span>\n                                    <div class="spotlight" data-src="${e}"></div>\n                                </div>\n                            </div>\n                        `,n.prepend(c),ymqJq(`.ymq_upload_file_item_${t.num}`).fadeIn()):(c=`\n                            <div class="ymq_upload_item ymq_upload_file_view_item ymq_upload_file_item ymq_upload_file_item_${t.num}">\n                                <div class="ymq_upload_type ymq_upload_img"></div>\n                                <div class="ymq_upload_name">${t.files[o].name}</div>\n                                <div data-name="${i}" data-num="${t.num}" class="ymq_upload_status ymq_upload_success ymq_upload_file_item_del"></div>\n                                <div class="ymq_clear_both"></div>\n                            </div>\n                        `,a.append(c),ymqJq(`.ymq_upload_file_item_${t.num}`).fadeIn()),t.num++;t.inputDom.val("").change(),t.isDisabled()}addImg(t){var e=this,i=URL.createObjectURL(t),n=e.inputDom.parents(".ymq-options-box").find(".ymq_upload_img_view"),a=e.inputDom.prop("name");a.startsWith("ymq")&&(a=`properties${a.slice(3)}`);var o="";o=null==e.current_file?`${e.config.uuid()}.jpg`:e.current_file.name;var r=new File([t],o,{type:t.type});if(e.config.real_time_upload&&1==e.inputDom.parents(".ymq-options-box").data("ymq-add-to-cart")){var c=[{key:a,file:r,name:`${a}.jpg`}];e.fileAjax(a,e.inputDom,c)}else{var s=`\n                    <div class="ymq_upload_img_item ymq_upload_file_item ymq_upload_file_item_${e.num}" style="display: none;" data-name="${a}" data-num="${e.num}">\n                        <img class="ymq_img_item" src="${i}" alt="">\n                        <div class="ymq_upload_img_item_bg">\n                            <span data-name="${a}" data-num="${e.num}" class="ymq_upload_img_item_del ymq_upload_file_item_del"></span>\n                            <div class="spotlight" data-src="${i}"></div>\n                        </div>\n                    </div>\n                `;e.fileData.hasOwnProperty(a)||(e.fileData[a]={}),e.fileData[a][e.num]={file:t,name:`${a}_${e.num}.jpg`},e.formData.append(a,t,`${a}.jpg`),n.prepend(s),ymqJq(`.ymq_upload_file_item_${e.num}`).fadeIn(),e.modal.modal("hide"),e.num++,e.inputDom.val("").change(),e.isDisabled()}e.modal.modal("hide")}initModal(){var t=this,e=`\n                <div class="ymq-bmodal ymq-modal-fade" id="ymqBootModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n                    <div class="ymq-modal-dialog ymq-modal-lg" role="document">\n                      <div class="ymq-bmodal-content">\n                        <div class="ymq-modal-header">\n                          <div class="ymq-modal-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">${t.config.closeSvg}</span></div>\n                        </div>\n                        <div class="ymq-modal-body">\n                          <div class="ymq-img-container">\n                            <div class="ymq-img-cropper-container">\n                              <img id="ymq-upload-cropper-img" src="">\n                            </div>\n                            <div class="ymq-img-review-container">\n                              <div class="ymq-img-review">\n                              </div>\n                              <div class="ymq-img-action ymq-img-action_m ymq_m_show">\n                                \n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div class="ymq-modal-footer">\n                          <div class="ymq-cropper-button ymq-cropper-button-close" data-dismiss="modal">Close</div>\n                          <div class="ymq-img-action ymq-img-action_pc ymq_pc_show">\n                            \n                          </div>\n                          <div class="ymq-cropper-button" id="ymq-do-cropper">Save</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n            `;return ymqJq("body").append(e),t.imgDom=ymqJq("#ymq-upload-cropper-img"),t.modal=ymqJq("#ymqBootModal"),t.modal.on("shown.bs.modal",(function(){t.newCropper()})).on("hidden.bs.modal",(function(){t.destroyCropper(),ymqJq(".ymq-img-review").html("")})),t}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Util=class t{constructor(t){this.instance=null,this.init()}init(){var t=this;this.dateFormat().initSpotlight(),t.money_format=t.getValue(window.ymq_option.ymq_option_branding.extra,"money-format","money_format"),["money_format","money_with_currency_format"].includes(t.money_format)||(t.money_format="money_format")}copyObject(t){return JSON.parse(JSON.stringify(t))}getCookie(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0]==t)return n[1]}return""}getVariantIdAndQty(t,e=1){var i=1,n=t.split(" * ");return 2==n.length&&(t=n[0],i=n[1]),[Number(t),Number(i)*Number(e)]}isNum(t){return Number(t)+""!="NaN"}getUpdateArray(t){var e=[],i=!1;return t.items.forEach((t=>{t.properties&&(t.properties.hasOwnProperty("_YmqOptionVariant")||t.properties.hasOwnProperty("_YmqItemHide"))?(i=!0,e.push(0)):e.push(t.quantity)})),{need_update:i,updates:e}}jstrigger(t,e){if(document.all)t.fireEvent("on"+e);else{var i=document.createEvent("Events");i.initEvent(e,!0,!0),t.dispatchEvent(i)}}getOptionValueQty(t){try{var e=t.data("id");return this.getIntValue(ymqJq(`.ymq-qty-input-${e}`))}catch(t){return 1}return 1}getIntValue(t){try{var e=Number(t.val());return t.attr("min")&&e<t.attr("min")&&(e=Number(t.attr("min"))),t.attr("max")&&e>t.attr("max")&&(e=Number(t.attr("max"))),Number(e)&&Number(e)>0?parseInt(e):1}catch(t){return 1}return 1}getParenthesesStr(t){var e="";if(""==t)return e;var i=t.match(/\((.+?)\)/g);if(""!=i){let t=i[0];""!=t&&(e=t.substring(1,t.length-1))}return e}getShopifySmallImg(t,e=200,i=200){return"string"==typeof t&&1==this.getValue(window.ymq_option.ymq_option_branding.extra,"img_cdn",0)&&(t=t.replace("cdn.shopifycdn.net","cdn.shopify.com")),1!=this.getValue(window.ymq_option.ymq_option_branding.extra,"is_small",1)||-1==t.indexOf("shopify")&&-1==t.indexOf("cdn/shop/files")||-1!=t.search(".svg")?t:-1!=(t=(t=t.replace(/ /g,"")).replace(/ /g,"")).indexOf("?")?t+"&width="+e+"&height="+i:t+"?width="+e+"&height="+i}formatCurrency(t){t=t.toString().replace(/\$|\,/g,""),isNaN(t)&&(t="0");var e=t==(t=Math.abs(t)),i=(t=Math.floor(100*t+.50000000001))%100;t=Math.floor(t/100).toString(),i<10&&(i="0"+i);for(var n=0;n<Math.floor((t.length-(1+n))/3);n++)t=t.substring(0,t.length-(4*n+3))+","+t.substring(t.length-(4*n+3));return(e?"":"-")+t+"."+i}changeUri(t,e=""){var i=this.makeJsonByGet(),n=document.URL,a=n.indexOf("?"),o=n.substring(0,a),r=[];i[t]=e,Object.keys(i).forEach((function(t){""!==i[t]&&r.push(`${t}=${i[t]}`)})),history.replaceState(null,null,`${o}${r.length>0?"?":""}${r.join("&")}`)}changeUriByVariantId(t){var e=this.makeJsonByGet(),i=document.URL,n=i.indexOf("?"),a=i.substring(0,n),o=[];e.variant=t,Object.keys(e).forEach((function(t){""!==e[t]&&o.push(`${t}=${e[t]}`)})),history.replaceState(null,null,`${a}${o.length>0?"?":""}${o.join("&")}`)}htmlSpecialChars(t){return"string"==typeof(t=this.reHtmlSpecialChars(t))&&(t=(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")),t}reHtmlSpecialChars(t){return"string"==typeof t&&(t=(t=(t=(t=(t=t.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")),t}variantIsSelect(t,e){return t==e||this.htmlSpecialChars(t)==e}makeJsonByGet(){for(var t=this,e={},i={},n=window.location.href,a=(n=n.replace(/.*\?/,"")).split("&"),o=0;o<a.length;o++)e[a[o].split("=")[0]]="";return Object.keys(e).forEach((function(e){var n=t.getUrlParam(e);n&&(i[e]=n)})),i}getUrlParam(t,e=window.location.search){var i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=e.substr(1).match(i);return null!=n?decodeURI(n[2]):null}getValue(t,e,i){return t.hasOwnProperty(e)?t[e]:i}dateFormat(){return Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},this}initSpotlight(){var t,e,i=!1;ymqJq("#spotlight .drag").mousedown((function(n){t=n.pageX,e=n.pageY,i=!1})),ymqJq("#spotlight .drag").mouseup((function(n){(Math.abs(Number(t)-Number(n.pageX))>7||Math.abs(Number(e)-Number(n.pageY))>7)&&(i=!0)})),ymqJq(document).on("click","#spotlight .drag",(function(){i||(ymqJq(".preloader").removeClass("show"),ymqJq("#spotlight .icon.close").click())})),ymqJq(document).on("#spotlight .icon.close",(function(){ymqJq(".preloader").removeClass("show")}))}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Validate=class t{constructor(){var t=this;t.instance=null,t.dom=null,t.config=Config.getInstance("validateInstance",t),t.upload=Upload.getInstance(),t.init()}initMemberVariables(){var t=this;t.selectDom=null,t.selectValueArray=[],t.selectValue="",t.domErrorArray=[],t.validateCount=0,t.validateOtherCount=0,t.validateArray=[],t.validateValue=[],t.form=ymqJq(t.config.form_box)}init(){this.initMemberVariables()}doOtherValidate(){var t=this;t.domErrorArray=[],t.validateArray.forEach((function(e){"required"==e&&(t.json.hasOwnProperty("isFile")?t.upload.fileData.hasOwnProperty(t.json.name)?ymqJq.isEmptyObject(t.upload.fileData[t.json.name])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require):t.domErrorArray.push(t.config.ymq_option_branding.lan.require):""==t.selectValue&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require)),""!=t.selectValue&&(e.search("minchar:")>-1&&t.selectValue.length<e.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min_char.replace("%s",e.split(":")[1])),e.search("maxchar:")>-1&&t.selectValue.length>e.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max_char.replace("%s",e.split(":")[1])),e.search("min:")>-1&&Number(t.selectValue)<Number(e.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min.replace("%s",e.split(":")[1])),e.search("max:")>-1&&Number(t.selectValue)>Number(e.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max.replace("%s",e.split(":")[1])),"email"!=e||t.config.emailRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.email),"url"!=e||t.config.urlRe.test(t.selectValue)||t.domErrorArray.push(t.config.util.getValue(t.config.ymq_option_branding.lan,"url","Please enter a valid url.")),"integer"==e&&t.selectValue%1!=0&&t.domErrorArray.push(t.config.ymq_option_branding.lan.integer),"number"!=e||t.config.numberRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.number),e.search("float:")>-1&&t.selectValue%1!=0&&t.selectValue.toString().split(".")[1].length>e.split(":")[1]&&t.domErrorArray.push(`${e.split(":")[1]}`))}))}doValidate(){var t=this,e=t.selectDom.parents(".ymq-options-box"),i=!0;if(t.domErrorArray=[],!t.json.hasOwnProperty("isFile")||!t.config.real_time_upload||0!=e.data("ymq-add-to-cart")){var n=0,a=99999,o=t.selectValueArray.length;if(t.json.hasOwnProperty("hasQty")&&t.json.hasQty){var r=0;t.selectValueArray.forEach((function(e){var i=e.split(t.config.qty_split);2==i.length?r+=1*i[1]:r+=1})),o=r}try{t.json.hasOwnProperty("isFile")&&(o=t.config.real_time_upload?e.find(".ymq-hidden-file-input").length:t.upload.fileData.hasOwnProperty(t.json.name)?ymqJq.isEmptyObject(t.upload.fileData[t.json.name])?0:Object.keys(t.upload.fileData[t.json.name]).length:0)}catch(t){i=!1,o=0}if(t.validateArray.forEach((function(t){t.search("min_s:")>-1&&(n=Number(t.split(":")[1])),t.search("max_s:")>-1&&(a=Number(t.split(":")[1]))})),0!=n||0!=a){if(1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"min-max",0)))var c=ymqJq(`#${e.prop("id")} input:checkbox:not(:checked)`),s=ymqJq(`#${e.prop("id")} input:checkbox:not([condition-disabled="true"]):not(.ymq_sold_out):not(:checked)`);else c=s=ymqJq(`#${e.prop("id")} input:checkbox:not([data-title]):not(:checked)`);n==a?(o>a-1?c.prop("disabled",!0):s.prop("disabled",!1),o!=n&&(0==o&&1==t.config.util.getValue(t.config.ymq_option_branding.extra,"min_qty_zero","0")||(t.config.ymq_option_branding.lan.hasOwnProperty("total_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.total_s.replace("%s",n)):t.domErrorArray.push("You need to choose "+n+".")))):(o<n&&(t.json.hasOwnProperty("isFile")?i&&t.domErrorArray.push(t.config.util.getValue(t.config.ymq_option_branding.lan,"min_file_s","Please upload more than %s images.").replace("%s",n)):0==o&&1==t.config.util.getValue(t.config.ymq_option_branding.extra,"min_qty_zero","0")||(t.config.ymq_option_branding.lan.hasOwnProperty("min_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.min_s.replace("%s",n)):t.domErrorArray.push("You need to choose more than "+n+"."))),o>a&&(t.config.ymq_option_branding.lan.hasOwnProperty("max_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.max_s.replace("%s",a)):t.domErrorArray.push("You need to choose less than "+a+".")),o>a-1?c.prop("disabled",!0):s.prop("disabled",!1))}t.validateArray.forEach((function(i){"required"==i&&(t.json.hasOwnProperty("isFile")?t.config.real_time_upload?0==e.find(".ymq-hidden-file-input").length&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require):t.upload.fileData.hasOwnProperty(t.json.name)?ymqJq.isEmptyObject(t.upload.fileData[t.json.name])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require):t.domErrorArray.push(t.config.ymq_option_branding.lan.require):""==t.selectValue&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require)),""!=t.selectValue&&(i.search("minchar:")>-1&&t.selectValue.length<i.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min_char.replace("%s",i.split(":")[1])),i.search("maxchar:")>-1&&t.selectValue.length>i.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max_char.replace("%s",i.split(":")[1])),i.search("min:")>-1&&Number(t.selectValue)<Number(i.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min.replace("%s",i.split(":")[1])),i.search("max:")>-1&&Number(t.selectValue)>Number(i.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max.replace("%s",i.split(":")[1])),"email"!=i||t.config.emailRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.email),"url"!=i||t.config.urlRe.test(t.selectValue)||t.domErrorArray.push(t.config.util.getValue(t.config.ymq_option_branding.lan,"url","Please enter a valid url.")),"integer"==i&&t.selectValue%1!=0&&t.domErrorArray.push(t.config.ymq_option_branding.lan.integer),"number"!=i||t.config.numberRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.number),i.search("float:")>-1&&t.selectValue%1!=0&&t.selectValue.toString().split(".")[1].length>i.split(":")[1]&&t.domErrorArray.push(`${i.split(":")[1]}`))}))}}validateOne(t,e=!1){var i=this;if(i.json=t,t&&t.validate)if(i.validateArray=t.validate.split("|"),i.selectDom=t.dom,i.selectValueArray=t.value,i.selectValue=t.value.join(i.config.option_value_split),t.hasOwnProperty("otherValidate")&&t.hasOwnProperty("nameStr"))i.doOtherValidate(),0==i.validateOtherCount&&i.domErrorArray.length&&(alert(`${t.nameStr} ${i.domErrorArray[0]}`),i.validateOtherCount++,i.validateCount++);else{i.doValidate();var n="";if(i.domErrorArray.length){i.domErrorArray.forEach((function(t){n+=`\n                                <div class="ymq-error-item">${t}</div>\n                            `}));var a=t.dom.parents(".ymq-options-box");if(0==i.validateCount&&e){if(a.offset().top+a.outerHeight()<ymqJq(window).scrollTop()){var o=a.offset().top-200;ymqJq("html, body").animate({scrollTop:o},500)}t.dom.focus()}i.validateCount++,t.dom.parents(".ymq-options-box").find("textarea,select,input[type='text']").addClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find(".selectDropdown").find("span").addClass("ymq_error_border")}else t.dom.parents(".ymq-options-box").find("textarea,select,input[type='text']").removeClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find(".selectDropdown").find("span").removeClass("ymq_error_border");t.dom.parents(".ymq-options-box").find(".ymq-error-box").html(n)}}validateAll(t,e=!1){var i=this;i.validateCount=0,i.validateOtherCount=0,Object.keys(t).forEach((function(n){i.validateOne(t[n],e)}))}validateOneWithOutPrompt(t){var e=this;return e.json=t,!!(t&&t.validate&&(e.validateArray=t.validate.split("|"),e.selectDom=t.dom,e.selectValueArray=t.value,e.selectValue=t.value.join(e.config.option_value_split),e.doValidate(),e.domErrorArray.length))}validateAllWithOutPrompt(t){var e=this,i=!1;try{Object.keys(t).forEach((function(n){if(e.validateOneWithOutPrompt(t[n]))throw i=!0,new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}return i}require(){}testValidate(t){t?this.success():this.error()}success(){}error(){this.dom.addClass("ymq_error")}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Variant=class t{constructor(){var t=this;t.instance=null,t.htmlBuilder=Html.getInstance(),t.config=Config.getInstance("variantInstance",t),t.addVariantIdInput().init()}initMemberVariables(){var t=this;t.variantJson={},t.variant_id=0,t.allVariantJson={},t.notAvailableVariantJson={},t.ymq_shopify_options_with_index_key={}}init(){this.initMemberVariables(),this.initVariantId().initNotAvailableVariantJson().initVariantJson()}initNotAvailableVariantJson(){var t=this;return t.config.product.variants.forEach((function(e){e.available||(t.notAvailableVariantJson[e.id]=e.options),t.allVariantJson[e.id]=e.options})),t}isSoldOut(){var t=this;if(1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-not-disabled",0)))return t;var e=[],i=[];return ymqJq(".ymq-shopify-option-box").each((function(t){try{"3"==ymqJq(this).data("type").toString()||"20"==ymqJq(this).data("type").toString()?(i.push(1),"multiple"==ymqJq(this).find("select").attr("multiple")?e.push(ymqJq(this).find("select").val().join(",").toString()):e.push(ymqJq(this).find("select").val().toString()),ymqJq(this).find("option").prop("disabled",!1)):(i.push(0),e.push(ymqJq(this).find("input:checked").val().toString()),ymqJq(this).find("input").prop("disabled",!1))}catch(t){}})),e.forEach((function(n,a){var o=n,r=!1;t.ymq_shopify_options_with_index_key[a]&&t.ymq_shopify_options_with_index_key[a].forEach((function(n,c){n=t.config.util.reHtmlSpecialChars(n);var s=Object.assign([],e);if(n!=o&&(s[a]=n,Object.keys(t.notAvailableVariantJson).forEach((function(e){JSON.stringify(s)==JSON.stringify(t.notAvailableVariantJson[e])&&(1==i[a]?(ymqJq(`#ymq-attrib-ymq-variant-${a}`).find("option").eq(c).prop("disabled",!0),ymqJq(`#option-box-ymq-variant-${a} .ymq-multiple-ul li`).eq(c).data("title",t.config.ymq_option_branding.lan.sold_out)):ymqJq(`#ymq-attrib-ymq-variant-${a}-0`).parents(".ymq-shopify-option-box").find("input").eq(c).prop("disabled",!0).next().data("title",t.config.ymq_option_branding.lan.sold_out),r=!0)})),0==r)){var m=!1;try{Object.keys(t.allVariantJson).forEach((function(e){if(JSON.stringify(s)==JSON.stringify(t.allVariantJson[e]))throw m=!0,new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}0==m&&(1==i[a]?(ymqJq(`#ymq-attrib-ymq-variant-${a}`).find("option").eq(c).prop("disabled",!0),ymqJq(`#option-box-ymq-variant-${a} .ymq-multiple-ul li`).eq(c).data("title",t.config.ymq_option_branding.lan.sold_out)):ymqJq(`#ymq-attrib-ymq-variant-${a}-0`).parents(".ymq-shopify-option-box").find("input").eq(c).prop("disabled",!0).next().data("title",t.config.ymq_option_branding.lan.sold_out))}}))})),ymqJq(".ymq-shopify-option-box select").each((function(e){t.htmlBuilder.initDropdown(ymqJq(`#ymq-attrib-ymq-variant-${e}`))})),t}initTypeVariantJson(t,e,i=null,n,a=null){var o=this,r={};return r.help=i?i.help:"",r.id=`ymq-variant-${e}`,r.label=t,r.options={},r.isShopify=!0,r.optionsIndex=e,r.required="",r.type=n,null!=a&&(r.style=a),r.tooltip=i?i.tooltip:"",r.tooltip_position=i?i.tooltip_position:"",r.alert_text=i&&i.hasOwnProperty("alert_text")?i.alert_text:"",r.hide_title=i&&i.hasOwnProperty("hide_title")?i.hide_title:0,r.class=i&&i.hasOwnProperty("class")?i.class:"",r.a_t1=i&&i.hasOwnProperty("a_t1")?i.a_t1:"",r.a_t2=i&&i.hasOwnProperty("a_t2")?i.a_t2:"",r.a_width=i&&i.hasOwnProperty("a_width")?i.a_width:"",o.config.ymq_shopify_options[t].forEach((function(t,i){r.options[`${r.id}-${i}`]={id:`${r.id}-${i}`,one_time:0,price:0,price_type:"1",sku:"",value:t},window.ymqAdmin?0==Number(i)?r.options[`${r.id}-${i}`].default=1:r.options[`${r.id}-${i}`].default="":o.config.util.variantIsSelect(o.config.variantData[o.variant_id].options[e],t)?r.options[`${r.id}-${i}`].default=1:r.options[`${r.id}-${i}`].default=""})),r}initDrodownVariantJson(t,e,i=null){return this.initTypeVariantJson(t,e,i,"3")}initRadioVariantJson(t,e,i=null){return this.initTypeVariantJson(t,e,i,"4",1)}initButtonVariantJson(t,e,i=null){return this.initTypeVariantJson(t,e,i,"15",2)}initCanvasDrodownVariantJson(t,e,i){var n=this.initCanvasVariantJson(t,e,i);return n.type=20,n}initCanvasVariantJson(t,e,i){var n=this;null==i&&(i={});var a={};return a.help=n.config.util.getValue(i,"help",""),a.id=`ymq-variant-${e}`,a.label=t,a.options={},a.isShopify=!0,a.optionsIndex=e,a.style=1,a.required="",a.tooltip=n.config.util.getValue(i,"tooltip",""),a.tooltip_position=n.config.util.getValue(i,"tooltip_position",""),a.style=n.config.util.getValue(i,"style",1),a.width=n.config.util.getValue(i,"width",""),a.height=n.config.util.getValue(i,"height",""),a.b_radius=n.config.util.getValue(i,"b_radius",""),a.zoom=n.config.util.getValue(i,"zoom",n.config.util.getValue(n.config.ymq_option_branding.extra,"img-option-bigger",1)),a.type="5",a.alert_text=n.config.util.getValue(i,"alert_text",""),a.hide_title=Number(n.config.util.getValue(i,"hide_title",0)),a.class=n.config.util.getValue(i,"class",""),a.a_t1=n.config.util.getValue(i,"a_t1",""),a.a_t2=n.config.util.getValue(i,"a_t2",""),a.a_width=n.config.util.getValue(i,"a_width",""),n.config.ymq_shopify_options[t].forEach((function(o,r){var c=n.getCanvasObj(i,r,t,o);a.options[`${a.id}-${r}`]={id:`${a.id}-${r}`,one_time:0,price:0,price_type:"1",sku:"",canvas1:c.canvas1,canvas2:c.canvas2,canvas_type:c.canvas_type,automic_bgcolor:c.automic_bgcolor,value:o},n.config.util.variantIsSelect(n.config.variantData[n.variant_id].options[e],o)?a.options[`${a.id}-${r}`].default=1:a.options[`${a.id}-${r}`].default=""})),a}getCanvasObj(t,e,i,n){var a=this;i=a.config.util.reHtmlSpecialChars(i),n=a.config.util.reHtmlSpecialChars(n);var o=2;if(o=null==t||ymqJq.isEmptyObject(t)?1:a.config.util.getValue(t,"show_type",2),1==Number(o)&&a.config.automic_variant_swatch.hasOwnProperty(i)&&a.config.automic_variant_swatch[i].hasOwnProperty(n))return a.config.automic_variant_swatch[i][n];try{return{canvas1:t.values[e].canvas1,canvas2:t.values[e].canvas2,canvas_type:t.values[e].canvas_type,automic_bgcolor:0}}catch(t){return{canvas1:"",canvas2:"",canvas_type:1,automic_bgcolor:0}}}initVariantJson(){var t=this;return t.config.ymq_has_only_default_variant||Object.keys(t.config.ymq_shopify_options).forEach((function(e,i){t.ymq_shopify_options_with_index_key[i]=t.config.ymq_shopify_options[e];var n="",a={},o=null;switch(n=t.config.ymq_variantjson.hasOwnProperty(i)?(o=t.config.ymq_variantjson[i]).type.toString():t.config.util.getValue(t.config.ymq_option_branding.extra,"init-variant-type",1).toString(),1==(null==o?1:t.config.util.getValue(o,"show_type",2))&&(n=t.config.automic_variant_swatch.hasOwnProperty(t.config.util.reHtmlSpecialChars(e))?"4":t.config.util.getValue(t.config.ymq_option_branding.extra,"init-variant-type",1).toString()),n){case"1":default:a=t.initDrodownVariantJson(e,i,o);break;case"2":a=t.initRadioVariantJson(e,i,o);break;case"3":a=t.initButtonVariantJson(e,i,o);break;case"4":a=t.initCanvasVariantJson(e,i,o);break;case"20":a=t.initCanvasDrodownVariantJson(e,i,o)}t.variantJson[a.id]=a})),t}buildVariantHtml(){var t=this;return t.config.ymq_has_only_default_variant||t.htmlBuilder.setJson(t.variantJson).buildtHtml(),t}initVariantId(){var t=this;if(t.variant_id=Number(t.config.util.getUrlParam("variant")),t.variant_id&&t.config.variantData.hasOwnProperty(t.variant_id)||(void 0===window.ymqChangeAvailableVariant?t.variant_id=Number(t.config.product.variants[0].id):t.variant_id=t.config.iddom.val()),t.changeVariantId(),1==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-not-disabled",0)))return t;if(!t.config.variantData[t.variant_id].available)try{Object.keys(t.config.variantData).forEach((function(e){if(t.config.variantData[e].available)throw t.variant_id=Number(e),t.changeVariantId(),t.config.util.changeUriByVariantId(t.variant_id),new Error("LoopTerminates")}))}catch(t){if("LoopTerminates"!==t.message)throw t}return t}changeUriByVariantId(){var t=this,e=[],i={},n=[];t.config.hideByNow&&ymqJq(".shopify-payment-button").hide().remove(),ymqJq(".ymq-shopify-option-box").each((function(){var t=ymqJq(this).find(".ymq_lable").text();"3"==ymqJq(this).data("type").toString()||"20"==ymqJq(this).data("type").toString()?ymqJq(this).find(".ymq-shopify-option").each((function(){e.push(ymqJq(this).val().toString()),i[t]=ymqJq(this).val().toString(),n.push(ymqJq(this).val().toString())})):ymqJq(this).find(".ymq-shopify-option:checked").each((function(){e.push(ymqJq(this).val().toString()),i[t]=ymqJq(this).val().toString(),n.push(ymqJq(this).val().toString())}))}));var a=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-select",""),o=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-select-join","");return""!=a&&(ymqJq(a).val(n.join(o)).trigger("change"),t.config.util.jstrigger(ymqJq(a).get(0),"change")),Object.keys(i).forEach((function(e,n){var a=i[e];if(t.config.shopifySelectDom[e]&&"select"==t.config.shopifySelectDom[e].type){t.config.shopifySelectDom[e].jq.find("option").each((function(){ymqJq(this).val()==a?ymqJq(this).prop("selected",!0).trigger("click"):ymqJq(this).prop("selected",!1)})),t.config.shopifySelectDom[e].jq.val(a).trigger("change");var o=document.getElementById(t.config.shopifySelectDom[e].id);t.config.util.jstrigger(o,"change")}t.config.shopifySelectDom[e]&&"radio"==t.config.shopifySelectDom[e].type&&t.config.shopifySelectDom[e].jq.each((function(i){if(ymqJq(this).val()==a){ymqJq(this).prop("checked",!0).trigger("click");var n=document.getElementsByName(t.config.shopifySelectDom[e].name)[i];t.config.shopifySelectDom[e].jq.trigger("change"),t.config.util.jstrigger(n,"change")}else ymqJq(this).prop("checked",!1)}))})),t.config.product.variants.forEach((function(i){JSON.stringify(i.options)==JSON.stringify(e)&&(t.variant_id=Number(i.id),t.changeVariantId())})),t.config.util.changeUriByVariantId(t.variant_id),t}addVariantIdInput(){var t=this;if(!ymqJq(`#${t.config.ymq_variant_id}`).length){var e=`\n                    <input id="${t.config.ymq_variant_id}" type="hidden" value="">\n                `;t.config.form_box_dom.append(e)}return t}changeVariantId(){var t=this;t.config.iddom.val(t.variant_id),ymqJq(`#${t.config.ymq_variant_id}`).val(t.variant_id)}static getInstance(){return this.instance||(this.instance=new t),this.instance}};return{Product:Product,Cart:Cart}},window.ymq_option.ymq_option_branding.extra.plan>0&&ymqJq((function(){if(!window.ymqAdmin&&window.ymq_option.ymq_option_branding.extra.hasOwnProperty("app-status")&&0==Number(window.ymq_option.ymq_option_branding.extra["app-status"])&&(window.ymqOptionsAppStatus=!1),document.documentElement.innerHTML.match(/asyncLoad/)&&document.documentElement.innerHTML.match(/mw4M5Ya3iFNARE4t/)&&window.ymqOptionsAppStatus){if("product"==window.ymq_option.page&&window.ymq_option.hasOwnProperty("ymq_extra_1")){if(window.ymq_option.product.hasOwnProperty("id")&&window.ymq_option.ymq_option_branding.extra.plan>1){var has_min_max=!1;try{var product_status=-1;window.ymq_option.hasOwnProperty("ymq_status")&&window.ymq_option.ymq_status.hasOwnProperty("ymq_status")&&(product_status=window.ymq_option.ymq_status.ymq_status);var ymq_extra_1=window.ymq_option.ymq_extra_1.item;Object.keys(ymq_extra_1).some((t=>{var e=ymq_extra_1[t];if(1==e.status){if(1==e.need_product)return has_min_max=!0,!0;if(window.ymq_option.product.hasOwnProperty("id")){var i=Object.keys(e.products).map((t=>Number(t)));if(-1!=ymqJq.inArray(window.ymq_option.product.id,i))return has_min_max=!0,!0}if(window.ymq_option.hasOwnProperty("product_collections")){var n=Object.keys(ymq_option.product_collections).map((t=>Number(t))),a=Object.keys(e.collections).map((t=>Number(t)));if(n.filter((t=>a.indexOf(t)>-1)).length>0)return has_min_max=!0,!0}if(window.ymq_option.product.hasOwnProperty("tags")){var o=window.ymq_option.product.tags,r=e.product_tags.split(",");if(o.filter((t=>r.indexOf(t)>-1)).length>0)return has_min_max=!0,!0}}}))}catch(t){}}try{has_min_max&&-1==product_status&&0==window.ymq_option.ymq_option_branding.extra.is_show&&0==ymqNeedInto&&(ymqNeedInto=!0,window.ymq_option.ymq_option_branding.extra["variant-original"]=1,window.ymq_option.ymq_option_branding.extra["quantity-box"]=0,window.ymq_option.buy_now_new=!0,window.ymq_option.theme_buy_now=!0,window.ymq_option.theme_ajax_cart=!0)}catch(t){}}ymqAutoLoad();var Options=window.ymq_option.option_function();if("product"==window.ymq_option.page){var product_status=-1;if(window.ymq_option.hasOwnProperty("ymq_status")&&window.ymq_option.ymq_status.hasOwnProperty("ymq_status")&&(product_status=window.ymq_option.ymq_status.ymq_status),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("ajaxcart-modal")||(window.ymq_option.ymq_option_branding.extra["ajaxcart-modal"]=0),window.ymq_option.ymq_option_branding.extra.hasOwnProperty("ajaxcart-product-type")||(window.ymq_option.ymq_option_branding.extra["ajaxcart-product-type"]=0),window.ymq_option.ymq_option_branding.extra["ajaxcart-modal"]>0&&1==window.ymq_option.ymq_option_branding.extra["ajaxcart-product-type"]&&(-1==product_status&&0==window.ymq_option.ymq_option_branding.extra.is_show&&0==ymqNeedInto&&(window.ymq_option.ymq_option_branding.extra["variant-original"]=1,window.ymq_option.ymq_option_branding.extra["quantity-box"]=0),0==product_status&&(product_status=-1,ymq_option.ymq_extra_0={},ymq_option.ymq_status={},ymq_option.ymq_variantjson={},ymq_option.ymq_option_data={},ymq_option.ymq_variant_condition={},ymq_option.ymq_option_condition={},ymq_option.ymq_option_template={},ymq_option.ymq_option_template_condition={},ymq_option.ymq_option_template_c_t={},ymq_option.ymq_option_template_condition_c_t={},window.ymq_option.ymq_option_branding.extra["variant-original"]=1,window.ymq_option.ymq_option_branding.extra["quantity-box"]=0),window.ymq_option.cancelAjaxCart=!0,window.ymq_option.ymq_option_branding.extra["automic-swatch-ajax"]=0,ymqNeedInto=!0),0!=product_status&&(1==product_status||-1==product_status&&(1==window.ymq_option.ymq_option_branding.extra.is_show||ymqNeedInto))){var ymq_function_text="",ymq_conditionsScript="",wcondition11=ymq_do_condition(window.ymq_option.ymq_option_data,window.ymq_option.ymq_option_condition);ymq_function_text+=wcondition11.function_text,ymq_conditionsScript+=wcondition11.conditionsScript,Object.keys(window.ymq_option.ymq_option_template_condition).forEach((function(t){var e=ymq_do_condition(window.ymq_option.ymq_option_template[t],window.ymq_option.ymq_option_template_condition[t]);ymq_function_text+=e.function_text,ymq_conditionsScript+=e.conditionsScript})),eval(ymq_conditionsScript),window.ymq_option.productInstance=Options.Product.getInstance(),eval(ymq_function_text),ymqJq("#ymq-quantity-input").trigger("change"),window.ymq_option.productInstance.buildFormData().buildOtherFormData(),ymqJq(document).on("mouseover",".ymq_tools,.ymq-checkbox-radio:disabled + label,.ymq-options-button-input:disabled + label,.ymq-options-img-input:disabled + label",(function(t){var e=ymqJq(this);if(null==e.find(".ymq_tooltip_show").html()||""==e.find(".ymq_tooltip_show").html())if(null==e.find(".ymq_tooltip_disabled").html()||""==e.find(".ymq_tooltip_disabled").html())var i="";else i=e.find(".ymq_tooltip_disabled").html();else if(null==e.find(".ymq_tooltip_disabled").html()||""==e.find(".ymq_tooltip_disabled").html())i=e.find(".ymq_tooltip_show").html();else i=e.find(".ymq_tooltip_show").html()+" ("+e.find(".ymq_tooltip_disabled").html()+")";e.justToolsTip({events:t,new_events:t,animation:window.ymq_option.tooltip_type,contents:i,gravity:"top"})})),ymqJq(document).on("mouseover",".ymq-options-img-input:not(:disabled) + label",(function(t){var e=ymqJq(this);e.justToolsTip({events:t,new_events:t,animation:window.ymq_option.tooltip_type,contents:e.find(".ymq_tooltip_show").html(),gravity:"top"})}));var gravity="right";if(ymqJq(window).width()<768)var gravity="top";ymqJq(document).on("mouseover",".ymq-multiple-li.disabled",(function(t){var e=ymqJq(this);e.justToolsTip({events:t,new_events:t,animation:window.ymq_option.tooltip_type,contents:e.find(".ymq_tooltip_show").html(),gravity:gravity})}))}}window.ymqAdmin||(pushLocalStorage("cart","ymq-code"),window.ymq_option.cartInstance=Options.Cart.getInstance())}})),window.ymq_option.Ajaxcart=class t{constructor(){this.instance=null}initMemberVariables(){var t=this;return t.config=t.cart.config,t}init(){var t=this;return"cart"==window.ymq_option.page||t.initMemberVariables().initAjaxCartModal().initAjaxCartSlide().initAjaxCartEvent(),t}initAjaxCartSlide(){var t=this;if(2!=t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"ajaxcart-modal",0)||0!=ymqJq(".ymq-cd-panel").length)return t;var e=`\n        <form action="/cart" method="post" novalidate="" class="ymq-ajax-form">\n            <div class="ymq-cd-panel ymq-cd-panel--from-right js-ymq-cd-panel-main" style="visibility:hidden;">\n                <ymq-cart-drawer class="ymq-cd-panel__cart-drawer">\n                    <header class="ymq-cd-panel__header">\n                        <h1>\n                            <div class="ymq-cart-header-svg">\n                                <svg style="width: 100%;height: 100%;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2855"><path d="M128 810.666667v-85.333334h768v85.333334zM725.333333 298.666667v128h-85.333333V298.666667H384v128H298.666667V298.666667H208.341333L139.349333 896h745.301334L815.658667 298.666667H725.333333z m-256-256h85.333334a170.666667 170.666667 0 0 1 170.666666 170.666666h165.674667L981.333333 981.333333H42.666667L132.992 213.333333H298.666667a170.666667 170.666667 0 0 1 170.666666-170.666666z m170.666667 170.666666a85.333333 85.333333 0 0 0-85.333333-85.333333h-85.333334a85.333333 85.333333 0 0 0-85.333333 85.333333h256z" p-id="2856"></path></svg>\n                            </div>\n                            <span class="ymq-cart-item-count"></span>\n                            <span class="ymq-cart-item-count-html">${t.config.util.getValue(t.config.ymq_option_branding.lan,"item","ITEM")}</span>\n                        </h1>\n                        <a href="#0" class="ymq-cd-panel__close js-cd-close">Close</a>\n                    </header>\n\n                    <div class="ymq-cd-panel__container ymq-cart-slide">\n                        <div class="ymq-cd-panel__content">\n                            <div class="ymq-cart-items"></div>\n                        </div>\n                    </div>\n                    <footer class="ymq-cd-panel__footer">\n                        <div id="ymq-mini-cart-note" class="ymq-cd-panel__footer-item">\n                            <span class="ymq-openable__overlay"></span>\n                            <label for="cart[note]" class="mini-cart__order-note-title heading heading--xsmall">${t.config.util.getValue(t.config.ymq_option_branding.lan,"cart-note","Add order note")}</label>\n                            <textarea name="note" class="ymq-cart-note" rows="3" placeholder="${t.config.util.getValue(t.config.ymq_option_branding.lan,"note-placeholder","How can we help you?")}"></textarea>\n                            <div class="ymq-cart-note-button">Save</div>\n                        </div>\n                        <div class="ymq-cd-panel__footer-item">\n                            <div class="ymq-mini-cart__actions">\n                                <span class="ymq-cart-note-show">${t.config.util.getValue(t.config.ymq_option_branding.lan,"cart-note","Add order note")}</span>\n                                <span class="ajac-cart-total-box">\n                                    ${t.config.util.getValue(t.config.ymq_option_branding.lan,"subtotal","Subtotal: ")}\n                                    <span class="ymq-ajax-cart-total-box"></span>\n                                </span>\n                            </div>\n                            ${t.config.show_discount?t.config.discount_html:""}\n                            \n                            <div class="ymq-ajax-cart-button ymq-fake-checkout-btn">\n                                ${t.config.util.getValue(t.config.ymq_option_branding.lan,"checket","CHECKOUT")}\n                                <span class="ymq-square-separator"></span>\n                                <span class="ymq_cart_total_price"></span>\n                            </div>\n\n                            <button style="display:none!important;" type="submit" class="ymq-fake-checkout-btn ymq-ajax-fake-checkout-btn" name="checkout">\n                                ${t.config.util.getValue(t.config.ymq_option_branding.lan,"checket","CHECKOUT")}\n                                <span class="ymq-square-separator"></span>\n                                <span class="ymq_cart_total_price"></span>\n                            </button>\n                            <a class="ymq-ajax-view-cart" href="/cart">\n                                ${t.config.util.getValue(t.config.ymq_option_branding.lan,"view-cart","View Cart")}\n                            </a>\n                        </div>\n                    </footer>\n                </ymq-cart-drawer>\n            </div>\n        </form>\n        `;return ymqJq("body").append(e),t.config.ajaxCartxSlide=ymqJq(".ymq-cd-panel"),t.config.ajaxCartxSlide.on("click",(function(e){var i=ymqJq(e.target);if(i.hasClass("ymq-cd-panel__close")||i.hasClass("ymq-cd-panel"))return t.ajaxCartHide(),!1})),t}initAjaxCartModal(){var t=this;if(1!=t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"ajaxcart-modal",0)||0!=ymqJq("#ymqAjaxCartModal").length)return t;var e=`\n        <div class="ymq-bmodal ymq-modal-fade" id="ymqAjaxCartModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n            <div class="ymq-modal-dialog ymq-modal-lg" role="document" data-ymq-modal-center="${t.config.util.getValue(t.config.ymq_option_branding.extra,"ajaxcart-modal-center",1)}" data-ymq-modal-position="${t.config.util.getValue(t.config.ymq_option_branding.extra,"ajaxcart-modal-position",.6)}">\n                <div class="ymq-bmodal-content">\n                    <div class="ymq-modal-header">\n                        <div class="ymq-modal-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">${t.config.closeSvg}</span></div>\n                    </div>\n                    <div class="ymq-modal-body ymq-modal-body-height-auto">\n                        <div class="ymq-ajax-success-alert">\n                            <div class="ymq-success-icon-box"><svg class="ymq-success-icon ymq-icon" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1760"><path d="M512 85.333333c235.648 0 426.666667 191.018667 426.666667 426.666667s-191.018667 426.666667-426.666667 426.666667S85.333333 747.648 85.333333 512 276.352 85.333333 512 85.333333z m-74.965333 550.4L346.453333 545.152a42.666667 42.666667 0 1 0-60.330666 60.330667l120.704 120.704a42.666667 42.666667 0 0 0 60.330666 0l301.653334-301.696a42.666667 42.666667 0 1 0-60.288-60.330667l-271.530667 271.488z" p-id="1761"></path></svg></div>\n                            <div class="ymq-ajax-success-alert-text">${t.config.util.getValue(t.config.ymq_option_branding.lan,"add-cart-success","Add to cart success.")}</div>\n                        </div>\n                        <div class="ymq-cart-items"></div>\n                        <div class="ymq-ajax-action-box">\n                            <div class="ymq-ajax-action-item">\n                             <textarea name="note" class="ymq-cart-note" rows="3" placeholder="${t.config.util.getValue(t.config.ymq_option_branding.lan,"note-placeholder","How can we help you?")}"></textarea>\n                                \n                            </div>\n                            <div class="ymq-ajax-action-item">\n                                ${t.config.show_discount?t.config.discount_html:""}\n                                <div class="ymq-ajax-cart-button-box">\n                                    <div class="ymq-ajax-cart-button ymq-fake-checkout-btn">${t.config.util.getValue(t.config.ymq_option_branding.lan,"checket","Checket")}</div>\n                                </div>  \n                            </div>\n                            \n                        </div>\n                    </div>\n                    <div class="ymq-modal-footer">\n                      \n                    </div>\n                </div>\n            </div>\n        </div>\n        `;return ymqJq("body").append(e),t.config.ajaxCartModal=ymqJq("#ymqAjaxCartModal"),t}initAjaxCartEvent(){var t=this;ymqJq(document).on("click",".ymq-ajax-cart-button-to-cart",(function(){window.location.href="/cart"})),ymqJq(document).on("click",".ymq-ajax-cart-button",(function(){t.config.addedCartEvent&&ymqJq(this).next(".ymq-ajax-fake-checkout-btn").trigger("click")})),ymqJq(document).on("click",".ymq-cart-note-show",(function(){ymqJq("#ymq-mini-cart-note").attr("open","")})),ymqJq(document).on("click",".ymq-cart-note-button",(function(){return ymqJq("#ymq-mini-cart-note").removeAttr("open",""),!1})),ymqJq(document).on("click","#ymq-mini-cart-note",(function(t){if(ymqJq(t.target).hasClass("ymq-openable__overlay"))return ymqJq("#ymq-mini-cart-note").removeAttr("open",""),!1}));var e=t.config.util.getValue(window.ymq_option.ymq_option_branding.extra,"trigger-ajaxcart-modal-show",""),i=".site-header__cart,.ymq-header-ajax-show";return e=""!=e?`${i},${e}`:i,ymqJq(document).on("click",e,(function(){return"cart"==window.ymq_option.page?location.reload():t.cart.cartJson.item_count>0&&ymqJq(".ymq-cart-items .ymq-cart-item").length>0?t.ajaxCartShow():t.makeAjaxCartHtml(),!1})),ymqJq(document).on("click",".ymq-cart-item-quantity-action",(function(){var e=ymqJq(this).parents(".ymq-cart-item"),i=-1;"add"==ymqJq(this).data("type")&&(i=1);var n=ymqJq(this).parent(".ymq-cart-item-quantity").find(".ymq-cart-item-quantity-input"),a=parseInt(n.val());return isNaN(a)&&(a=1),(a+=i)<0&&(a=0),e.hasClass("ymq-cart-item-loader")||t.doUpdateCartItem(e,a),!1})),ymqJq(document).on("click",".ymq-cart-item-remove",(function(){var e=ymqJq(this).parents(".ymq-cart-item");if(e.hasClass("ymq-cart-item-loader"))return!1;t.doUpdateCartItem(e,0)})),ymqJq(document).on("change",".ymq-cart-item-quantity-input",(function(){var e=ymqJq(this).parents(".ymq-cart-item"),i=parseInt(ymqJq(this).val());if(isNaN(i)&&(i=1),i<0&&(i=0),e.hasClass("ymq-cart-item-loader"))return!1;t.doUpdateCartItem(e,i)})),t}onQuantityStart(t){t.addClass("ymq-cart-item-loader").find(".ymq-cart-item-quantity-input").attr("readonly",!0);var e=t.get(0).querySelector(".ymq-line-item__loader");e.hidden=!1,e.firstElementChild.hidden=!1,e.lastElementChild.hidden=!0}async onQuantityEnd(t,e){var i=this,n=t.get(0).querySelector(".ymq-line-item__loader");await n.firstElementChild.animate({opacity:[1,0],transform:["translateY(0)","translateY(-10px)"]},75).finished,n.firstElementChild.hidden=!0,0==e?(await t.get(0).animate({opacity:[1,0],height:[`${this.clientHeight}px`,0]},{duration:300,easing:"ease"}).finished,t.get(0).remove()):(n.lastElementChild.hidden=!1,await n.lastElementChild.animate({opacity:[0,1],transform:["translateY(10px)","translateY(0)"]},{duration:75,endDelay:300}).finished,n.hidden=!0,t.removeClass("ymq-cart-item-loader").find(".ymq-cart-item-quantity-input").val(e).attr("readonly",!1));try{i.cart.replaceDomPrice(i.cart.cartJson).doCheckout()}catch(t){}try{i.cart.new_checkout()}catch(t){}0==i.cart.cartJson.item_count&&i.doMakeAjaxCartHtml(i.cart.cartJson)}doUpdateCartItem(t,e){var i=this;t.find(".ymq-line-item__loader,.ymq-line-item__loader-spinner").removeAttr("hidden"),i.onQuantityStart(t),ymqJq.ajax({type:"POST",url:"/cart/change.js",data:{quantity:e,id:t.data("id")},dataType:"json",success:function(n){i.cart.cartJson=window.ymq_option.cart=n,i.onQuantityEnd(t,e)},error:function(n){i.onQuantityEnd(t,e)}})}ajaxCartShow(){var t=this;return t.config.ajaxCartModal&&t.config.ajaxCartModal.modal("show"),t.config.ajaxCartxSlide&&(t.config.ajaxCartxSlide.removeAttr("style").addClass("ymq-cd-panel--is-visible"),ymqJq("body").css("overflow","hidden")),t}ajaxCartHide(){var t=this;return t.config.ajaxCartModal&&t.config.ajaxCartModal.modal("hide"),t.config.ajaxCartxSlide&&(t.config.ajaxCartxSlide.removeClass("ymq-cd-panel--is-visible"),setTimeout((()=>{ymqJq("body").css("overflow","unset")}),400)),t}getProperties(t){try{if(t.includes("/uploads/"))return["jpg","jpeg","webp","gif","png","apng","avif","svg","bmp","ico","tiff"].includes(t.substring(t.lastIndexOf(".")+1).toLowerCase())?`<span class="ymq-cart-file"><img src="${t}" style="max-width: 50px; height: auto;"></span>`:`<span class="ymq-cart-file">${this.config.util.getValue(this.config.ymq_option_branding.lan,"uploaded-file","Uploaded file")}</span>`}catch(e){return console.error(e),t}return t}getItemImage(t){return null==t.image||null==t.image?"":`<img alt="${t.product_title}" src="${this.config.util.getShopifySmallImg(t.image,100,100)}">`}doMakeAjaxCartHtml(t){var e=this,i="";t.items.length>0?(ymqJq(".ymq-cd-panel__footer").show(),ymqJq(".ymq-cd-panel__container").removeClass("ymq-cd-panel__container-center"),t.items.forEach((t=>{var n="";t.options_with_values.forEach((t=>{"Title"==t.name&&"Default Title"==t.value||(n+=`\n                            <li>\n                                <span class="ymq-cart-item-properties-key">${t.name}</span>\n                                <span class="ymq-cart-item-properties-spacer">: </span>\n                                <span class="ymq-cart-item-properties-value">${t.value}</span>\n                            </li>\n                            `)})),ymqJq.isEmptyObject(t.properties)||Object.keys(t.properties).forEach((i=>{i.startsWith("_")||(n+=`\n                            <li>\n                                <span class="ymq-cart-item-properties-key">${i}</span>\n                                <span class="ymq-cart-item-properties-spacer">: </span>\n                                <span class="ymq-cart-item-properties-value">${e.getProperties(t.properties[i])}</span>\n                            </li>\n                            `)})),i+=`\n                <div class="ymq-cart-item" data-id="${t.key}">\n                    <div class="ymq-cart-item-image">\n                        <a href="${t.url}">\n                            <span class="ymq-line-item__loader" hidden>\n                                <span class="ymq-line-item__loader-spinner" hidden>\n                                    <svg focusable="false" width="16" height="16" viewBox="25 25 50 50"><circle cx="50" cy="50" r="20" fill="none" stroke="#2e2e2e" stroke-width="6"></circle></svg>\n                                </span>\n                                <span class="ymq-line-item__loader-mark" hidden>\n                                    <svg focusable="false" width="20" height="20" class="icon icon--check   " viewBox="0 0 32 32"><path d="M24.59 8L12.9885 20.6731L7.31806 15.1819L6 16.6956L12.3755 22.8792L13.0805 23.5556L13.7395 22.8309L26 9.43318L24.59 8Z" stroke="currentColor"></path></svg>\n                                </span>\n                            </span>\n                            <div class="ymq-cart-item-image-box">\n                                ${e.getItemImage(t)}\n                            </div>\n                        </a>\n                    </div>\n                    <div class="ymq-cart-item-main">\n                        <div class="ymq-cart-item-main-top">\n                            <h3 class="ymq-cart-item-title">\n                                <a href="${t.url}">${t.product_title}</a>\n                            </h3>\n                            <ul class="ymq-cart-item-properties">\n                                ${n}\n                                <li>\n                                    <span class="ymq-cart-item-remove">${e.config.util.getValue(e.config.ymq_option_branding.lan,"remove","Remove")}</span>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="ymq-cart-item-main-bottom">\n                            <div class="ymq-cart-item-quantity">\n                                <div class="ymq-cart-item-quantity-action" data-type="cut">\n                                    <svg width="10" viewBox="0 0 12 2" xmlns="http://www.w3.org/2000/svg"><path d="M11.25 0H.75C.3 0 0 .4 0 1s.3 1 .75 1h10.5c.45 0 .75-.4.75-1s-.3-1-.75-1z" fill="#7A7A7A" fill-rule="nonzero"></path></svg>\n                                </div>\n                                <input class="ymq-cart-item-quantity-input" type="text" value="${t.quantity}">\n                                <div class="ymq-cart-item-quantity-action" data-type="add">\n                                    <svg width="10" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M11 5H7V1a1 1 0 00-2 0v4H1a1 1 0 000 2h4v4a1 1 0 002 0V7h4a1 1 0 000-2z" fill="currentColor" fill-rule="nonzero"></path></svg>\n                                </div>\n                            </div>\n                            <div class="ymq-ajax-item-price-box">\n                                ${e.getLinePriceDom(t)}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                `}))):(ymqJq(".ymq-cd-panel__footer").hide(),ymqJq(".ymq-cd-panel__container").addClass("ymq-cd-panel__container-center"),i=`\n            <div class="ymq_drawer__content">\n                <span class="ymq-cart-empty">${e.config.util.getValue(e.config.ymq_option_branding.lan,"cart-empty","Your cart is empty")}</span>\n                <a href="/collections/all">\n                    <div class="ymq-cart-continue-button">\n                    ${e.config.util.getValue(e.config.ymq_option_branding.lan,"continue-shopping","Continue shopping")}\n                    </div>\n                </a>\n            </div>\n            `),ymqJq(".ymq-cart-items").html(i);try{e.cart.replaceDomPrice(t).doCheckout()}catch(t){}try{e.cart.new_checkout()}catch(t){}return e}getCartPriceDom(t){try{return t.original_total_price==t.total_price?'\n                    <span class="ymq_cart_total_price"></span>\n                ':'\n                    <s>\n                        <span class="ymq_cart_original_total_price"></span>\n                    </s>\n                    <span class="ymq_cart_total_price"></span>\n                '}catch(t){return'\n                <span class="ymq_cart_total_price"></span>\n            '}}getLinePriceDom(t){try{return t.original_price==t.final_price?`\n                    <span data-ymq-item-key="${t.key}" class="ymq-cart-item-price ymq_item_original_price">\n                        ${t.original_price}\n                    </span>\n                `:`\n                    <s>\n                        <span data-ymq-item-key="${t.key}" class="ymq-cart-item-price ymq_item_original_price">\n                            ${t.original_price}\n                        </span>\n                    </s>\n                    <span data-ymq-item-key="${t.key}" class="ymq-cart-item-price ymq_item_final_price">\n                        ${t.final_price}\n                    </span>\n                `}catch(e){return`\n                <span data-ymq-item-key="${t.key}" class="ymq-cart-item-price ymq_item_original_price">\n                    ${t.original_price}\n                </span>\n            `}}makeAjaxCartHtml(){var t=this;fetch("/cart/update.js",{method:"POST"}).then((t=>t.json())).then((e=>{t.doMakeAjaxCartHtml(e).ajaxCartShow()}))}doHook(t){return this.config.ymqHook(t),this}static getInstance(e,i){return this.instance||(this.instance=new t),this.instance[e]=i,this.instance}},factory=function(t){var e,i,n,a,o,r,c,s,m,l,d,p,u,y,_,h,q,f,g,v,b,w,x,k,J,$,O,C,D=(e={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156,hsl:!1},i=function(e,i){var n=t(i).data("colpick").hsl?Y(e):I(e);t(i).data("colpick").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},n=function(e,i){t(i).data("colpick").fields.eq(4).val(Math.round(e.h)).end().eq(5).val(Math.round(e.s)).end().eq(6).val(Math.round(e.x)).end()},a=function(e,i){t(i).data("colpick").fields.eq(0).val(t(i).data("colpick").hsl?B(e):M(e))},o=function(e,i){t(i).data("colpick").selector.css("backgroundColor","#"+(t(i).data("colpick").hsl?B({h:e.h,s:100,x:50}):M({h:e.h,s:100,x:100}))),t(i).data("colpick").selectorIndic.css({left:parseInt(t(i).data("colpick").height*e.s/100,10),top:parseInt(t(i).data("colpick").height*(100-e.x)/100,10)})},r=function(e,i){t(i).data("colpick").hue.css("top",parseInt(t(i).data("colpick").height-t(i).data("colpick").height*e.h/360,10))},c=function(e,i){t(i).data("colpick").currentColor.css("backgroundColor","#"+(t(i).data("colpick").hsl?B(e):M(e)))},s=function(e,i){t(i).data("colpick").newColor.css("backgroundColor","#"+(t(i).data("colpick").hsl?B(e):M(e)))},m=function(e){var c,m=t(this).parent().parent();if(this.parentNode.className.indexOf("_hex")>0)m.data("colpick").color=c=m.data("colpick").hsl?P(O(this.value)):N(O(this.value)),i(c,m.get(0)),n(c,m.get(0));else if(this.parentNode.className.indexOf("_hsx")>0)m.data("colpick").color=c=J({h:parseInt(m.data("colpick").fields.eq(4).val(),10),s:parseInt(m.data("colpick").fields.eq(5).val(),10),x:parseInt(m.data("colpick").fields.eq(6).val(),10)}),i(c,m.get(0)),a(c,m.get(0));else{var l={r:parseInt(m.data("colpick").fields.eq(1).val(),10),g:parseInt(m.data("colpick").fields.eq(2).val(),10),b:parseInt(m.data("colpick").fields.eq(3).val(),10)};m.data("colpick").color=c=m.data("colpick").hsl?A($(l)):S($(l)),a(c,m.get(0)),n(c,m.get(0))}o(c,m.get(0)),r(c,m.get(0)),s(c,m.get(0)),m.data("colpick").onChange.apply(m.parent(),[c,m.data("colpick").hsl?B(c):M(c),m.data("colpick").hsl?Y(c):I(c),m.data("colpick").el,0])},l=function(e){t(this).parent().removeClass("colpick_focus")},d=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),t(this).parent().addClass("colpick_focus")},p=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i=t(this).parent().find("input").focus(),n={el:t(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsx_h")>0?360:this.parentNode.className.indexOf("_hsx")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(n,y),t(document).mousemove(n,u)},u=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&m.apply(t.data.field.get(0),[!0]),!1},y=function(e){return m.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),t(document).off("mouseup",y),t(document).off("mousemove",u),!1},_=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i={cal:t(this).parent(),y:t(this).offset().top};t(document).on("mouseup touchend",i,q),t(document).on("mousemove touchmove",i,h);var n="touchstart"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return m.apply(i.cal.data("colpick").fields.eq(4).val(parseInt(360*(i.cal.data("colpick").height-(n-i.y))/i.cal.data("colpick").height,10)).get(0),[i.cal.data("colpick").livePreview]),!1},h=function(t){var e="touchmove"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return m.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},q=function(e){return t(document).off("mouseup touchend",q),t(document).off("mousemove touchmove",h),!1},f=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i,n={cal:t(this).parent(),pos:t(this).offset()};return n.preview=n.cal.data("colpick").livePreview,t(document).on("mouseup touchend",n,v),t(document).on("mousemove touchmove",n,g),"touchstart"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,i=e.pageY),m.apply(n.cal.data("colpick").fields.eq(6).val(parseInt(100*(n.cal.data("colpick").height-(i-n.pos.top))/n.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-n.pos.left)/n.cal.data("colpick").height,10)).get(0),[n.preview]),!1},g=function(t){var e;return"touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,e=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,e=t.pageY),m.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},v=function(e){return t(document).off("mouseup touchend",v),t(document).off("mousemove touchmove",g),!1},b=function(e){var i=t(this).parent(),n=i.data("colpick").color;i.data("colpick").origColor=n,c(n,i.get(0)),i.data("colpick").onSubmit(n,i.data("colpick").hsl?B(n):M(n),i.data("colpick").hsl?Y(n):I(n),i.data("colpick").el)},w=function(e){e.stopPropagation();var i=t("#"+t(this).data("colpickId"));i.data("colpick").onBeforeShow.apply(this,[i.get(0)]);var n=t(this).offset(),a=n.top+this.offsetHeight,o=n.left,r=k(),c=i.width();o+c>r.l+r.w&&(o-=c),i.css({left:o+"px",top:a+"px"}),0!=i.data("colpick").onShow.apply(this,[i.get(0)])&&i.show(),t("html").mousedown({cal:i},x),i.mousedown((function(t){t.stopPropagation()}))},x=function(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t("html").off("mousedown",x)},k=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},J=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}},$=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},O=function(t){var e=6-t.length;if(e>0){for(var i=[],n=0;n<e;n++)i.push("0");i.push(t),t=i.join("")}return t},C=function(){var e=t(this).parent(),c=e.data("colpick").origColor;e.data("colpick").color=c,i(c,e.get(0)),a(c,e.get(0)),n(c,e.get(0)),o(c,e.get(0)),r(c,e.get(0)),s(c,e.get(0))},{init:function(u){if(u=t.extend({},e,u||{}),t(this).val()&&(u.color=t(this).val()),"string"==typeof u.color)u.color=u.hsl?P(u.color):N(u.color);else if(null!=u.color.r&&null!=u.color.g&&null!=u.color.b)u.color=u.hsl?A(u.color):S(u.color);else{if(null==u.color.h||null==u.color.s||null==u.color.b)return this;u.color=u.hsl?fixHsl(u.color):fixHsb(u.color)}return this.each((function(){if(!t(this).data("colpickId")){var e=t.extend({},u);e.origColor=u.color;var y="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colpickId",y);var h=t('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_x colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",y);h.addClass("colpick_"+e.layout+(e.submit?"":" colpick_"+e.layout+"_ns")),"light"!=e.colorScheme&&h.addClass("colpick_"+e.colorScheme),e.hsl&&h.addClass("colpick_hsl"),h.find("div.colpick_submit").html(e.submitText).click(b),e.fields=h.find("input").change(m).blur(l).focus(d),h.find("div.colpick_field_arrs").mousedown(p).end().find("div.colpick_current_color").click(C),e.selector=h.find("div.colpick_color").on("mousedown touchstart",f),e.selectorIndic=e.selector.find("div.colpick_selector_outer"),e.el=this,e.hue=h.find("div.colpick_hue_arrs"),huebar=e.hue.parent();var q,g,v=navigator.userAgent.toLowerCase(),x="Microsoft Internet Explorer"===navigator.appName,k=x?parseFloat(v.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,J=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(x&&k<10)for(q=0;q<=11;q++)g=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+J[q]+", endColorstr="+J[q+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+J[q]+", endColorstr="+J[q+1]+')";'),huebar.append(g);else stopList=J.join(","),huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");h.find("div.colpick_hue").on("mousedown touchstart",_),e.newColor=h.find("div.colpick_new_color"),e.currentColor=h.find("div.colpick_current_color"),h.data("colpick",e),i(e.color,h.get(0)),n(e.color,h.get(0)),a(e.color,h.get(0)),r(e.color,h.get(0)),o(e.color,h.get(0)),c(e.color,h.get(0)),s(e.color,h.get(0)),e.flat?(h.appendTo(this).show(),h.css({position:"relative",display:"block"})):(h.appendTo(document.body),t(this).on(e.showEvent,w),h.css({position:"absolute"}))}}))},showPicker:function(){return this.each((function(){t(this).data("colpickId")&&w.apply(this)}))},hidePicker:function(){return this.each((function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()}))},setColor:function(e,m){if(m=void 0===m?1:m,"string"==typeof e)e=N(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=S(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=fixHsb(e)}return this.each((function(){if(t(this).data("colpickId")){var l=t("#"+t(this).data("colpickId"));l.data("colpick").color=e,l.data("colpick").origColor=e,i(e,l.get(0)),n(e,l.get(0)),a(e,l.get(0)),r(e,l.get(0)),o(e,l.get(0)),s(e,l.get(0)),l.data("colpick").onChange.apply(l.parent(),[e,l.data("colpick").hsl?B(e):M(e),l.data("colpick").hsl?Y(e):I(e),l.data("colpick").el,1]),m&&c(e,l.get(0))}}))}}),j=function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}},N=function(t){return S(j(t))},P=function(t){return A(j(t))},S=function(t){var e={h:0,s:0,x:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),a=n-i;return e.x=n,e.s=0!=n?255*a/n:0,0!=e.s?t.r==n?e.h=(t.g-t.b)/a:t.g==n?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e},A=function(t){return E(S(t))},E=function(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=t.x*(200-t.s)/200,e.s=t.x*t.s/(100-Math.abs(2*e.x-100)),e},V=function(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=(200*t.x+t.s*(100-Math.abs(2*t.x-100)))/200,e.s=200*(e.x-t.x)/e.x,e},I=function(t){var e={},i=t.h,n=255*t.s/100,a=255*t.x/100;if(0==n)e.r=e.g=e.b=a;else{var o=a,r=(255-n)*a/255,c=i%60*(o-r)/60;360==i&&(i=0),i<60?(e.r=o,e.b=r,e.g=r+c):i<120?(e.g=o,e.b=r,e.r=o-c):i<180?(e.g=o,e.r=r,e.b=r+c):i<240?(e.b=o,e.r=r,e.g=o-c):i<300?(e.b=o,e.g=r,e.r=r+c):i<360?(e.r=o,e.g=r,e.b=o-c):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},Y=function(t){return I(V(t))},T=function(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,(function(t,e){1==e.length&&(i[t]="0"+e)})),i.join("")},M=function(t){return T(I(t))},B=function(t){return M(V(t))};t.fn.extend({colpick:D.init,colpickHide:D.hidePicker,colpickShow:D.showPicker,colpickSetColor:D.setColor}),t.extend({colpick:{rgbToHex:T,rgbToHsb:S,rgbToHsl:A,hsbToHex:M,hsbToRgb:I,hsbToHsl:E,hexToHsb:N,hexToHsl:P,hexToRgb:j,hslToHsb:V,hslToRgb:Y,hslToHex:B}})},"function"==typeof ymq_define&&ymq_define.amd?ymq_define(["jquery"],factory):factory(ymqJq),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e()}(this,(function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c="undefined"!=typeof window&&void 0!==window.document,s=c?window:{},m=!(!c||!s.document.documentElement)&&"ontouchstart"in s.document.documentElement,l=!!c&&"PointerEvent"in s,d="cropper",p="all",u="crop",y="move",_="zoom",h="e",q="w",f="s",g="n",v="ne",b="nw",w="se",x="sw",k="".concat(d,"-crop"),J="".concat(d,"-disabled"),$="".concat(d,"-hidden"),O="".concat(d,"-hide"),C="".concat(d,"-invisible"),D="".concat(d,"-modal"),j="".concat(d,"-move"),N="".concat(d,"Action"),P="".concat(d,"Preview"),S="crop",A="move",E="none",V="crop",I="cropend",Y="cropmove",T="cropstart",M="dblclick",B=l?"pointerdown":m?"touchstart":"mousedown",H=l?"pointermove":m?"touchmove":"mousemove",L=l?"pointerup pointercancel":m?"touchend touchcancel":"mouseup",F="ready",R="resize",W="wheel",Q="zoom",U="image/jpeg",z=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,G=/^data:/,K=/^data:image\/jpeg;base64,/,X=/^img|canvas$/i,Z={viewMode:0,dragMode:S,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},tt=Number.isNaN||s.isNaN;function et(t){return"number"==typeof t&&!tt(t)}var it=function(t){return t>0&&t<1/0};function nt(t){return void 0===t}function at(e){return"object"===t(e)&&null!==e}var ot=Object.prototype.hasOwnProperty;function rt(t){if(!at(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&ot.call(i,"isPrototypeOf")}catch(t){return!1}}function ct(t){return"function"==typeof t}var st=Array.prototype.slice;function mt(t){return Array.from?Array.from(t):st.call(t)}function lt(t,e){return t&&ct(e)&&(Array.isArray(t)||et(t.length)?mt(t).forEach((function(i,n){e.call(t,i,n,t)})):at(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var dt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return at(t)&&i.length>0&&i.forEach((function(e){at(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},pt=/\.\d*(?:0|9){12}\d*$/;function ut(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return pt.test(t)?Math.round(t*e)/e:t}var yt=/^width|height|left|top|marginLeft|marginTop$/;function _t(t,e){var i=t.style;lt(e,(function(t,e){yt.test(e)&&et(t)&&(t="".concat(t,"px")),i[e]=t}))}function ht(t,e){if(e)if(et(t.length))lt(t,(function(t){ht(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function qt(t,e){e&&(et(t.length)?lt(t,(function(t){qt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function ft(t,e,i){e&&(et(t.length)?lt(t,(function(t){ft(t,e,i)})):i?ht(t,e):qt(t,e))}var gt=/([a-z\d])([A-Z])/g;function vt(t){return t.replace(gt,"$1-$2").toLowerCase()}function bt(t,e){return at(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(vt(e)))}function wt(t,e,i){at(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(vt(e)),i)}var xt=/\s\s*/,kt=function(){var t=!1;if(c){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});s.addEventListener("test",i,n),s.removeEventListener("test",i,n)}return t}();function Jt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(xt).forEach((function(e){if(!kt){var o=t.listeners;o&&o[e]&&o[e][i]&&(a=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,a,n)}))}function $t(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(xt).forEach((function(e){if(n.once&&!kt){var o=t.listeners,r=void 0===o?{}:o;a=function(){delete r[e][i],t.removeEventListener(e,a,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];i.apply(t,c)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],n),r[e][i]=a,t.listeners=r}t.addEventListener(e,a,n)}))}function Ot(t,e,i){var n;return ct(Event)&&ct(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function Ct(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Dt=s.location,jt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Nt(t){var e=t.match(jt);return null!==e&&(e[1]!==Dt.protocol||e[2]!==Dt.hostname||e[3]!==Dt.port)}function Pt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function St(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,o=t.translateY,r=[];et(a)&&0!==a&&r.push("translateX(".concat(a,"px)")),et(o)&&0!==o&&r.push("translateY(".concat(o,"px)")),et(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),et(i)&&1!==i&&r.push("scaleX(".concat(i,")")),et(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var c=r.length?r.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function At(t,e){var i=t.pageX,n=t.pageY,o={endX:i,endY:n};return e?o:a({startX:i,startY:n},o)}function Et(t){var e=t.aspectRatio,i=t.height,n=t.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=it(n),r=it(i);if(o&&r){var c=i*e;"contain"===a&&c>n||"cover"===a&&c<n?i=n/e:n=i*e}else o?i=n/e:r&&(n=i*e);return{width:n,height:i}}var Vt=String.fromCharCode;var It=/^data:.*,/;function Yt(t){var e,i=new DataView(t);try{var n,a,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,c=2;c+1<r;){if(255===i.getUint8(c)&&225===i.getUint8(c+1)){a=c;break}c+=1}if(a){var s=a+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var a=e;a<i;a+=1)n+=Vt(t.getUint8(a));return n}(i,a+4,4)){var m=i.getUint16(s);if(((n=18761===m)||19789===m)&&42===i.getUint16(s+2,n)){var l=i.getUint32(s+4,n);l>=8&&(o=s+l)}}}if(o){var d,p,u=i.getUint16(o,n);for(p=0;p<u;p+=1)if(d=o+12*p+2,274===i.getUint16(d,n)){d+=8,e=i.getUint16(d,n),i.setUint16(d,1,n);break}}}catch(t){e=1}return e}var Tt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,a=Number(e.minContainerWidth),o=Number(e.minContainerHeight);ht(n,$),qt(t,$);var r={width:Math.max(i.offsetWidth,a>=0?a:200),height:Math.max(i.offsetHeight,o>=0?o:100)};this.containerData=r,_t(n,{width:r.width,height:r.height}),ht(t,$),qt(n,$)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,a=n?e.naturalHeight:e.naturalWidth,o=n?e.naturalWidth:e.naturalHeight,r=a/o,c=t.width,s=t.height;t.height*r>t.width?3===i?c=t.height*r:s=t.width/r:3===i?s=t.width/r:c=t.height*r;var m={aspectRatio:r,naturalWidth:a,naturalHeight:o,width:c,height:s};this.canvasData=m,this.limited=1===i||2===i,this.limitCanvas(!0,!0),m.width=Math.min(Math.max(m.width,m.minWidth),m.maxWidth),m.height=Math.min(Math.max(m.height,m.minHeight),m.maxHeight),m.left=(t.width-m.width)/2,m.top=(t.height-m.height)/2,m.oldLeft=m.left,m.oldTop=m.top,this.initialCanvasData=dt({},m)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,r=i.viewMode,c=a.aspectRatio,s=this.cropped&&o;if(t){var m=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;r>1?(m=Math.max(m,n.width),l=Math.max(l,n.height),3===r&&(l*c>m?m=l*c:l=m/c)):r>0&&(m?m=Math.max(m,s?o.width:0):l?l=Math.max(l,s?o.height:0):s&&(m=o.width,(l=o.height)*c>m?m=l*c:l=m/c));var d=Et({aspectRatio:c,width:m,height:l});m=d.width,l=d.height,a.minWidth=m,a.minHeight=l,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(r>(s?0:1)){var p=n.width-a.width,u=n.height-a.height;a.minLeft=Math.min(0,p),a.minTop=Math.min(0,u),a.maxLeft=Math.max(0,p),a.maxTop=Math.max(0,u),s&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,2===r&&(a.width>=n.width&&(a.minLeft=Math.min(0,p),a.maxLeft=Math.max(0,p)),a.height>=n.height&&(a.minTop=Math.min(0,u),a.maxTop=Math.max(0,u))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var a=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var a=n%90*Math.PI/180,o=Math.sin(a),r=Math.cos(a),c=e*r+i*o,s=e*o+i*r;return n>90?{width:s,height:c}:{width:c,height:s}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=a.width,r=a.height,c=i.width*(o/i.naturalWidth),s=i.height*(r/i.naturalHeight);i.left-=(c-i.width)/2,i.top-=(s-i.height)/2,i.width=c,i.height=s,i.aspectRatio=o/r,i.naturalWidth=o,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,_t(this.canvas,dt({width:i.width,height:i.height},St({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);dt(i,{width:n,height:a,left:(e.width-n)/2,top:(e.height-a)/2}),_t(this.image,dt({width:i.width,height:i.height},St(dt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=dt({},a)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,r=this.limited,c=i.aspectRatio;if(t){var s=Number(i.minCropBoxWidth)||0,m=Number(i.minCropBoxHeight)||0,l=r?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,d=r?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;s=Math.min(s,n.width),m=Math.min(m,n.height),c&&(s&&m?m*c>s?m=s/c:s=m*c:s?m=s/c:m&&(s=m*c),d*c>l?d=l/c:l=d*c),o.minWidth=Math.min(s,l),o.minHeight=Math.min(m,d),o.maxWidth=l,o.maxHeight=d}e&&(r?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(n.width,a.left+a.width)-o.width,o.maxTop=Math.min(n.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&wt(this.face,N,i.width>=e.width&&i.height>=e.height?y:p),_t(this.cropBox,dt({width:i.width,height:i.height},St({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ot(this.element,V,this.getData())}},Mt={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=n,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,lt(r,(function(t){var i=document.createElement("img");wt(t,P,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=a,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){lt(this.previews,(function(t){var e=bt(t,P);_t(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(at(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(vt(e)))}(t,P)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,a=i.height,o=t.width,r=t.height,c=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(_t(this.viewBoxImage,dt({width:o,height:r},St(dt({translateX:-c,translateY:-s},t)))),lt(this.previews,(function(e){var i=bt(e,P),m=i.width,l=i.height,d=m,p=l,u=1;n&&(p=a*(u=m/n)),a&&p>l&&(d=n*(u=l/a),p=l),_t(e,{width:d,height:p}),_t(e.getElementsByTagName("img")[0],dt({width:o*u,height:r*u},St(dt({translateX:-c*u,translateY:-s*u},t))))})))}},Bt={bind:function(){var t=this.element,e=this.options,i=this.cropper;ct(e.cropstart)&&$t(t,T,e.cropstart),ct(e.cropmove)&&$t(t,Y,e.cropmove),ct(e.cropend)&&$t(t,I,e.cropend),ct(e.crop)&&$t(t,V,e.crop),ct(e.zoom)&&$t(t,Q,e.zoom),$t(i,B,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&$t(i,W,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&$t(i,M,this.onDblclick=this.dblclick.bind(this)),$t(t.ownerDocument,H,this.onCropMove=this.cropMove.bind(this)),$t(t.ownerDocument,L,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&$t(window,R,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;ct(e.cropstart)&&Jt(t,T,e.cropstart),ct(e.cropmove)&&Jt(t,Y,e.cropmove),ct(e.cropend)&&Jt(t,I,e.cropend),ct(e.crop)&&Jt(t,V,e.crop),ct(e.zoom)&&Jt(t,Q,e.zoom),Jt(i,B,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Jt(i,W,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Jt(i,M,this.onDblclick),Jt(t.ownerDocument,H,this.onCropMove),Jt(t.ownerDocument,L,this.onCropEnd),e.responsive&&Jt(window,R,this.onResize)}},Ht={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,a=this.containerData,o=n.offsetWidth/a.width;if(1!==o||n.offsetHeight!==a.height)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(lt(t,(function(e,i){t[i]=e*o}))),this.setCropBoxData(lt(e,(function(t,i){e[i]=t*o}))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===E||this.setDragMode((t=this.dragBox,e=k,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?A:S))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(et(e)&&1!==e||et(i)&&0!==i||t.ctrlKey))){var n,a=this.options,o=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){o[t.identifier]=At(t)})):o[t.pointerId||0]=At(t),n=Object.keys(o).length>1&&a.zoomable&&a.zoomOnTouch?_:bt(t.target,N),z.test(n)&&!1!==Ot(this.element,T,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===u&&(this.cropping=!0,ht(this.dragBox,D)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Ot(this.element,Y,{originalEvent:t,action:e})&&(t.changedTouches?lt(t.changedTouches,(function(t){dt(i[t.identifier]||{},At(t,!0))})):dt(i[t.pointerId||0]||{},At(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,ft(this.dragBox,D,this.cropped&&this.options.modal)),Ot(this.element,I,{originalEvent:t,action:e}))}}},Lt={change:function(t){var e,i=this.options,n=this.canvasData,o=this.containerData,r=this.cropBoxData,c=this.pointers,s=this.action,m=i.aspectRatio,l=r.left,d=r.top,k=r.width,J=r.height,O=l+k,C=d+J,D=0,j=0,N=o.width,P=o.height,S=!0;!m&&t.shiftKey&&(m=k&&J?k/J:1),this.limited&&(D=r.minLeft,j=r.minTop,N=D+Math.min(o.width,n.width,n.left+n.width),P=j+Math.min(o.height,n.height,n.top+n.height));var A=c[Object.keys(c)[0]],E={x:A.endX-A.startX,y:A.endY-A.startY},V=function(t){switch(t){case h:O+E.x>N&&(E.x=N-O);break;case q:l+E.x<D&&(E.x=D-l);break;case g:d+E.y<j&&(E.y=j-d);break;case f:C+E.y>P&&(E.y=P-C)}};switch(s){case p:l+=E.x,d+=E.y;break;case h:if(E.x>=0&&(O>=N||m&&(d<=j||C>=P))){S=!1;break}V(h),(k+=E.x)<0&&(s=q,l-=k=-k),m&&(J=k/m,d+=(r.height-J)/2);break;case g:if(E.y<=0&&(d<=j||m&&(l<=D||O>=N))){S=!1;break}V(g),J-=E.y,d+=E.y,J<0&&(s=f,d-=J=-J),m&&(k=J*m,l+=(r.width-k)/2);break;case q:if(E.x<=0&&(l<=D||m&&(d<=j||C>=P))){S=!1;break}V(q),k-=E.x,l+=E.x,k<0&&(s=h,l-=k=-k),m&&(J=k/m,d+=(r.height-J)/2);break;case f:if(E.y>=0&&(C>=P||m&&(l<=D||O>=N))){S=!1;break}V(f),(J+=E.y)<0&&(s=g,d-=J=-J),m&&(k=J*m,l+=(r.width-k)/2);break;case v:if(m){if(E.y<=0&&(d<=j||O>=N)){S=!1;break}V(g),J-=E.y,d+=E.y,k=J*m}else V(g),V(h),E.x>=0?O<N?k+=E.x:E.y<=0&&d<=j&&(S=!1):k+=E.x,E.y<=0?d>j&&(J-=E.y,d+=E.y):(J-=E.y,d+=E.y);k<0&&J<0?(s=x,d-=J=-J,l-=k=-k):k<0?(s=b,l-=k=-k):J<0&&(s=w,d-=J=-J);break;case b:if(m){if(E.y<=0&&(d<=j||l<=D)){S=!1;break}V(g),J-=E.y,d+=E.y,k=J*m,l+=r.width-k}else V(g),V(q),E.x<=0?l>D?(k-=E.x,l+=E.x):E.y<=0&&d<=j&&(S=!1):(k-=E.x,l+=E.x),E.y<=0?d>j&&(J-=E.y,d+=E.y):(J-=E.y,d+=E.y);k<0&&J<0?(s=w,d-=J=-J,l-=k=-k):k<0?(s=v,l-=k=-k):J<0&&(s=x,d-=J=-J);break;case x:if(m){if(E.x<=0&&(l<=D||C>=P)){S=!1;break}V(q),k-=E.x,l+=E.x,J=k/m}else V(f),V(q),E.x<=0?l>D?(k-=E.x,l+=E.x):E.y>=0&&C>=P&&(S=!1):(k-=E.x,l+=E.x),E.y>=0?C<P&&(J+=E.y):J+=E.y;k<0&&J<0?(s=v,d-=J=-J,l-=k=-k):k<0?(s=w,l-=k=-k):J<0&&(s=b,d-=J=-J);break;case w:if(m){if(E.x>=0&&(O>=N||C>=P)){S=!1;break}V(h),J=(k+=E.x)/m}else V(f),V(h),E.x>=0?O<N?k+=E.x:E.y>=0&&C>=P&&(S=!1):k+=E.x,E.y>=0?C<P&&(J+=E.y):J+=E.y;k<0&&J<0?(s=b,d-=J=-J,l-=k=-k):k<0?(s=x,l-=k=-k):J<0&&(s=v,d-=J=-J);break;case y:this.move(E.x,E.y),S=!1;break;case _:this.zoom(function(t){var e=a({},t),i=0;return lt(t,(function(t,n){delete e[n],lt(e,(function(e){var n=Math.abs(t.startX-e.startX),a=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),c=Math.sqrt(n*n+a*a),s=(Math.sqrt(o*o+r*r)-c)/c;Math.abs(s)>Math.abs(i)&&(i=s)}))})),i}(c),t),S=!1;break;case u:if(!E.x||!E.y){S=!1;break}e=Ct(this.cropper),l=A.startX-e.left,d=A.startY-e.top,k=r.minWidth,J=r.minHeight,E.x>0?s=E.y>0?w:v:E.x<0&&(l-=k,s=E.y>0?x:b),E.y<0&&(d-=J),this.cropped||(qt(this.cropBox,$),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}S&&(r.width=k,r.height=J,r.left=l,r.top=d,this.action=s,this.renderCropBox()),lt(c,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Ft={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ht(this.dragBox,D),qt(this.cropBox,$),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=dt({},this.initialImageData),this.canvasData=dt({},this.initialCanvasData),this.cropBoxData=dt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(dt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),qt(this.dragBox,D),ht(this.cropBox,$)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,lt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,qt(this.cropper,J)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ht(this.cropper,J)),this},destroy:function(){var t=this.element;return t[d]?(t[d]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,a=i.top;return this.moveTo(nt(t)?t:n+Number(t),nt(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(et(t)&&(i.left=t,n=!0),et(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,a=this.canvasData,o=a.width,r=a.height,c=a.naturalWidth,s=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var m=c*t,l=s*t;if(!1===Ot(this.element,Q,{ratio:t,oldRatio:o/c,originalEvent:i}))return this;if(i){var d=this.pointers,p=Ct(this.cropper),u=d&&Object.keys(d).length?function(t){var e=0,i=0,n=0;return lt(t,(function(t){var a=t.startX,o=t.startY;e+=a,i+=o,n+=1})),{pageX:e/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};a.left-=(m-o)*((u.pageX-p.left-a.left)/o),a.top-=(l-r)*((u.pageY-p.top-a.top)/r)}else rt(e)&&et(e.x)&&et(e.y)?(a.left-=(m-o)*((e.x-a.left)/o),a.top-=(l-r)*((e.y-a.top)/r)):(a.left-=(m-o)/2,a.top-=(l-r)/2);a.width=m,a.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return et(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,et(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(et(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(et(t)&&(i.scaleX=t,n=!0),et(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,a=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-a.left,y:o.top-a.top,width:o.width,height:o.height};var r=n.width/n.naturalWidth;if(lt(t,(function(e,i){t[i]=e/r})),e){var c=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=c-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&rt(t)){var o=!1;e.rotatable&&et(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),e.scalable&&(et(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),et(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;et(t.x)&&(a.left=t.x*r+n.left),et(t.y)&&(a.top=t.y*r+n.top),et(t.width)&&(a.width=t.width*r),et(t.height)&&(a.height=t.height*r),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?dt({},this.containerData):{}},getImageData:function(){return this.sized?dt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&lt(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&rt(t)&&(et(t.left)&&(e.left=t.left),et(t.top)&&(e.top=t.top),et(t.width)?(e.width=t.width,e.height=t.width/i):et(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&rt(t)&&(et(t.left)&&(n.left=t.left),et(t.top)&&(n.top=t.top),et(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),et(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),a&&(e?n.height=n.width/a:i&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var a=e.aspectRatio,r=e.naturalWidth,c=e.naturalHeight,s=e.rotate,m=void 0===s?0:s,l=e.scaleX,d=void 0===l?1:l,p=e.scaleY,u=void 0===p?1:p,y=i.aspectRatio,_=i.naturalWidth,h=i.naturalHeight,q=n.fillColor,f=void 0===q?"transparent":q,g=n.imageSmoothingEnabled,v=void 0===g||g,b=n.imageSmoothingQuality,w=void 0===b?"low":b,x=n.maxWidth,k=void 0===x?1/0:x,J=n.maxHeight,$=void 0===J?1/0:J,O=n.minWidth,C=void 0===O?0:O,D=n.minHeight,j=void 0===D?0:D,N=document.createElement("canvas"),P=N.getContext("2d"),S=Et({aspectRatio:y,width:k,height:$}),A=Et({aspectRatio:y,width:C,height:j},"cover"),E=Math.min(S.width,Math.max(A.width,_)),V=Math.min(S.height,Math.max(A.height,h)),I=Et({aspectRatio:a,width:k,height:$}),Y=Et({aspectRatio:a,width:C,height:j},"cover"),T=Math.min(I.width,Math.max(Y.width,r)),M=Math.min(I.height,Math.max(Y.height,c)),B=[-T/2,-M/2,T,M];return N.width=ut(E),N.height=ut(V),P.fillStyle=f,P.fillRect(0,0,E,V),P.save(),P.translate(E/2,V/2),P.rotate(m*Math.PI/180),P.scale(d,u),P.imageSmoothingEnabled=v,P.imageSmoothingQuality=w,P.drawImage.apply(P,[t].concat(o(B.map((function(t){return Math.floor(ut(t))}))))),P.restore(),N}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),a=n.x,r=n.y,c=n.width,s=n.height,m=i.width/Math.floor(e.naturalWidth);1!==m&&(a*=m,r*=m,c*=m,s*=m);var l=c/s,d=Et({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Et({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=Et({aspectRatio:l,width:t.width||(1!==m?i.width:c),height:t.height||(1!==m?i.height:s)}),y=u.width,_=u.height;y=Math.min(d.width,Math.max(p.width,y)),_=Math.min(d.height,Math.max(p.height,_));var h=document.createElement("canvas"),q=h.getContext("2d");h.width=ut(y),h.height=ut(_),q.fillStyle=t.fillColor||"transparent",q.fillRect(0,0,y,_);var f=t.imageSmoothingEnabled,g=void 0===f||f,v=t.imageSmoothingQuality;q.imageSmoothingEnabled=g,v&&(q.imageSmoothingQuality=v);var b,w,x,k,J,$,O=i.width,C=i.height,D=a,j=r;D<=-c||D>O?(D=0,b=0,x=0,J=0):D<=0?(x=-D,D=0,J=b=Math.min(O,c+D)):D<=O&&(x=0,J=b=Math.min(c,O-D)),b<=0||j<=-s||j>C?(j=0,w=0,k=0,$=0):j<=0?(k=-j,j=0,$=w=Math.min(C,s+j)):j<=C&&(k=0,$=w=Math.min(s,C-j));var N=[D,j,b,w];if(J>0&&$>0){var P=y/c;N.push(x*P,k*P,J*P,$*P)}return q.drawImage.apply(q,[i].concat(o(N.map((function(t){return Math.floor(ut(t))}))))),h},setAspectRatio:function(t){var e=this.options;return this.disabled||nt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===S,o=e.movable&&t===A;t=a||o?t:E,e.dragMode=t,wt(i,N,t),ft(i,k,a),ft(i,j,o),e.cropBoxMovable||(wt(n,N,t),ft(n,k,a),ft(n,j,o))}return this}},Rt=s.Cropper,Wt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!X.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=dt({},Z,rt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,n,a;return i=t,a=[{key:"noConflict",value:function(){return window.Cropper=Rt,t}},{key:"setDefaults",value:function(t){dt(Z,rt(t)&&t)}}],(n=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[d]){if(e[d]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(G.test(t))K.test(t)?this.read((a=t.replace(It,""),o=atob(a),r=new ArrayBuffer(o.length),lt(c=new Uint8Array(r),(function(t,e){c[e]=o.charCodeAt(e)})),r)):this.clone();else{var a,o,r,c,s=new XMLHttpRequest,m=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=m,s.onerror=m,s.ontimeout=m,s.onprogress=function(){s.getResponseHeader("content-type")!==U&&s.abort()},s.onload=function(){e.read(s.response)},s.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Nt(t)&&i.crossOrigin&&(t=Pt(t)),s.open("GET",t,!0),s.responseType="arraybuffer",s.withCredentials="use-credentials"===i.crossOrigin,s.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=Yt(t),a=0,o=1,r=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(Vt.apply(null,mt(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,U);var c=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);a=c.rotate,o=c.scaleX,r=c.scaleY}e.rotatable&&(i.rotate=a),e.scalable&&(i.scaleX=o,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&Nt(e)&&(i||(i="anonymous"),n=Pt(e)),this.crossOrigin=i,this.crossOriginUrl=n;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=n||e,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),ht(a,O),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=s.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(s.navigator.userAgent),n=function(e,i){dt(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=dt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var a=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){n(a.width,a.height),i||o.removeChild(a)},a.src=e.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,a=document.createElement("div");a.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=a.querySelector(".".concat(d,"-container")),r=o.querySelector(".".concat(d,"-canvas")),c=o.querySelector(".".concat(d,"-drag-box")),s=o.querySelector(".".concat(d,"-crop-box")),m=s.querySelector(".".concat(d,"-face"));this.container=n,this.cropper=o,this.canvas=r,this.dragBox=c,this.cropBox=s,this.viewBox=o.querySelector(".".concat(d,"-view-box")),this.face=m,r.appendChild(i),ht(t,$),n.insertBefore(o,t.nextSibling),this.isImg||qt(i,O),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,ht(s,$),e.guides||ht(s.getElementsByClassName("".concat(d,"-dashed")),$),e.center||ht(s.getElementsByClassName("".concat(d,"-center")),$),e.background&&ht(o,"".concat(d,"-bg")),e.highlight||ht(m,C),e.cropBoxMovable&&(ht(m,j),wt(m,N,p)),e.cropBoxResizable||(ht(s.getElementsByClassName("".concat(d,"-line")),$),ht(s.getElementsByClassName("".concat(d,"-point")),$)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),ct(e.ready)&&$t(t,F,e.ready,{once:!0}),Ot(t,F)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),qt(this.element,$))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&e(i.prototype,n),a&&e(i,a),t}();return dt(Wt.prototype,Tt,Mt,Bt,Ht,Lt,Ft),Wt})),function(t){"function"==typeof ymq_define&&ymq_define.amd?ymq_define(["jquery"],t):t(ymqJq)}((function(t){var e=function(e,i){this.options=i,this.ymqJqbody=t(document.body),this.ymqJqelement=t(e),this.ymqJqdialog=this.ymqJqelement.find(".ymq-modal-dialog"),this.ymqJqbackdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.ymqJqelement.find(".ymq-modal-content").load(this.options.remote,t.proxy((function(){this.ymqJqelement.trigger("loaded.bs.modal")}),this))};function i(i,n){return this.each((function(){var a=t(this),o=a.data("bs.modal"),r=t.extend({},e.DEFAULTS,a.data(),"object"==typeof i&&i);o||a.data("bs.modal",o=new e(this,r)),"string"==typeof i?o[i](n):r.show&&o.show(n)}))}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var n=this,a=t.Event("show.bs.modal",{relatedTarget:i});if(this.ymqJqelement.trigger(a),!this.ymqJqelement.attr("id").startsWith("ymq"))return!1;this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.ymqJqbody.addClass("ymq-modal-open"),this.escape(),this.resize(),this.ymqJqelement.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.ymqJqdialog.on("mousedown.dismiss.bs.modal",(function(){n.ymqJqelement.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(n.ymqJqelement)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var a=t.support.transition&&n.ymqJqelement.hasClass("ymq-modal-fade");n.ymqJqelement.parent().length||n.ymqJqelement.appendTo(n.ymqJqbody),n.ymqJqelement.show().scrollTop(0),n.adjustDialog(),a&&n.ymqJqelement[0].offsetWidth,n.ymqJqelement.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:i});a?n.ymqJqdialog.one("bsTransitionEnd",(function(){n.ymqJqelement.trigger("focus").trigger(o)})).emulateTransitionEnd(e.TRANSITION_DURATION):n.ymqJqelement.trigger("focus").trigger(o)})))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.ymqJqelement.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.ymqJqelement.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.ymqJqdialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.ymqJqelement.hasClass("ymq-modal-fade")?this.ymqJqelement.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.ymqJqelement[0]===t.target||this.ymqJqelement.has(t.target).length||this.ymqJqelement.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.ymqJqelement.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.ymqJqelement.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.ymqJqelement.hide(),this.backdrop((function(){t.ymqJqbody.removeClass("ymq-modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.ymqJqelement.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.ymqJqbackdrop&&this.ymqJqbackdrop.remove(),this.ymqJqbackdrop=null},e.prototype.backdrop=function(i){var n=this,a=this.ymqJqelement.hasClass("ymq-modal-fade")?"ymq-modal-fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&a;if(this.ymqJqbackdrop=t(document.createElement("div")).addClass("ymq-modal-backdrop "+a).appendTo(this.ymqJqbody),this.ymqJqelement.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.ymqJqelement[0].focus():this.hide())}),this)),o&&this.ymqJqbackdrop[0].offsetWidth,this.ymqJqbackdrop.addClass("in"),!i)return;o?this.ymqJqbackdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.ymqJqbackdrop){this.ymqJqbackdrop.removeClass("in");var r=function(){n.removeBackdrop(),i&&i()};t.support.transition&&this.ymqJqelement.hasClass("ymq-modal-fade")?this.ymqJqbackdrop.one("bsTransitionEnd",r).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):r()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var e=this.ymqJqelement[0].scrollHeight>document.documentElement.clientHeight;this.ymqJqelement.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""});var i=t(this.ymqJqelement[0]).find(".ymq-modal-dialog");if(1==i.data("ymq-modal-center")){var n=1;i.data("ymq-modal-position")>0&&(n=i.data("ymq-modal-position"));var a=(t(window).height()-i.height())/2*n;i.css({margin:a+"px auto"})}},e.prototype.resetAdjustments=function(){this.ymqJqelement.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.ymqJqbody.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.ymqJqbody.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.ymqJqbody.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="ymq-modal-scrollbar-measure",this.ymqJqbody.append(t);var e=t.offsetWidth-t.clientWidth;return this.ymqJqbody[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var n=t(this),a=n.attr("href"),o=t(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+ymqJq)/,"")),r=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},o.data(),n.data());n.is("a")&&e.preventDefault(),o.one("show.bs.modal",(function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),i.call(o,r,this)}))}));
;(function(window, factory) {
    //amd
    if (typeof ymq_define === 'function' && ymq_define.amd) {
        ymq_define(factory);
    } else if (typeof exports === 'object') { //umd
        module.exports = factory();
    } else {
        window.jeDate = factory();
    }
})(this, function() {
    var doc = document, win = window;
    var jet = {}, doc = document, regymdzz = "YYYY|MM|DD|hh|mm|ss|zz", gr = /\-/g,
        regymd = "YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""), parseInt = function (n) { return window.parseInt(n, 10);};
    var $Q = function (selector,content) {
        content = content || document;
        return selector.nodeType ? selector : content.querySelector(selector);
    };
    var jeDate = function(elem,options){
        var opts = typeof (options) === "function" ? options() : options;
        return new jeDatePick(elem,opts);
    };
    //
    jeDate.dateVer = "V6.5.0";
    //
    jeDate.extend = jet.extend = function () {
        var options, name, src, copy,deep = false, target = arguments[0], i = 1, length = arguments.length;
        if (typeof (target) === "boolean") deep = target, target = arguments[1] || {}, i = 2;
        if (typeof (target) !== "object" && typeof (target) !== "function") target = {};
        if (length === i) target = this, --i;
        for (; i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name], copy = options[name];
                    if (target === copy) continue;
                    if (copy !== undefined) target[name] = copy;
                }
            }
        }
        return target;
    };
    //
    jeDate.nowDate = function (val,format) {
        format = format || 'YYYY-MM-DD hh:mm:ss';
        if (!isNaN(val)) val = {DD: val};
        return jet.parse(jet.getDateTime(val),format);
    };
    //
    jeDate.convert = function (obj) {
        obj.format = obj.format || 'YYYY-MM-DD hh:mm:ss';
        obj.addval = obj.addval || [];
        var mats = jet.reMatch(obj.format),objVal = {};
        jet.each(jet.reMatch(obj.val),function (i,cval) {
            objVal[mats[i]] = parseInt(cval);
        });
        var result = new DateTime(obj.addval,objVal), redate = {
            YYYY:result.GetYear(), MM:result.GetMonth(), DD:result.GetDate(),
            hh:result.GetHours(), mm:result.GetMinutes(), ss:result.GetSeconds()
        };
        return redate;
    };
    jeDate.valText = function (elem,value) {
        return jet.valText(elem,value);
    };
    //
    jeDate.timeStampDate = function (date,format) {
        format = format || 'YYYY-MM-DD hh:mm:ss';
        var dateTest = (/^(-)?\d{1,10}$/.test(date) || /^(-)?\d{1,13}$/.test(date));
        if(/^[1-9]*[1-9][0-9]*$/.test(date) && dateTest){
            var vdate = parseInt(date);
            if (/^(-)?\d{1,10}$/.test(vdate)) {
                vdate = vdate * 1000;
            } else if (/^(-)?\d{1,13}$/.test(vdate)) {
                vdate = vdate * 1000;
            } else if (/^(-)?\d{1,14}$/.test(vdate)) {
                vdate = vdate * 100;
            } else {
                console.log("Timestamp format is incorrect");
                return;
            }
            var setdate = new Date(vdate);
            return jet.parse({
                YYYY:setdate.getFullYear(), MM:jet.digit(setdate.getMonth()+1), DD:jet.digit(setdate.getDate()) ,
                hh:jet.digit(setdate.getHours()), mm:jet.digit(setdate.getMinutes()), ss:jet.digit(setdate.getSeconds())
            }, format);
        }else {
            //
            var arrs = jet.reMatch(date),
                newdate = new Date(arrs[0],arrs[1]-1,arrs[2],arrs[3]||0,arrs[4]||0,arrs[5]||0),
                timeStr = Math.round(newdate.getTime() / 1000);
            return timeStr;
        }
    };
    //
    jeDate.getLunar = function(obj){
        //
        var lunars = jeLunar(obj.YYYY, parseInt(obj.MM) - 1, obj.DD);
        return{
            nM: lunars.lnongMonth,              //
            nD: lunars.lnongDate,               //
            cY: parseInt(lunars.solarYear),     //
            cM: parseInt(lunars.solarMonth),    //
            cD: parseInt(lunars.solarDate),     //
            cW: lunars.inWeekDays,              //
            nW: lunars.solarWeekDay             //
        };
    };
    //
    jeDate.parse = jet.parse = function(ymdhms, format) {
        return format.replace(new RegExp(regymdzz,"g"), function(str, index) {
            return str == "zz" ? "00":jet.digit(ymdhms[str]);
        });
    };
    //
    function DateTime(arr,valObj) {
        var that = this,newdate = new Date(), narr = ["FullYear","Month","Date","Hours","Minutes","Seconds"];
        var vb = jet.extend({YYYY:null,MM:null,DD:null,hh:newdate.getHours(),mm:newdate.getMinutes(),ss:newdate.getSeconds()},valObj);
        var ND = valObj == undefined ? newdate : new Date(vb.YYYY,vb.MM,vb.DD,vb.hh,vb.mm,vb.ss);
        if((arr||[]).length>0) jet.each(arr,function (i,par) {
            ND["set"+narr[i]](narr[i] == "Month" ? parseInt(par)-1:parseInt(par));
        });
        //DateTime
        that.reDate = function () {
            return new DateTime();
        };
        //Date
        that.GetValue = function () {
            return ND;
        };
        //
        that.GetYear = function () {
            return ND.getFullYear();
        };
        //
        that.GetMonth = function () {
            return ND.getMonth() + 1;
        };
        //
        that.GetDate = function () {
            return ND.getDate();
        };
        //
        that.GetHours = function () {
            return ND.getHours();
        };
        //
        that.GetMinutes = function () {
            return ND.getMinutes();
        };
        //
        that.GetSeconds = function () {
            return ND.getSeconds();
        };
    };

    jet.extend(jet,{
        isType : function (obj,type) {
            var firstUper = function (str) {
                str = str.toLowerCase();
                return str.replace(/\b(\w)|\s(\w)/g, function (m) {
                    return m.toUpperCase();
                });
            };
            return Object.prototype.toString.call(obj) == "[object " + firstUper(type) + "]";
        },
        each : function (obj, callback, args) {
            var name, i = 0, length = obj.length, iselem = (length === undefined || obj === "function");
            if (iselem) {
                for (name in obj) { if (callback.call(obj[name], name, obj[name]) === false) { break } }
            } else {
                for (; i < length;) { if (callback.call(obj[i], i, obj[i++]) === false) { break } }
            }
            return obj;
        },
        on : function (elm, type, fn) {
            if (elm.addEventListener) {
                elm.addEventListener(type, fn, false);//DOM2.0
                return true;
            }else if (elm.attachEvent) {
                return elm.attachEvent("on" + type, fn);//IE5+
            }else {
                elm["on" + type] = fn;//DOM 0
            }
        },
        isObj : function (obj){
            for(var i in obj){return true;}
            return false;
        },
        trim : function (str){ return str.replace(/(^\s*)|(\s*$)/g, ""); },
        reMatch : function (str) {
            var smarr = [],maStr = "", parti = /(^\w{4}|\w{2}\B)/g;
            if(jet.isNum(str)){
                maStr =  str.replace(parti,"$1-");
            }else{
                maStr = /^[A-Za-z]+$/.test(str) ? str.replace(parti,"$1-") : str;
            }
            jet.each(maStr.match(/\w+|d+/g),function (i,val) {
                smarr.push(jet.isNum(val) ? parseInt(val):val);
            });
            return smarr;
        },
        equals : function (arrA,arrB) {
            if (!arrB) return false;
            if (arrA.length != arrB.length) return false;
            for (var i = 0, l = arrA.length; i < l; i++) {
                if (arrA[i] instanceof Array && arrB[i] instanceof Array) {
                    if (!arrA[i].equals(arrB[i])) return false;
                } else if (arrA[i] != arrB[i]) {
                    return false;
                }
            }
            return true;
        },
        docScroll : function(type) {
            type = type ? "scrollLeft" :"scrollTop";
            return document.body[type] | document.documentElement[type];
        },
        docArea : function(type) {
            return document.documentElement[type ? "clientWidth" :"clientHeight"];
        },
        //
        digit : function(num) {
            return num < 10 ? "0" + (num | 0) :num;
        },
        //
        isNum : function(value){
            return /^[+-]?\d*\.?\d*$/.test(value) ? true : false;
        },
        //
        getDaysNum : function(y, m) {
            var num = 31,isLeap = (y % 100 !== 0 && y % 4 === 0) || (y % 400 === 0);
            switch (parseInt(m)) {
                case 2: num = isLeap ? 29 : 28; break;
                case 4: case 6: case 9: case 11: num = 30; break;
            }
            return num;
        },
        //
        getYM : function(y, m, n) {
            var nd = new Date(y, m - 1);
            nd.setMonth(m - 1 + n);
            return {
                y: nd.getFullYear(),
                m: nd.getMonth() + 1
            };
        },
        //
        prevMonth : function(y, m, n) {
            return jet.getYM(y, m, 0 - (n || 1));
        },
        //
        nextMonth : function(y, m, n) {
            return jet.getYM(y, m, n || 1);
        },
        setCss:function(elem,obj) {
            for (var x in obj) elem.style[x] = obj[x];
        },
        html : function (elem,html) {
            return typeof html === "undefined" ? elem && elem.nodeType === 1 ? elem.innerHTML :undefined :typeof html !== "undefined" && html == true ? elem && elem.nodeType === 1 ? elem.outerHTML :undefined : elem.innerHTML = html;

        },
        // 
        text : function(elem,value) {
            var innText = document.all ? "innerText" :"textContent";
            return typeof value === "undefined" ? elem && elem.nodeType === 1 ? elem[innText] :undefined : elem[innText] = value;
        },
        //
        val : function (elem,value) {
            if (typeof value === "undefined") {
                return elem && elem.nodeType === 1 && typeof elem.value !== "undefined" ? elem.value :undefined;
            }
            // valuestring
            value = value == null ? "" :value + "";
            elem.value = value;
        },
        attr : function(elem,value){
            return elem.getAttribute(value);
        },
        hasClass : function (obj, cls) {
            return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
        },
        stopPropagation : function (ev) {
            (ev && ev.stopPropagation) ? ev.stopPropagation() : window.event.cancelBubble = true;
        },
        template : function (str, data) {
            var strCell = !/[^\w\-\.:]/.test(str) ? document.getElementById(str).innerHTML : str;
            var keys = function (obj){
                var arr = [];
                for(arr[arr.length] in obj);
                return arr ;
            }, dataVar = function (obj) {
                var vars = '';
                for (var key in obj) {
                    vars += 'var ' + key + '= $D["' + key + '"];';
                }
                return vars;
            }, compile = function (source,data) {
                var code = "var $out='" + source.replace(/[\r\n]/g, '').replace(/^(.+?)\{\%|\%\}(.+?)\{\%|\%\}(.+?)$/g, function (val) {
                        return val.replace(/(['"])/g, '\\\$1');
                    }).replace(/\{\%\s*=\s*(.+?)\%\}/g, "';$out+=$1;$out+='").replace(/\{\%(.+?)\%\}/g, "';$1;$out+='") + "';return new String($out);";
                var vars = dataVar(data), Render = new Function('$D',vars + code);
                return new Render(data) + '';
            };
            return compile(strCell,data);
        },

        //
        isValDiv : function(elem) {
            return /textarea|input/.test(elem.tagName.toLocaleLowerCase());
        },
        valText : function (elem,value) {
            var cell = $Q(elem) ,type = jet.isValDiv(cell) ? "val" : "text";
            if(value != undefined){
                jet[type](cell,value);
            }else{
                return jet[type](cell);
            }
        },
        isBool : function(obj){  return (obj == undefined || obj == true ?  true : false); },
        //
        getDateTime : function (obj) {
            var result = new DateTime(), objVal = jet.extend({YYYY:null,MM:null,DD:null,hh:0,mm:0,ss:0},obj),
                matArr = {YYYY:"FullYear",MM:"Month",DD:"Date",hh:"Hours",mm:"Minutes",ss:"Seconds"};
            jet.each(["ss","mm","hh","DD","MM","YYYY"],function (i,mat) {
                if (!jet.isNum(parseInt(objVal[mat]))) return null;
                var reVal = result.GetValue();
                if (parseInt(objVal[mat]) || parseInt(objVal[mat]) == 0){
                    reVal["set"+matArr[mat]](result["Get"+matArr[mat]]() + (mat == "MM" ? -1 : 0) + parseInt(objVal[mat]));
                }
            });
            //
            var redate = {
                YYYY:result.GetYear(), MM:result.GetMonth(), DD:result.GetDate(),
                hh:result.GetHours(), mm:result.GetMinutes(), ss:result.GetSeconds()
            };
            return redate;
        }
    });

    function jeDatePick(elem, options){
        var config = {
            language:{
                name   : "cn",
                month  : ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"],
                weeks  : [ "", "", "", "", "", "", "" ],
                times  : ["","",""],
                timetxt: ["","",""],
                backtxt:"",
                clear  : "",
                today  : "",
                yes    : ""
            },
            format:"YYYY-MM-DD hh:mm:ss",               //
            minDate:"1900-01-01 00:00:00",              //
            maxDate:"2099-12-31 23:59:59",              //
            isShow:true,                                //false
            multiPane:true,                             //false
            onClose:true,                               //false
            range:false,                                //false "  "" ~ "" To "
            trigger:"click",                            //
            position:[],                                //0
            valiDate:[],                                // ["0[4-7]$,1[1-5]$,2[58]$",true]
            isinitVal:false,                            //
            initDate:{},                                //   
            isTime:true,                                //
            isClear:true,                               //
            isToday:true,                               //
            isYes:true,                                 //
            festival:false,                             //
            fixed:true,                                 //truefalse
            zIndex:2099,                                //
            method:{},                                 //
            theme:{},                                   //
            shortcut:[],                                //
            donefun:null,                                //
            before:null,                                //
            succeed:null                                //
        };
        this.$opts = jet.extend(config,options||{});
        this.valCell = $Q(elem);
        this.format = this.$opts.format;
        this.valCell != null ? this.init() : console.log(elem+"  ID\u6216\u7C7B\u540D\u4E0D\u5B58\u5728!");
        jet.extend(this,this.$opts.method);
        delete this.$opts.method;
    }
    var searandom = function (){
        var str = "",arr = [1,2,3,4,5,6,7,8,9,0];
        for(var i=0; i<8; i++) str += arr[Math.round(Math.random() * (arr.length-1))];
        return str;
    };

    var jefix = "jefixed",ymdzArr = jet.reMatch(regymdzz),elx = "#jedate";
    jet.extend(jeDatePick.prototype,{
        init : function () {
            var that = this, opts = that.$opts, newDate = new Date(), shortArr = [],
                trigges = opts.trigger,ndate = opts.initDate || [], inVal, range = opts.range,
                zIndex = opts.zIndex == undefined ? 10000 : opts.zIndex,isShow = jet.isBool(opts.isShow),
                isinitVal = (opts.isinitVal == undefined || opts.isinitVal == false) ? false : true;
            that.setDatas();
            opts.before && opts.before(that.valCell);
            //
            if (isinitVal && trigges && isShow) {
                if (ndate[1]){
                    var addval = jet.getDateTime(ndate[0]);
                    inVal = [{
                        YYYY:addval.YYYY, MM:jet.digit(addval.MM), DD:jet.digit(addval.DD) ,
                        hh:jet.digit(addval.hh), mm:jet.digit(addval.mm), ss:jet.digit(addval.ss)
                    }];
                }else {
                    inVal = that.getValue(jet.isObj(ndate[0]) ? ndate[0] : {});
                }
                if(!range) that.setValue([inVal[0]],opts.format,true);
            }

            var getCurrValue = function () {
                var mats = jet.reMatch(that.format), isEmpty = that.getValue() != "",curVal = [],
                    parmat = that.dlen == 7 ? "hh:mm:ss" : "YYYY-MM"+ (that.dlen <= 2 ? "":"-DD");
                that.selectValue = [jet.parse(jet.getDateTime({}), parmat)];
                //bug
                if (that.valCell.value != '' && that.valCell.value != undefined) {
                    var ymq_result = that.valCell.value.substr(0,10);
                    that.selectValue[0] = ymq_result;
                }
                //bug
                if(isEmpty && isShow){
                    var getVal = that.getValue().split(range);
                    jet.each(new Array(range ? 2 : 1),function (a) {
                        curVal[a] = {};
                        jet.each(jet.reMatch(getVal[a]),function (i,val) {
                            curVal[a][mats[i]] = parseInt(val);
                        });
                    });
                    if(range) that.selectValue = getVal;
                }else{
                    var parr = that.getValue({})[0], nmVal = jet.nextMonth(parr.YYYY,parr.MM||jet.getDateTime({}).MM),
                        narr = (that.dlen>2 && that.dlen <=6) ? {YYYY:nmVal.y,MM:nmVal.m} : {};
                    curVal = [parr];
                }
                that.selectDate = curVal;
                return curVal;
            },ymarr = [];
            that.minDate = ""; that.maxDate = "";
            if(!isShow || !trigges) ymarr = getCurrValue();
            if(!isShow || !trigges){
                that.minDate = jet.isType(opts.minDate,"function") ? opts.minDate(that) : opts.minDate;
                that.maxDate = jet.isType(opts.maxDate,"function") ? opts.maxDate(that) : opts.maxDate;
                that.storeData(ymarr[0],ymarr[1]);
                that.renderDate();
                opts.succeed && opts.succeed(that.dateCell);
            }else{
                if (trigges) {
                    jet.on(that.valCell,trigges,function(){
                        if (document.querySelectorAll(elx).length > 0) return;
                        var gvarr = getCurrValue();
                        that.minDate = jet.isType(opts.minDate,"function") ? opts.minDate(that) : opts.minDate;
                        that.maxDate = jet.isType(opts.maxDate,"function") ? opts.maxDate(that) : opts.maxDate;
                        that.storeData(gvarr[0],gvarr[1]);
                        that.renderDate();
                    });
                }
            }
        },
        setDatas : function(){
            var that = this, opts = that.$opts,range = opts.range,shortArr = [],isShow = jet.isBool(opts.isShow),multi = opts.multiPane;
            that.$data = jet.extend({year:false,month:false,day:true,time:false,timebtn:false},{
                shortcut:[],lang:opts.language,yaerlist:[],monthlist:[[],[]],ymlist:[[],[]], daylist:[[],[]],
                clear:opts.isClear,today:range ? false:opts.isToday,yes:opts.isYes,pane:multi ? 1:2
            });
            if(opts.shortcut.length>0){
                jet.each(opts.shortcut,function (i,short) {
                    var tarr = [], shval = jet.isType(short.val,"function") ? short.val() : short.val;
                    if(jet.isType(shval,"object")){
                        for (var s in shval) tarr.push(s + ':' + shval[s]);
                        shortArr.push(jet.extend({},{name:short.name,val:"{" + tarr.join('#') + "}"}));
                    }
                });
                that.$data.shortcut = shortArr;
            }
            that.dlen = (function () {
                var mats = jet.reMatch(that.format),marr = [];
                jet.each(ymdzArr,function(i,val){
                    jet.each(mats,function(m,mval){
                        if(val == mval) marr.push(mval);
                    });
                });
                var matlen = marr.length, lens = (marr[0] == "hh")&&matlen<=3 ? 7 : matlen;
                return lens;
            })();
            that.$data.dlen = that.dlen;
            that.timeInspect = false;
            if(that.dlen == 1){
                jet.extend(that.$data,{year:true,day:false});
            }else if(that.dlen == 2){
                jet.extend(that.$data,{month:true,day:false});
            }else if(that.dlen>3 && that.dlen <=6){
                that.$data.timebtn = true;
            }else if(that.dlen == 7){
                jet.extend(that.$data,{day:false,time:true});
            }
            if(!isShow){
                that.$data.clear = false;
                that.$data.yes = false;
            }
        },
        renderDate : function () {
            var that= this, opts = that.$opts,isShow = jet.isBool(opts.isShow),
                elxID = !isShow ? elx+searandom() : elx, setzin = {"zIndex":  (opts.zIndex == undefined ? 10000 : opts.zIndex)};
            if(that.dateCell == undefined){
                that.dateCell = document.createElement("div");
                that.dateCell.id = elxID.replace(/\#/g,"");
                that.dateCell.className = elx.replace(/\#/g,"")+" "+(opts.shortcut.length>0?" leftmenu":"");
                that.dateCell.setAttribute("author","chen guojun");
            }
            jet.html(that.dateCell,jet.template(that.dateTemplate(),that.$data));
            //
            if(jet.isObj(opts.theme)){
                var styleDiv = document.createElement("style"),stCell = ".jedate"+searandom(), t = opts.theme,
                    BG = "background-color:"+t.bgcolor, WC = "color:"+(t.color == undefined ? "#FFFFFF":t.color),
                    OTH = (t.pnColor == undefined ? "":"color:"+t.pnColor+";");
                that.dateCell.className = that.dateCell.className+" "+stCell.replace(/^./g,""); styleDiv.setAttribute("type","text/css");
                styleDiv.innerHTML = stCell+" .jedate-menu p:hover{"+BG+";"+WC+";}"+stCell+" .jedate-header em{"+WC+";}"+
                stCell+" .jedate-content .yeartable td.action span,"+stCell+" .jedate-content .monthtable td.action span,"+
                stCell+" .jedate-content .yeartable td.action span:hover,"+stCell+" .jedate-content .monthtable td.action span:hover{"+BG+";border:1px "+t.bgcolor+" solid;"+WC+";}"+stCell+" .jedate-content .daystable td.action,"+stCell+" .jedate-content .daystable td.action:hover,"+
                stCell+" .jedate-content .daystable td.action .lunar,"+stCell+" .jedate-header,"+stCell+" .jedate-time .timeheader,"+
                stCell+" .jedate-time .hmslist ul li.action,"+stCell+" .jedate-time .hmslist ul li.action:hover,"+
                stCell+" .jedate-time .hmslist ul li.disabled.action,"+stCell+" .jedate-footbtn .timecon,"+stCell+" .jedate-footbtn .btnscon span{"+BG+";"+WC+";}"+
                stCell+" .jedate-content .daystable td.other,"+stCell+" .jedate-content .daystable td.other .nolunar,"+stCell+" .jedate-content .daystable td.other .lunar{"+OTH+"}"+stCell+" .jedate-content .daystable td.contain,"+stCell+" .jedate-content .daystable td.contain:hover{background-"+OTH+"}";
                that.dateCell.appendChild(styleDiv);
            }

            that.compileBindNode(that.dateCell);
            if (document.querySelectorAll(elxID).length > 0) document.body.removeChild($Q(elxID));
            !isShow ? that.valCell.appendChild(that.dateCell) : document.body.appendChild(that.dateCell);
            jet.setCss(that.dateCell,jet.extend({position:(!isShow ? "relative" : (opts.fixed == true ? "absolute" :"fixed"))},isShow ? setzin:{}));
            that.methodEventBind();
            if(that.dlen == 7 || (that.dlen>3 && that.dlen <=6)) that.locateScroll();
            if(opts.festival && opts.language.name == "cn") that.showFestival();
            if(isShow){
                that.dateOrien(that.dateCell,that.valCell);
                that.blankArea();
            }

        },
        //
        setValue : function (fnStr,matStr,bool) {
            var that = this, valCell = that.valCell,strVal;
            matStr = matStr || that.format;
            if((typeof fnStr=='string')&&fnStr!=''){
                var sprange = fnStr.split(that.$opts.range), inArr=[];
                jet.each(sprange,function (i,sval) {
                    var reVal = jet.reMatch(sval), inObj={};
                    jet.each(jet.reMatch(matStr),function (r,val) {
                        inObj[val] = reVal[r];
                    });
                    inArr.push(inObj);
                });
                strVal = inArr;
            }else {
                strVal = fnStr;
            }
            var vals = that.parseValue(strVal,matStr);
            if (bool != false) jet.valText(valCell,vals);
            return vals;
        },
        //
        getValue : function (valobj) {
            var that = this, valCell = that.valCell,
                opts = that.$opts, reObj, result = new DateTime().reDate(),
                dateY = result.GetYear(),dateM = result.GetMonth(),dateD = result.GetDate(),
                timeh = result.GetHours(),timem = result.GetMinutes(),times = result.GetSeconds();
            if (valobj == undefined && jet.isBool(opts.isShow)){
                reObj = jet.valText(valCell);
            }else {
                var isValShow = jet.isBool(opts.isShow) ? (jet.valText(valCell) == "") : !jet.isBool(opts.isShow),
                    objarr = jet.extend({YYYY:null,MM:null,DD:null},valobj||{}),
                    ranMat = [],newArr = new Array(2),unObj = function (obj) {
                        return [(objarr[obj] == undefined || objarr[obj] == null),objarr[obj]];
                    }, defObj = [{ YYYY:dateY,MM:dateM,DD:dateD, hh:timeh,mm:timem,ss:times,zz:00},
                        { YYYY:dateY,MM:dateM,DD:dateD, hh:timeh,mm:timem,ss:times,zz:00}];
                if (isValShow) {
                    //
                    jet.each(newArr,function (i) {
                        var inObj = {};
                        jet.each(ymdzArr, function (r, val) {
                            inObj[val] = parseInt(unObj(val)[0] ? defObj[i][val] : unObj(val)[1]);
                        });
                        ranMat.push(jet.extend(defObj[i], inObj));
                    });
                } else {
                    var isunRange = opts.range != false, initVal = that.getValue(),
                        spVal = initVal.split(opts.range), reMat = jet.reMatch(that.format);
                    jet.each(newArr,function (i) {
                        var inObj = {}, reVal = isunRange ? jet.reMatch(spVal[i]) : jet.reMatch(initVal);
                        jet.each(reMat,function (r,val) {
                            inObj[val] = reVal[r];
                        });
                        var exVal = jet.extend(inObj,valobj||{});
                        ranMat.push(jet.extend(defObj[i],exVal));
                    });
                }
                reObj = ranMat;
            }
            return reObj;
        },
        storeData:function (curr,next) {
            next = next || {};
            var that = this, opts = that.$opts,multi = opts.multiPane,valCell = that.valCell,
                days = new Date().getDate(), DTS = that.$data,isnext = jet.isObj(next),
                RES = {yearlist:[],monthlist:[[],[]],daylist:[],daytit:[],timelist:[]},seltime,
                cday = curr.DD == null ? days : curr.DD, nday = next.DD == null ? days : next.DD,
                timeA = {hh:curr.hh,mm:curr.mm,ss:curr.ss}, timeB = {hh:next.hh||0,mm:next.mm||0,ss:next.ss||0};
            //
            RES.yearlist.push(that.eachYear(parseInt(curr.YYYY),1));
            if(multi == false){
                var yearNext = isnext ? next.YYYY : curr.YYYY;
                RES.yearlist.push(that.eachYear(parseInt(yearNext),2));
            }
            //
            RES.monthlist[0] = that.eachMonth(curr.YYYY,0);
            if(multi == false){
                var monthNext = isnext ? next.YYYY : curr.YYYY+1;
                RES.monthlist[1] = that.eachMonth(curr.YYYY+1,1);
            }
            //
            RES.daylist.push(that.eachDays(curr.YYYY,curr.MM,cday,0));
            RES.daytit.push({YYYY:curr.YYYY,MM:curr.MM});
            if(multi == false){
                var dayNext = jet.nextMonth(curr.YYYY,curr.MM);
                RES.daylist.push(that.eachDays(dayNext.y,dayNext.m,nday,1));
                RES.daytit.push({YYYY:dayNext.y,MM:dayNext.m});
            }
            //
            that.selectTime = [timeA,timeB];
            RES.timelist.push(that.eachTime(timeA,1));
            if(multi == false){
                seltime = that.dlen == 7 && opts.range && !isnext ? timeA : timeB;
                if(that.dlen == 7 && opts.range && jet.valText(valCell) == ""){
                    that.selectTime[1] = jet.extend(timeB,timeA);
                }
                RES.timelist.push(that.eachTime(seltime,2));
            }
            //
            jet.extend(that.$data,RES);
        },
        dateTemplate : function() {
            var that = this, opts = that.$opts, multi = opts.multiPane,YMDStr = "",hmsStr = "",lang = opts.language,
                ytxt = lang.name == "cn" ? "":"", mtxt = lang.name == "cn" ? "":"";
            var ymvals = multi ? '{%=ymlist[0].YYYY%}-{%=ymlist[0].MM%}':'{%=ymlist[0].YYYY%}-{%=ymlist[0].MM%}#{%=ymlist[ynidx].YYYY%}-{%=ymlist[ynidx].MM%}';
            var aowArr = (function () {
                var butArr = [], ismu = multi ? "11":"23";
                if(that.dlen == 1){
                    butArr = ['{%=yearlist[i][0].y-'+ismu+'%}','{%=yearlist[i][yearlist[i].length-1].y%}'];
                }else if(that.dlen == 2){
                    butArr = multi ? ['{%=yearlist[0][0].y-1%}','{%=yearlist[0][0].y+1%}']:['{%=yearlist[i][0].y-'+ismu+'%}','{%=yearlist[i][yearlist[i].length-1].y%}'];
                }else if(that.dlen>2 && that.dlen <=6){
                    butArr = ['{%=yearlist[0][0].y-1%}','{%=yearlist[0][0].y+1%}'];
                }
                return butArr;
            })();
            var lyPrev = '<em class="yearprev yprev jedatefont" @on="yearBtn(lprev,'+aowArr[0]+')"></em>',
                lyNext = '<em class="yearnext ynext jedatefont" on="yearBtn(lnext,'+aowArr[2]+')"></em>',
                ryPrev = '<em class="yearprev yprev jedatefont" on="yearBtn(rprev,'+aowArr[3]+')"></em>',
                ryNext = '<em class="yearnext ynext jedatefont" @on="yearBtn(rnext,'+aowArr[1]+')"></em>',
                mPrev = '{% if(dlen>2){ %}<em class="monthprev mprev jedatefont" @on="monthBtn(mprev,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})"></em>{% } %}',
                mNext = '{% if(dlen>2){ %}<em class="monthnext mnext jedatefont" @on="monthBtn(mnext,{%=daytit[i].YYYY%}-{%=daytit[i].MM%})"></em>{% } %}';
            //
            var yaerHtml = '<table class="yeartable year{%= i==0 ? "left":"right"%}" style="display:{%=year ? "block":"none"%};"><tbody><tr>'+
            '{% for(var y=0;y<=11;y++){ %}<td class="{%=yearlist[i][y].style%}" @on="yearClick({%=yearlist[i][y].y%})"><span>{%=yearlist[i][y].y%}'+ytxt+'</span></td>{% if((y+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>';
            //
            var monthHtml = '<table class="monthtable month{%= i==0 ? "left":"right"%}" style="display:{%=month ? "block":"none"%};"><tbody><tr>'+
            '{% for(var m=0;m<=11;m++){ %}<td class="{%=monthlist[i][m].style%}" ym="{%=monthlist[i][m].y%}-{%=monthlist[i][m].m%}" @on="monthClick({%=monthlist[i][m].y%}-{%=monthlist[i][m].m%})"><span>{%=monthlist[i][m].m%}'+mtxt+'</span></td>{% if((m+1)%3==0){ %} </tr>{% } %} {% } %} </tbody></table>';
            //
            var daysHtml = '<table class="daystable days{%= i==0 ? "left":"right"%}" style="display:{%=day ? "block":"none"%};"><thead><tr>'+
            '{% for(var w=0;w<lang.weeks.length;w++){ %} <th>{%=lang.weeks[w]%}</th> {% } %}</tr></thead><tbody>'+
            '<tr>{% for(var d=0;d<=41;d++){ %}<td class="{%=daylist[i][d].style%}" ymd="{%=daylist[i][d].ymd%}" @on="daysClick({%=daylist[i][d].ymd%})">{%=daylist[i][d].day%}</td>{% if((d+1)%7==0){ %} </tr>{% } %} {% } %} </tbody></table>';
            //
            var hmsHtml = '<div class="jedate-time">{% for(var h=0;h<timelist.length;h++){ %}<div class="timepane"><div class="timeheader">{%= timelist.length == 1 ? lang.timetxt[0]:lang.timetxt[h+1]%}</div><div class="timecontent">'+
            '<div class="hmstitle"><p>{%=lang.times[0]%}</p><p>{%=lang.times[1]%}</p><p>{%=lang.times[2]%}</p></div>'+
            '<div class="hmslist">{% for(var t=0;t<3;t++){ %}<div class="hmsauto"><ul>{% for(var s=0;s<timelist[h][t].length;s++){ %}<li class="{%=timelist[h][t][s].style%}" @on="hmsClick({%= h %},{%= h>0?3+t:t %})">{%= timelist[h][t][s].hms < 10 ? "0" + timelist[h][t][s].hms :timelist[h][t][s].hms %}</li>{% } %}</ul></div>{% } %}</div></div>'+'</div>{% } %}</div>';
            //
            var shortHtml = opts.shortcut.length > 0 ? "{% for(var s=0;s<shortcut.length;s++){ %}<p @on=shortClick({%= shortcut[s].val %})>{%=shortcut[s].name%}</p>{% } %}":'';

            var ymtitHtml = (function () {
                var ymtitStr = "";
                if(that.dlen == 1){
                    ymtitStr = '<span class="ymbtn">{%=yearlist[i][0].y%}'+ytxt+' ~ {%=yearlist[i][yearlist[i].length-1].y%}'+ytxt+'</span>';
                }else if(that.dlen == 2){
                    ymtitStr = '<span class="ymbtn" @on="yearShow({%=yearlist[0][i].y%})">{%=yearlist[0][i].y%}'+ytxt+'</span>';
                }else if(that.dlen>2 && that.dlen <=6){
                    ymtitStr = '<span class="ymbtn" @on="monthShow({%=daytit[i].MM%})">{%=daytit[i].MM%}'+mtxt+'</span>'+
                    '<span class="ymbtn" @on="yearShow({%=daytit[i].YYYY%})">{%=daytit[i].YYYY%}'+ytxt+'</span>';
                }
                return ymtitStr;
            })();

            var ymButton = (function () {
                var titStrBut = "";
                if(that.dlen==1){
                    titStrBut = multi ? [lyPrev+ryNext]:[lyPrev,ryNext];
                }else if(that.dlen==2){
                    titStrBut = multi ? [lyPrev+ryNext] : [lyPrev,ryNext];
                }else if(that.dlen>2 && that.dlen <=6){
                    titStrBut = multi ? [lyPrev+mPrev+mNext+ryNext] : [lyPrev+mPrev,mNext+ryNext];
                }else if(that.dlen==7){
                    titStrBut = "";
                }
                return titStrBut;
            })();

            if(that.dlen == 1){
                YMDStr = yaerHtml;
            }else if(that.dlen == 2){
                YMDStr = yaerHtml + monthHtml;
            }else if(that.dlen == 3){
                YMDStr = yaerHtml + monthHtml + daysHtml;
            }else if(that.dlen > 3 && that.dlen <= 6){
                YMDStr = yaerHtml + monthHtml + daysHtml;
                hmsStr = hmsHtml;
            }else if(that.dlen == 7){
                hmsStr = hmsHtml;
            }
            var paneHtml = '{% for(var i=0;i<pane;i++){ %}<div class="jedate-pane">'+
                '<div class="jedate-header">{% if(i==0){ %}'+ymButton[0]+'{% }else{ %}'+ymButton[1]+'{% } %}'+ymtitHtml+'</div>'+
                '<div class="jedate-content{%= i==1?" bordge":"" %}">'+YMDStr+'</div>'+
                '</div>{% } %}';
            var btnStr = '{% if(timebtn){%}<div class="timecon" style="cursor: pointer;" @on="timeBtn">{%=lang.timetxt[0]%}</div>{% } %}<div class="btnscon">{% if(clear){ %}<span class="clear" @on="clearBtn">{%=lang.clear%}</span>{% } %}{% if(today){ %}<span class="today" @on="nowBtn">{%=lang.today%}</span>{% } %}{% if(yes){ %}<span class="setok" @on="sureBtn">{%=lang.yes%}</span>{% } %}</div>';

            return '<div class="jedate-menu" style="display:{%=shortcut.length>0 ? "block":"none"%};">'+shortHtml+'</div><div class="jedate-wrap">'+paneHtml+'</div>'+hmsStr+'<div class="jedate-footbtn">'+btnStr+'</div><div class="jedate-tips"></div>';
        },
        //
        compileBindNode : function (dom) {
            var self = this, aton = "@on";
            var acquireAttr = function (atVal){
                var args=/\(.*\)/.exec(atVal);
                if(args) { //,
                    args = args[0];
                    atVal = atVal.replace(args,"");
                    args = args.replace(/[\(\)\'\"]/g,'').split(",");
                }else args = [];
                return [atVal,args];
            };
            jet.each(dom.childNodes,function (i,node) {
                if (node.nodeType === 1) {
                    if(!self.$opts.festival) node.removeAttribute("ymd");
                    self.compileBindNode(node);
                    var geton = node.getAttribute(aton);
                    if(geton != null){
                        var onarr = acquireAttr(geton);
                        jet.on(node,"click",function () {
                            self[onarr[0]] && self[onarr[0]].apply(node,onarr[1]);
                        });
                        node.removeAttribute(aton);
                    }
                }
            });
        },
        methodEventBind : function() {
            var that = this, opts = that.$opts, multi = opts.multiPane, DTS = that.$data,
                result = new DateTime().reDate(),dateY = result.GetYear(),dateM = result.GetMonth(),dateD = result.GetDate(),
                range = opts.range,elCell = that.dateCell;
            jet.extend(that,{
                yearBtn:function (type,val) {
                    var yarr = val.split("#"), pval = jet.reMatch(yarr[0]), tmval = that.selectTime;
                    exarr = [jet.extend({YYYY:parseInt(val),MM:dateM,DD:dateD},tmval[0]),{}];
                    var dateVal = that.parseValue([exarr[0]],that.format);
                    that.storeData(exarr[0],exarr[1]);
                    that.renderDate();
                    opts.toggle && opts.toggle({elem:that.valCell,val:dateVal,date:exarr[0]});
                },
                yearShow:function (val) {
                    DTS.year = DTS.year ? false : true;
                    DTS.month = that.dlen < 3 ? true : false;
                    if(that.dlen > 2 && that.dlen <= 6){
                        var dayCell = $Q(".daystable",elCell);
                        DTS.day = dayCell.style.display == "none" ? true : false;
                    }
                    that.renderDate();
                },
                monthBtn:function (type,val) {
                    var ymarr = jet.reMatch(val),tmval = that.selectTime, exarr=[], PrevYM , NextYM,
                        year = parseInt(ymarr[0]),month = parseInt(ymarr[1]);
                    if(range){
                        if(type == "mprev"){
                            PrevYM = jet.prevMonth(year, month);
                            NextYM = jet.nextMonth(PrevYM.y, PrevYM.m);
                        }else{
                            NextYM = jet.nextMonth(year, month);
                            PrevYM = jet.prevMonth(NextYM.y, NextYM.m);
                        }
                        exarr = [jet.extend({YYYY:PrevYM.y,MM:PrevYM.m,DD:dateD},tmval[0]),{YYYY:NextYM.y,MM:NextYM.m,DD:dateD}];
                    }else{
                        var PNYM = (type == "mprev") ? jet.prevMonth(year, month) : jet.nextMonth(year, month);
                        exarr = [jet.extend({YYYY:PNYM.y,MM:PNYM.m,DD:dateD},tmval[0]),{}];
                    }
                    var dateVal = that.parseValue([exarr[0]],that.format);
                    that.storeData(exarr[0],exarr[1]);
                    that.renderDate();
                    opts.toggle && opts.toggle({elem:that.valCell,val:dateVal,date:exarr[0]});
                },
                monthShow:function (val) {
                    DTS.year = false;
                    DTS.month = DTS.month ? false : true;
                    if(that.dlen > 2 && that.dlen <= 6){
                        var dayCell = $Q(".daystable",elCell);
                        DTS.day = dayCell.style.display == "none" ? true : false;
                    }
                    that.renderDate();
                },
                shortClick:function (val) {
                    var reval = val.replace(/\#/g,','),evobj = eval("("+reval+")"),
                        gval = jet.getDateTime(evobj),tmval = that.selectTime;
                    that.selectValue = [jet.parse(gval,"YYYY-MM-DD")];
                    that.selectDate = [{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD}];
                    if(opts.onClose){
                        var nYM = jet.nextMonth(gval.YYYY,gval.MM),
                            ymarr = [{YYYY:gval.YYYY,MM:gval.MM,DD:gval.DD},{YYYY:nYM.y,MM:nYM.m,DD:null}];
                        that.storeData(jet.extend(ymarr[0],tmval[0]),jet.extend(ymarr[1],tmval[1]));
                        that.renderDate();
                    }else{
                        that.setValue(gval,that.format);
                        that.closeDate();
                    }
                },
                yearClick:function (val) {
                    if(jet.hasClass(this,"disabled")) return;
                    var yearVal = "",lens = that.dlen;
                    if(range && lens == 1){
                        var ylen = that.selectValue.length;
                        that.selectDate = (ylen == 2) ? [{YYYY:parseInt(val),MM:dateM}] :
                            [{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(val),MM:dateM}];
                        that.selectValue = (ylen == 2) ? [val+"-"+jet.digit(dateM)] : [that.selectValue[0],val+"-"+jet.digit(dateM)];

                        if(that.selectValue.length == 2){
                            var svalarr = [that.selectValue[0],that.selectValue[1]],newArr = [{},{}];
                            svalarr.sort(function(a, b){ return a > b ? 1 : -1; });
                            that.selectValue = svalarr;
                            jet.each(svalarr,function(i,strval) {
                                jet.each(jet.reMatch(strval),function(s,dval) {
                                    newArr[i][ymdzArr[s]] = dval;
                                });
                            });
                            that.selectDate = newArr;
                        }
                    }else if(lens>1 && lens <=6){
                        yearVal = parseInt(val);
                    }else{
                        that.selectValue = [val+"-"+jet.digit(dateM)];
                        that.selectDate = [{YYYY:parseInt(val),MM:dateM}];
                    }
                    DTS.year = (lens == 1) ? true : false;
                    DTS.month = (lens < 3) ? true : false;
                    DTS.day = (lens > 2 && lens <= 6) ? true : false;
                    var electVal = (lens>1 && lens <=6) ? yearVal : parseInt(that.selectDate[0].YYYY);
                    that.storeData(jet.extend({YYYY:electVal,MM:dateM,DD:dateD},that.selectTime[0]),{});
                    that.renderDate();
                },
                monthClick:function (val) {
                    if(jet.hasClass(this,"disabled")) return;
                    var ymval = jet.reMatch(val),newArr = [{},{}],mlen = that.selectValue.length ;
                    if(range){
                        that.selectDate = (mlen == 2) ? [{YYYY:ymval[0],MM:ymval[1]}] :
                            [{YYYY:that.selectDate[0].YYYY,MM:that.selectDate[0].MM},{YYYY:parseInt(val),MM:ymval[1]}];
                        that.selectValue = (mlen == 2) ? [val] : [that.selectValue[0],val];

                        if(that.selectValue.length == 2){
                            var svalarr = [that.selectValue[0],that.selectValue[1]];
                            svalarr.sort(function(a, b){ return a > b ? 1 : -1; });
                            that.selectValue = svalarr;
                            jet.each(svalarr,function(i,strval) {
                                jet.each(jet.reMatch(strval),function(s,dval) {
                                    newArr[i][ymdzArr[s]] = dval;
                                });
                            });
                            that.selectDate = newArr;
                        }
                    }else{
                        that.selectValue = [val];
                        that.selectDate = [{YYYY:ymval[0],MM:ymval[1]}];
                    }
                    if(that.dlen > 2){
                        DTS.year = false;
                        DTS.month = false;
                    }
                    DTS.day = (that.dlen > 2 && that.dlen <= 6) ? true : false;
                    that.storeData(jet.extend({
                        YYYY:parseInt(that.selectDate[0].YYYY),
                        MM:parseInt(that.selectDate[0].MM),
                        DD:dateD
                    },that.selectTime[0]),{});
                    that.renderDate();
                },
                daysClick:function (val) {
                    if(jet.hasClass(this,"disabled")) return;
                    var tmval = that.selectTime, matVal = jet.reMatch(val),
                        slen = that.selectValue.length,dateVal = "",
                        newArr = [{},{}],sday,nYM,ymarr;
                    if(range){

                        if(slen == 1){
                            var svalarr = [that.selectValue[0],val];
                            svalarr.sort(function(a, b){ return a > b ? 1 : -1; });
                            that.selectValue = svalarr;
                            jet.each(svalarr,function(i,strval) {
                                jet.each(jet.reMatch(strval),function(s,dval) {
                                    newArr[i][ymdzArr[s]] = dval;
                                });
                            });
                            that.selectDate = newArr;
                        }else{
                            that.selectValue = [val];
                            newArr = [{YYYY:matVal[0],MM:matVal[1],DD:matVal[2]}];
                            that.selectDate = [{YYYY:matVal[0],MM:matVal[1],DD:matVal[2]},{}];
                        }
                        nYM = jet.nextMonth(newArr[0].YYYY,newArr[0].MM);
                        ymarr = [{YYYY:newArr[0].YYYY,MM:newArr[0].MM,DD:newArr[0].DD},{YYYY:nYM.y,MM:nYM.m,DD:null}];
                        that.storeData(jet.extend(ymarr[0],tmval[0]),jet.extend(ymarr[1],tmval[1]));
                        that.renderDate();
                    }else{
                        that.selectValue = [val];
                        that.selectDate = [{YYYY:matVal[0],MM:matVal[1],DD:matVal[2]},{YYYY:matVal[0],MM:matVal[1],DD:matVal[2]}];
                        jet.each(new Array(range == false ? 1 : 2),function (a) {
                            jet.each(matVal,function (i,val) {
                                newArr[a][ymdzArr[i]] = val;
                            });
                            jet.extend(newArr[a],tmval[a]);
                        });
                        if(opts.onClose){
                            that.storeData(jet.extend(newArr[0],tmval[0]),jet.extend(newArr[1],tmval[1]));
                            that.renderDate();
                        }else{
                            dateVal = that.setValue(newArr,that.format);
                            that.closeDate();
                            opts.donefun && opts.donefun.call(that,{elem:that.valCell,val:dateVal,date:newArr});
                        }
                    }
                },
                hmsClick:function(idx,num) {
                    var pidx = parseInt(num), vals = parseInt(jet.text(this)),
                        paridx = parseInt(idx), act = "action",mhms = ["hh","mm","ss"],
                        ulCell = $Q(".jedate-time",that.dateCell).querySelectorAll("ul")[pidx],
                        tlen = that.$data.timelist[0].length;
                    if(jet.hasClass(this,"disabled")) return;
                    jet.each(ulCell.childNodes,function (i,node) {
                        var reg = new RegExp("(^|\\s+)" + act + "(\\s+|$)", "g");
                        node.className = reg.test(node.className) ? node.className.replace(reg, '') : node.className;
                    });
                    that.selectTime[paridx][paridx == 1 ? mhms[pidx-tlen]:mhms[pidx]] = vals;
                    this.className = this.className + act;
                    var hmsCls = ulCell.querySelector("."+act);
                    ulCell.scrollTop = hmsCls ? (hmsCls.offsetTop-145):0;
                    if(that.dlen == 7 && idx == 0 && range && !multi){
                        var nVal = that.getValue({}), nYM = jet.nextMonth(nVal[0].YYYY,nVal[0].MM),st = that.selectTime;
                        that.storeData(
                            {YYYY:nVal[0].YYYY,MM:nVal[0].MM,DD:null,hh:st[0].hh,mm:st[0].mm,ss:st[0].ss},
                            {YYYY:nYM.y,MM:nYM.m,DD:null,hh:st[1].hh,mm:st[1].mm,ss:st[1].ss}
                        );
                        that.renderDate();
                    }
                },
                timeBtn:function() {
                    var timeCell = $Q(".jedate-time",elCell), disNo = timeCell.style.display == "none";
                    jet.text(this,disNo ? opts.language.backtxt:opts.language.timetxt[0]);
                    jet.setCss(timeCell,{display: disNo ? "block":"none"});
                },
                //
                clearBtn:function () {
                    jet.valText(that.valCell,"");
                    that.selectDate = [jet.parse(jet.getDateTime({}),"YYYY-MM-DD hh:mm:ss")];
                    that.closeDate();
                    if ("createEvent" in document) {
                     var evt = document.createEvent("HTMLEvents");
                     evt.initEvent("change", false, true);
                     that.valCell.dispatchEvent(evt);
                    }
                    else
                     that.valCell.fireEvent("onchange");
                    opts.clearfun && opts.clearfun.call(that);
                    opts.donefun && opts.donefun.call(that,{elem:that.valCell});
                },
                //
                nowBtn:function () {
                    var newArr = jet.getDateTime({}), nYM = jet.nextMonth(newArr.YYYY,newArr.MM), dateVal;
                    that.selectDate = [newArr];
                    dateVal = opts.isShow ? that.setValue([newArr],that.format,true) : jet.parse(newArr,that.format);
                    if(opts.onClose && range || !opts.isShow){
                        that.storeData(newArr,{YYYY:nYM.y,MM:nYM.m,DD:null,hh:0,mm:0,ss:0});
                        that.renderDate();
                    }else{
                        that.closeDate();
                    }
                    opts.donefun && opts.donefun.call(that,{elem:that.valCell,val:dateVal,date:newArr});
                },
                //
                sureBtn:function () {
                    var newArr = that.selectValue.length > 1 ? [{},{}]: [{}], dateVal = "", tmval = that.selectTime;
                    var equal = function (o) {
                        var h = o.hh == undefined ? 0:o.hh, m = o.mm == undefined ? 0:o.mm, s = o.ss == undefined ? 0:o.ss;
                        return parseInt(jet.digit(h)+""+jet.digit(m)+""+jet.digit(s));
                    };
                    if(range){
                        if(that.selectValue.length > 1){
                            var sortarr = that.selectValue;
                            sortarr.sort(function(a, b){ return a > b ? 1 : -1; });
                            jet.each(sortarr,function (i,arr) {
                                jet.each(jet.reMatch(arr),function (a,val) {
                                    newArr[i][ymdzArr[a]] = val;
                                });
                                jet.extend(newArr[i],tmval[i]);
                            });
                        }else if(that.dlen == 7 && tmval.length>1){
                            newArr = tmval;
                        }
                        var sameTime = equal(tmval[0]) >= equal(tmval[1]),selVal = that.selectValue, sameDate = "";
                        if(selVal[1] != undefined) sameDate = selVal[0].replace(/\-/g,"") == selVal[1].replace(/\-/g,"");
                        if(selVal.length == 1 && that.dlen < 7){
                            that.tips(opts.language.name == "cn" ? "" : "Please select the end date"); return;
                        }else if((that.dlen == 7 && sameTime) || (sameDate && sameTime)){
                            that.tips(opts.language.name == "cn" ? "" : "The end time must be greater than the start time"); return;
                        }
                    }else{
                        jet.each(new Array(range == false ? 1 : 2),function (i) {
                            if(that.dlen != 7) jet.each(jet.reMatch(that.selectValue[0]),function (a,val) {
                                newArr[i][ymdzArr[a]] = val;
                            });
                            jet.extend(newArr[i],tmval[i]);
                        });
                    }
                    dateVal = that.setValue(newArr,that.format,opts.isShow ? true:false);
                    opts.isShow && that.closeDate();
                    opts.donefun && opts.donefun.call(that,{elem:that.valCell,val:dateVal,date:newArr});
                },
                blankArea:function () {
                    jet.on(document,"mouseup",function (ev) {
                        jet.stopPropagation(ev);
                        that.closeDate();
                    });
                    jet.on($Q(elx),"mouseup", function(ev) {
                        jet.stopPropagation(ev);
                    });
                }
            });
        },
        //
        eachYear  : function (val,type) {
            var that = this,opts = that.$opts, yNum = parseInt(val),yarr = [],seCls='', selYear = that.selectDate,i,
                mins = jet.reMatch(that.minDate), maxs = jet.reMatch(that.maxDate);
            i = type == 1 ? yNum : that.yindex;
            that.yindex = type == 1 ? 12+yNum : 12+that.yindex;
            var endDate = selYear[1] == undefined ? "":selYear[1].YYYY;
            for(; i < that.yindex; i++){
                if(i == selYear[0].YYYY || i == endDate){
                    seCls = "action";
                }else if(i>selYear[0].YYYY && i<endDate){
                    seCls = "contain";
                }else if(i < mins[0] || i > maxs[0]){
                    seCls = "disabled";
                }else{
                    seCls =  "";
                }
                yarr.push({style:seCls,y:i});
            }
            return yarr;
        },
        //
        eachMonth : function (val,type) {
            var that = this,opts = that.$opts, range = opts.range, marr = [],
                selMonth = that.selectDate, seCls='',monthArr = opts.language.month ,
                mins = jet.reMatch(that.minDate), maxs = jet.reMatch(that.maxDate),
                minym = parseInt(mins[0]+""+jet.digit(mins[1])),
                maxym =  parseInt(maxs[0]+""+jet.digit(maxs[1])),
                currStart = parseInt(selMonth[0].YYYY+""+jet.digit(selMonth[0].MM)),
                currEnd = selMonth[1] ? parseInt(selMonth[1].YYYY+""+jet.digit(selMonth[1].MM)) : 0;
            jet.each(monthArr,function (i,months) {
                var ival = parseInt(val+""+jet.digit(months));
                if(ival == currStart || ival == currEnd){
                    seCls = "action";
                }else if(ival > currStart && ival < currEnd){
                    seCls = "contain";
                }else if(ival < minym || ival > maxym){
                    seCls = "disabled";
                }else{
                    seCls = "";
                }
                marr.push({style:seCls ,y:val ,m:months});
            });
            return marr;
        },
        //
        eachDays  : function (yd,md,ds,idx) {
            var that = this, count = 0, daysArr = [],opts = that.$opts, multiPane = jet.isBool(opts.multiPane),
                firstWeek = new Date(yd, md - 1, 1).getDay() || 7,valrange = opts.range != false,
                daysNum = jet.getDaysNum(yd, md), didx = 0, sDate = that.selectDate,
                prevM = jet.prevMonth(yd, md),isShow = jet.isBool(opts.isShow),
                prevDaysNum = jet.getDaysNum(yd, prevM.m),nextM = jet.nextMonth(yd, md), objCell = that.valCell,
                lang = opts.language, endval = opts.valiDate||[],
                minArr = jet.reMatch(that.minDate), minNum = parseInt(minArr[0]+""+jet.digit(minArr[1])+""+jet.digit(minArr[2])),
                maxArr = jet.reMatch(that.maxDate), maxNum = parseInt(maxArr[0]+""+jet.digit(maxArr[1])+""+jet.digit(maxArr[2]));
            var startDate = sDate[0] ? parseInt(sDate[0].YYYY+""+jet.digit(sDate[0].MM)+""+jet.digit(sDate[0].DD)) : "";
            var endDate = sDate[1] ? parseInt(sDate[1].YYYY+""+jet.digit(sDate[1].MM)+""+jet.digit(sDate[1].DD)) : "";
            //
            var setMark = function (my, mm, md) {
                var Marks = opts.marks, contains = function(arr, obj) {
                    var clen = arr.length;
                    while (clen--) {  if (arr[clen] === obj) return true; }
                    return false;
                },isArr = jet.isType(Marks,"array");
                return isArr && Marks.length > 0 && contains(Marks, my + "-" + jet.digit(mm) + "-" + jet.digit(md)) ? '<i class="marks"></i>' :"";
            };
            //
            var isfestival = function(y, m ,d) {
                var festivalStr = '';
                if(opts.festival == true && lang.name == "cn"){
                    var lunar = jeLunar(y, m - 1, d), feslunar = (lunar.solarFestival || lunar.lunarFestival),
                        lunartext = (feslunar && lunar.jieqi) != "" ? feslunar : (lunar.jieqi || lunar.showInLunar);
                    festivalStr = '<p><span class="solar">' + d + '</span><span class="lunar">' + lunartext + '</span></p>';
                }else{
                    festivalStr = '<p class="nolunar">' + d + '</p>';
                }
                return festivalStr;
            };
            //
            var dateLimit = function(Y, M, D, isMonth){
                var thatNum = parseInt(Y + "" + jet.digit(M) + "" + jet.digit(D));
                if(isMonth){
                    if (thatNum >= minNum && thatNum <= maxNum) return true;
                }else {
                    if (minNum > thatNum || maxNum < thatNum) return true;
                }
            };
            //week,
            var week_valiDate = '';
            var ymq_one_day_valiDate = '';
            var ymq_week = [];
            var ymq_one_day = [];
            if(endval.length > 0 && endval[0]!=""){
                if (endval[0].indexOf("ymq") != -1) {
                    if (endval[0].indexOf("one_day") != -1) {
                        var y_valiDate = endval[0].split('ymq')[0];
                        var ymq_one_day_str = endval[0].split('ymq')[1];
                        week_valiDate = ymq_one_day_str.split('one_day')[0];
                        ymq_one_day_valiDate = ymq_one_day_str.split('one_day')[1];
                    }else{
                        week_valiDate = endval[0].split('ymq')[1];
                        var y_valiDate = endval[0].split('ymq')[0];
                    }
                }else{
                    if (endval[0].indexOf("one_day") != -1) {
                        ymq_one_day_valiDate = endval[0].split('one_day')[1];
                        var y_valiDate = endval[0].split('one_day')[0];
                    }else{
                        var y_valiDate = endval[0];
                    }
                    
                }
                if (week_valiDate != '') {
                    ymq_week = week_valiDate.split('-');
                }
                if (ymq_one_day_valiDate != '') {
                    ymq_one_day = ymq_one_day_valiDate.split(',');
                }
            }
            //week


            //week
            var regExpDate = function (date,cls,ymyear,ymqmonth) {
                //week
                var ymqdateobg = {YYYY: ymyear, MM: ymqmonth, DD: date}
                //week
                var inArray = function (search,array){
                    for(var i in array) if(array[i]==search) return true;
                    return false;
                };
                if(endval.length > 0 && y_valiDate!=""){
                    if(/\%/g.test(y_valiDate)){
                        var reval = y_valiDate.replace(/\%/g,"").split(","), enArr = [];
                        jet.each(reval,function (r,rel) {
                            enArr.push(jet.digit(parseInt(rel)));
                        });
                        var isfind = inArray(jet.digit(date), enArr) == false;
                        cls = jet.isBool(endval[1]) ? (isfind ? " disabled" :cls) : (isfind ? cls :" disabled");
                    }else {
                        var valreg = that.dateRegExp(y_valiDate), regday = valreg.test(jet.digit(date));
                        cls = jet.isBool(endval[1]) ? (regday ? " disabled" : cls) : (regday ? cls : " disabled");
                    }
                }
                //
                if (ymq_one_day.length > 0) {
                    if (ymq_one_day.includes(ymqmonth+'.'+date)) {
                        cls = " disabled";
                    }
                }
                //

                //week
                if (endval.length > 0 && endval[0].indexOf("ymq") != -1) {
                    if (ymq_week.includes(jeDate.getLunar(ymqdateobg).nW+'')) {
                        cls = " disabled";
                    }
                }
                //week
                return cls;
            };

            //var ymds = ymdarr[1]
            //
            //week
            if (md == 1) {
                ymq_prev_year = yd-1;
                ymq_prev_month = 12;
            }else{
                ymq_prev_year = yd;
                ymq_prev_month = md-1;
            }
            //week
            for (var p = prevDaysNum - firstWeek + 1; p <= prevDaysNum; p++, count++) {
                var pmark = setMark(prevM.y,prevM.m,p), pcls = dateLimit(prevM.y, prevM.m, p, false) ? "disabled" : "other";
                pcls = regExpDate(p,pcls,ymq_prev_year,ymq_prev_month);
                daysArr.push({style:pcls,ymd:prevM.y+'-'+jet.digit(prevM.m)+'-'+jet.digit(p),day:(isfestival(prevM.y,prevM.m,p) + pmark)});
            }
            //
            for(var b = 1; b <= daysNum; b++, count++){
                var bmark = setMark(yd,md,b), bcls = "";
                var dateval = parseInt(yd+""+jet.digit(md)+""+jet.digit(b)),
                    parsdate = dateval > startDate, rangdate = dateval < endDate;
                if(dateLimit(yd, md, b, true)){
                    if(dateval == startDate || dateval == endDate){
                        bcls = " action";
                    }else if(parsdate&&rangdate){
                        bcls = " contain";
                    }else {
                        bcls = "";
                    }
                }else {
                    bcls = " disabled";
                }
                bcls = regExpDate(b,bcls,yd,md);
                daysArr.push({style:"normal"+bcls,ymd:yd+'-'+jet.digit(md)+'-'+jet.digit(b),day:(isfestival(yd,md,b) + bmark)});
            }
            //
            //week
            if (md == 12) {
                ymq_next_year = yd+1;
                ymq_next_month = 1;
            }else{
                ymq_next_year = yd;
                ymq_next_month = md+1;
            }
            //week
            for(var n = 1, nlen = 42 - count; n <= nlen; n++){
                var nmark = setMark(nextM.y,nextM.m,n);
                var ncls = dateLimit(nextM.y, nextM.m, n, false) ? "disabled" : "other";
                ncls = regExpDate(n,ncls,ymq_next_year,ymq_next_month);
                daysArr.push({style:ncls,ymd:nextM.y+'-'+jet.digit(nextM.m)+'-'+jet.digit(n),day:(isfestival(nextM.y,nextM.m,n) + nmark)});
            }
            //
            return daysArr;
        },
        eachTime  : function (hmsArr,type) {
            var that = this,opts = that.$opts, range = opts.range,multi = opts.multiPane, minVal = [], maxVal = [],
                mhms = ["hh","mm","ss"], timeArr = [],hmsCls = '',format = that.format,
                ntVal = jet.trim(that.minDate).replace(/\s+/g," "),
                xtVal = jet.trim(that.maxDate).replace(/\s+/g," "),
                nVal = ntVal.split(" "), xVal = xtVal.split(" ");
            if(that.dlen>3 && /\:/.test(nVal) && /\:/.test(xVal)){
                minVal = jet.reMatch(/\s/.test(ntVal)&&that.dlen>3 ? nVal[1] : ntVal);
                maxVal = jet.reMatch(/\s/.test(xtVal)&&that.dlen>3 ? xVal[1] : xtVal);
            }
            jet.each([24,60,60],function (s,lens) {
                timeArr[s] = [];
                var unhmsVal = minVal[s] == undefined || minVal[s] == 0 ? hmsArr[mhms[s]] : minVal[s],
                currVal = that.getValue() == "" ? unhmsVal : hmsArr[mhms[s]];
                if(that.dlen>3 && /\:/.test(nVal) && type==1){
                    that.selectTime[0][mhms[s]] = currVal;
                }
                for (var h = 0; h < lens; h++) {
                    var exists = new RegExp(mhms[s],"g").test(format);
                    if(h == currVal){
                        hmsCls = exists ? "action" : "disabled";
                    }else if(!exists || !range && multi &&(h<minVal[s] ||h>maxVal[s])){
                        hmsCls = "disabled";
                    }else if(!multi){
                        hmsCls = type == 1&&h<minVal[s] || type == 2&&h>maxVal[s] ? "disabled" : "";
                    }else{
                        hmsCls = "";
                    }
                    timeArr[s].push({style:hmsCls,hms:h});
                }
            });
            return timeArr;
        },
        //
        closeDate : function () {
            var elem = $Q(elx), tipelem = $Q("#jedatetipscon");
            elem && document.body.removeChild(elem);
            tipelem && document.body.removeChild(tipelem);
            //
            this.setDatas();
        },
        //
        parseValue : function (fnObj,matStr) {
            var that = this, valArr=[],opts = that.$opts, range = opts.range;
            jet.each(fnObj,function (i,val) {
                valArr.push(jet.parse(val, matStr));
            });
            return range == false ? valArr[0] : valArr.join(range);
        },
        //
        dateRegExp : function(valArr) {
            var enval = valArr.split(",")||[], regs = "";
            var doExp = function (val) {
                var arr, tmpEval, regs = /#?\{(.*?)\}/;
                val = val + "";
                while ((arr = regs.exec(val)) != null) {
                    arr.lastIndex = arr.index + arr[1].length + arr[0].length - arr[1].length - 1;
                    tmpEval = parseInt(eval(arr[1]));
                    if (tmpEval < 0) tmpEval = "9700" + -tmpEval;
                    val = val.substring(0, arr.index) + tmpEval + val.substring(arr.lastIndex + 1);
                }
                return val;
            };
            if (enval && enval.length > 0) {
                for (var i = 0; i < enval.length; i++) {
                    regs += doExp(enval[i]);
                    if (i != enval.length - 1) regs += "|";
                }
                regs = regs ? new RegExp("(?:" + regs + ")") : null;
            } else {
                regs = null;
            }
            //re = new RegExp((re + "").replace(/^\/\(\?:(.*)\)\/.*/, "$1"));
            return regs;
        },
        //
        showFestival:function () {
            var that = this, opts = that.$opts;
            jet.each(that.dateCell.querySelectorAll(".daystable td"),function (i,node) {
                var tval = jet.reMatch(jet.attr(node,"ymd")),tipDiv = document.createElement("div");
                node.removeAttribute("ymd");
                //
                jet.on(node,"mouseover",function () {
                    var lunar = new jeLunar(tval[0], tval[1] - 1, tval[2]);
                    if($Q("#jedatetipscon")) return;
                    tipDiv.id = tipDiv.className = "jedatetipscon";
                    var tiphtml = '<p>' + lunar.solarYear + '\u5E74' + lunar.solarMonth + '\u6708' + lunar.solarDate + '\u65E5 ' + lunar.inWeekDays + '</p><p class="red">\u519C\u5386' + lunar.shengxiao + '\u5E74 ' + lunar.lnongMonth + '\u6708' + lunar.lnongDate + '</p><p>' + lunar.ganzhiYear + '\u5E74 ' + lunar.ganzhiMonth + '\u6708 ' + lunar.ganzhiDate + '\u65E5</p>';
                    var Fesjieri = (lunar.solarFestival || lunar.lunarFestival) != "" ? '<p class="red">' + ("\u8282\u65E5"+lunar.solarFestival + lunar.lunarFestival) + '</p>' : "";
                    var Fesjieqi = lunar.jieqi != "" ? '<p class="red">'+(lunar.jieqi != "" ? "\u8282\u6C14"+lunar.jieqi : "") + '</p>': "";
                    var tiptext = (lunar.solarFestival || lunar.lunarFestival || lunar.jieqi) != "" ? (Fesjieri + Fesjieqi) : "";
                    jet.html(tipDiv,tiphtml + tiptext);
                    document.body.appendChild(tipDiv);
                    //
                    var tipPos = that.lunarOrien(tipDiv, this);
                    jet.setCss(tipDiv,{"zIndex":  (opts.zIndex == undefined ? 10000 + 5 : opts.zIndex + 5),top:tipPos.top,left:tipPos.left,position:"absolute",display:"block"});
                });
                //
                jet.on(node,"mouseout",function () {
                    document.body.removeChild($Q("#jedatetipscon"));
                });
            });
            if (that.dateCell.nodeType === 1 && !jet.hasClass(that.dateCell,"grid")) that.dateCell.className = that.dateCell.className + " grid";
        },
        //
        lunarOrien : function(obj, self, pos) {
            var tops, leris, ortop, orleri, rect =self.getBoundingClientRect(), boxW = obj.offsetWidth, boxH = obj.offsetHeight;
            leris = rect.right + boxW / 1.5 >= jet.docArea(true) ? rect.right - boxW : rect.left + (pos ? 0 : jet.docScroll(true));
            tops = rect.bottom + boxH / 1 <= jet.docArea() ? rect.bottom - 1 : rect.top > boxH / 1.5 ? rect.top - boxH - 1 : jet.docArea() - boxH;
            if(leris + boxW > jet.docArea(true)) leris = rect.left - (boxW - rect.width);
            ortop = Math.max(tops + (pos ? 0 :jet.docScroll()) + 1, 1) + "px", orleri = leris + "px";
            return {top: ortop, left: orleri }
        },
        //
        dateOrien : function(elbox, valCls, pos) {
            var that = this, tops, leris, ortop, orleri,
                rect = that.$opts.fixed ? valCls.getBoundingClientRect() : elbox.getBoundingClientRect(),
                leris = rect.left, tops = rect.bottom;
            if(that.$opts.fixed) {
                var boxW = elbox.offsetWidth, boxH = elbox.offsetHeight;
                //
                if(leris + boxW > jet.docArea(true)){
                    leris = leris - (boxW - rect.width);
                }
                //
                if(tops + boxH > jet.docArea()){
                    tops = rect.top > boxH ? rect.top - boxH -2 : jet.docArea() - boxH -1;
                }
                //
                ortop = Math.max(tops + (pos ? 0 :jet.docScroll())+1, 1) + "px"; orleri = leris + "px";
            }else{
                //
                ortop = "50%"; orleri = "50%";
                elbox.style.cssText = "marginTop:"+-(rect.height / 2)+";marginLeft:"+-(rect.width / 2);
            }
            jet.setCss(elbox,{top:ortop,left:orleri});
        },
        tips : function (text, time) {
            var that = this, tipCls = $Q(".jedate-tips",that.dateCell),tipTime;
            jet.html(tipCls,text||""); jet.setCss(tipCls,{display:"block"});
            clearTimeout(tipTime);
            tipTime = setTimeout(function(){
                jet.html(tipCls,""); jet.setCss(tipCls,{display:"none"});
            }, (time||2.5)*1000);
        },
        locateScroll : function () {
            var that = this, ulCell = $Q(".jedate-time",that.dateCell).querySelectorAll("ul");
            jet.each(ulCell, function(i,cell) {
                var hmsCls = cell.querySelector(".action");
                cell.scrollTop = hmsCls ? (hmsCls.offsetTop-145):0;
            });
            if(that.dlen != 7) jet.setCss($Q(".jedate-time",that.dateCell),{display:'none'});
        }
    });

    //
    function jeLunar(ly,lm,ld) {
        var lunarInfo=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],
            sTermInfo = [ 0, 21208, 43467, 63836, 85337, 107014, 128867, 150921, 173149, 195551, 218072, 240693, 263343, 285989, 308563, 331033, 353350, 375494, 397447, 419210, 440795, 462224, 483532, 504758 ];
        var Gan = "", Zhi = "", Animals = "";
        var solarTerm = [ "", "", "", "", "", "", "", "", "", "",
            "", "", "", "", "", "", "", "", "", "", "", "", "", "" ];
        var nStr1 = "", nStr2 = "", nStr3 = [ "", "", "", "", "", "", "", "", "", "", "", ""],
            sFtv1 = {
                "0101" : "*1",         "0202" : "",
                "0214" : "",           "0308" : "",
                "0312" : "",           "0315" : "",
                "0401" : "",           "0422" : "",
                "0501" : "*1",         "0504" : "",
                "0512" : "",           "0518" : "",
                "0520" : "",           "0601" : "",
                "0623" : "",       "0630" : "",
                "0701" : "",           "0801" : "",
                "0903" : "",       "0910" : "",
                "1001" : "*3",         "1201" : "",
                "1224" : "",           "1225" : ""
            },
            sFtv2 = {
                "0100" : "",             "0101" : "*2",
                "0115" : "",           "0505" : "*1",
                "0707" : "",           "0715" : "",
                "0815" : "*1",         "0909" : "*1",
                "1015" : "",           "1208" : "",
                "1223" : ""

            };
        function flunar(Y) {
            var sTerm = function (j, i) {
                var h = new Date((31556925974.7 * (j - 1900) + sTermInfo[i] * 60000) + Date.UTC(1900, 0, 6, 2, 5));
                return (h.getUTCDate());
            },
            d = function (k) {
                var h, j = 348;
                for (h = 32768; h > 8; h >>= 1) j += (lunarInfo[k - 1900] & h) ? 1 : 0;
                return (j + b(k));
            },
            ymdCyl = function (h) {
                return (Gan.charAt(h % 10) + Zhi.charAt(h % 12));
            },
            b = function (h) {
                var islp = (g(h)) ? ((lunarInfo[h - 1900] & 65536) ? 30 : 29) : (0);
                return islp;
            },
            g = function (h) {
                return (lunarInfo[h - 1900] & 15)
            },
            e = function (i, h) {
                return ((lunarInfo[i - 1900] & (65536 >> h)) ? 30 : 29);
            },
            newymd = function (m) {
                var k, j = 0, h = 0, l = new Date(1900, 0, 31), n = (m - l) / 86400000;
                this.dayCyl = n + 40;
                this.monCyl = 14;
                for (k = 1900; k < 2050 && n > 0; k++) {
                    h = d(k); n -= h;
                    this.monCyl += 12;
                }
                if (n < 0) {
                    n += h; k--;
                    this.monCyl -= 12;
                }
                this.year = k;
                this.yearCyl = k - 1864;
                j = g(k);
                this.isLeap = false;
                for (k = 1; k < 13 && n > 0; k++) {
                    if (j > 0 && k == (j + 1) && this.isLeap == false) {
                        --k;
                        this.isLeap = true;
                        h = b(this.year);
                    } else {
                        h = e(this.year, k);
                    }
                    if (this.isLeap == true && k == (j + 1)) {
                        this.isLeap = false;
                    }
                    n -= h;
                    if (this.isLeap == false) this.monCyl++;
                }
                if (n == 0 && j > 0 && k == j + 1) {
                    if (this.isLeap) {
                        this.isLeap = false;
                    } else {
                        this.isLeap = true;
                        --k;
                        --this.monCyl;
                    }
                }
                if (n < 0) {
                    n += h; --k;
                    --this.monCyl;
                }
                this.month = k;
                this.day = n + 1;
            },
            digit = function (num) {
                return num < 10 ? "0" + (num | 0) : num;
            },
            reymd = function (i, j) {
                var h = i;
                return j.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g, function (k) {
                    switch (k) {
                        case "yyyy":
                            var l = "000" + h.getFullYear();
                            return l.substring(l.length - 4);
                        case "dd": return digit(h.getDate());
                        case "d": return h.getDate().toString();
                        case "MM": return digit((h.getMonth() + 1));
                        case "M": return h.getMonth() + 1;
                    }
                });
            },
            lunarMD = function (i, h) {
                var j;
                switch (i, h) {
                    case 10: j = ""; break;
                    case 20: j = ""; break;
                    case 30: j = ""; break;
                    default:
                        j = nStr2.charAt(Math.floor(h / 10));
                        j += nStr1.charAt(h % 10);
                }
                return j;
            };
            this.isToday = false;
            this.isRestDay = false;
            this.solarYear = reymd(Y, "yyyy");
            this.solarMonth = reymd(Y, "M");
            this.solarDate = reymd(Y, "d");
            this.solarWeekDay = Y.getDay();
            this.inWeekDays = "" + nStr1.charAt(this.solarWeekDay);
            var X = new newymd(Y);
            this.lunarYear = X.year;
            this.shengxiao = Animals.charAt((this.lunarYear - 4) % 12);
            this.lunarMonth = X.month;
            this.lunarIsLeapMonth = X.isLeap;
            this.lnongMonth = this.lunarIsLeapMonth ? "" + nStr3[X.month - 1] : nStr3[X.month - 1];
            this.lunarDate = X.day;
            this.showInLunar = this.lnongDate = lunarMD(this.lunarMonth, this.lunarDate);
            if (this.lunarDate == 1) {
                this.showInLunar = this.lnongMonth + "";
            }
            this.ganzhiYear = ymdCyl(X.yearCyl);
            this.ganzhiMonth = ymdCyl(X.monCyl);
            this.ganzhiDate = ymdCyl(X.dayCyl++);
            this.jieqi = "";
            this.restDays = 0;
            if (sTerm(this.solarYear, (this.solarMonth - 1) * 2) == reymd(Y, "d")) {
                this.showInLunar = this.jieqi = solarTerm[(this.solarMonth - 1) * 2];
            }
            if (sTerm(this.solarYear, (this.solarMonth - 1) * 2 + 1) == reymd(Y, "d")) {
                this.showInLunar = this.jieqi = solarTerm[(this.solarMonth - 1) * 2 + 1];
            }
            if (this.showInLunar == "") {
                this.showInLunar = "";
                this.restDays = 1;
            }
            this.solarFestival = sFtv1[reymd(Y, "MM") + reymd(Y, "dd")];
            if (typeof this.solarFestival == "undefined") {
                this.solarFestival = "";
            } else {
                if (/\*(\d)/.test(this.solarFestival)) {
                    this.restDays = parseInt(RegExp.$1);
                    this.solarFestival = this.solarFestival.replace(/\*\d/, "");
                }
            }
            this.showInLunar = (this.solarFestival == "") ? this.showInLunar : this.solarFestival;
            this.lunarFestival = sFtv2[this.lunarIsLeapMonth ? "00" : digit(this.lunarMonth) + digit(this.lunarDate)];
            if (typeof this.lunarFestival == "undefined") {
                this.lunarFestival = "";
            } else {
                if (/\*(\d)/.test(this.lunarFestival)) {
                    this.restDays = (this.restDays > parseInt(RegExp.$1)) ? this.restDays : parseInt(RegExp.$1);
                    this.lunarFestival = this.lunarFestival.replace(/\*\d/, "");
                }
            }
            if (this.lunarMonth == 12 && this.lunarDate == e(this.lunarYear, 12)) {
                this.lunarFestival = sFtv2["0100"];
                this.restDays = 1;
            }
            this.showInLunar = (this.lunarFestival == "") ? this.showInLunar : this.lunarFestival;
        }
        return new flunar(new Date(ly, lm, ld));
    }
    window.ymq_option.jeDate = jeDate;
    return jeDate;
});